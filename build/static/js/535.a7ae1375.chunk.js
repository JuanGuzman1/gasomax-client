"use strict";(self.webpackChunkgasomax_client=self.webpackChunkgasomax_client||[]).push([[535],{8383:(e,s,a)=>{a.d(s,{BZ:()=>l,If:()=>c,Ps:()=>i,j4:()=>o,tt:()=>d});var t=a(5294),r=a(591),n=a(6647);const i=(e,s,a)=>async i=>{try{const l=await t.Z.get("".concat(n.Z.instance.baseURL,"/api/department?").concat(s,"=").concat(a,"&page=").concat(e),{headers:{...n.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});i({type:r.hf,payload:l.data})}catch(l){i({type:r.fm,payload:{msg:l.response.statusText,status:l.response.status}})}},l=(e,s)=>async a=>{try{const i=await t.Z.post("".concat(n.Z.instance.baseURL,"/api/department"),e,{headers:{...n.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});a({type:r.Wo,payload:i.data.data}),s(i.data)}catch(i){a({type:r.fm,payload:{msg:i.response.statusText,status:i.response.status}}),s({success:!1,message:i.message})}},o=(e,s,a)=>async i=>{try{const l=await t.Z.put("".concat(n.Z.instance.baseURL,"/api/department/").concat(s),e,{headers:{...n.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});i({type:r.aZ,payload:l.data.data}),a(l.data)}catch(l){i({type:r.fm,payload:{msg:l.response.statusText,status:l.response.status}}),a({success:!1,message:l.message})}},c=(e,s)=>async a=>{try{const i=await t.Z.delete("".concat(n.Z.instance.baseURL,"/api/department/").concat(e),{headers:{...n.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});a({type:r.k_,payload:e}),s(i.data)}catch(i){a({type:r.fm,payload:{msg:i.response.statusText,status:i.response.status}}),s({success:!1,message:i.message})}},d=()=>async e=>{try{const s=await t.Z.get("".concat(n.Z.instance.baseURL,"/api/select/department"),{headers:{...n.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});e({type:r.qN,payload:s.data})}catch(s){e({type:r.fm,payload:{msg:s.response.statusText,status:s.response.status}})}}},640:(e,s,a)=>{a.d(s,{Nq:()=>o,Rf:()=>i,X9:()=>u,cn:()=>l,h8:()=>c,zx:()=>d});var t=a(5294),r=a(591),n=a(6647);const i=(e,s,a)=>async i=>{try{const l=await t.Z.get("".concat(n.Z.instance.baseURL,"/api/user?").concat(s,"=").concat(a,"&page=").concat(e),{headers:{...n.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});i({type:r.fo,payload:l.data})}catch(l){i({type:r.zA,payload:{msg:l.response.statusText,status:l.response.status}})}},l=(e,s)=>async a=>{try{const i=await t.Z.post("".concat(n.Z.instance.baseURL,"/api/user"),e,{headers:{...n.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});a({type:r.jN,payload:i.data.data}),s(i.data)}catch(i){a({type:r.zA,payload:{msg:i.response.statusText,status:i.response.status}}),s({success:!1,message:i.message})}},o=(e,s,a)=>async i=>{try{const l=await t.Z.put("".concat(n.Z.instance.baseURL,"/api/user/").concat(s),e,{headers:{...n.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});i({type:r.AX,payload:l.data.data}),a(l.data)}catch(l){i({type:r.zA,payload:{msg:l.response.statusText,status:l.response.status}}),a({success:!1,message:l.message})}},c=(e,s)=>async a=>{try{const i=await t.Z.delete("".concat(n.Z.instance.baseURL,"/api/user/").concat(e),{headers:{...n.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});a({type:r.AZ,payload:e}),s(i.data)}catch(i){a({type:r.zA,payload:{msg:i.response.statusText,status:i.response.status}}),s({success:!1,message:i.message})}},d=(e,s)=>async a=>{try{const i=await t.Z.post("".concat(n.Z.instance.baseURL,"/api/assign/module"),e,{headers:{...n.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});a({type:r.AX,payload:i.data.data}),s(i.data)}catch(i){a({type:r.zA,payload:{msg:i.response.statusText,status:i.response.status}}),s({success:!1,message:i.message})}},u=(e,s)=>async a=>{try{const i=await t.Z.post("".concat(n.Z.instance.baseURL,"/api/assign/permission"),e,{headers:{...n.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});a({type:r.AX,payload:i.data.data}),s(i.data)}catch(i){a({type:r.zA,payload:{msg:i.response.statusText,status:i.response.status}}),s({success:!1,message:i.message})}}},222:(e,s,a)=>{a.d(s,{Z:()=>v});var t=a(2791),r=a(2937),n=a(9101),i=a(4166),l=a(7941),o=a(640),c=a(4846),d=a(1404),u=["512 512","<polygon fill='var(--ci-primary-color, currentColor)' points='427.314 107.313 404.686 84.687 256 233.373 107.314 84.687 84.686 107.313 233.373 256 84.686 404.687 107.314 427.313 256 278.627 404.686 427.313 427.314 404.687 278.627 256 427.314 107.313' class='ci-primary'/>"],m=a(8383),h=a(591),p=a(5294),x=a(6647);var g=a(7689),j=a(184);const v=e=>{let{visible:s,onClose:a,userData:v,visibleChangePassword:b,fromProfile:y}=e;const[f,C]=(0,t.useState)(b?2:1),[N,k]=(0,t.useState)(),[S,Z]=(0,t.useState)(""),[w,z]=(0,t.useState)(""),[A,L]=(0,t.useState)(""),[F,E]=(0,t.useState)(""),[U,T]=(0,t.useState)(""),[P,R]=(0,t.useState)(""),[I,D]=(0,t.useState)(""),[B,q]=(0,t.useState)(""),[O,_]=(0,t.useState)({numCharacters:!1,uppercaseLetter:!1,lowercaseLetter:!1,number:!1,symbol:!1}),$=(0,n.I0)(),K=(0,n.v9)((e=>e.role.roles)),M=(0,n.v9)((e=>e.department.departments)),X=(0,g.s0)();(0,t.useEffect)((()=>{$((0,m.tt)()),$((async e=>{try{const s=await p.Z.get("".concat(x.Z.instance.baseURL,"/api/select/role"),{headers:{...x.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});e({type:h.gJ,payload:s.data})}catch(s){e({type:h.lZ,payload:{msg:s.response.statusText,status:s.response.status}})}}))}),[$]);const Q=(0,t.useCallback)((()=>{Z(""),z(""),T(""),R(""),E(""),D(""),q(""),L(""),k(""),C(1)}),[]);return(0,t.useEffect)((()=>{v&&(k(v.id),Z(v.name),z(v.email),E(v.role_id),L(v.department_id),q(v.payrollNumber),D(v.nss))}),[v]),(0,t.useEffect)((()=>{if(!U)return void _({numCharacters:!1,uppercaseLetter:!1,lowercaseLetter:!1,number:!1,symbol:!1});const e={numCharacters:U.length>8,lowercaseLetter:!!/[a-z]/.test(U),uppercaseLetter:!!/[A-Z]/.test(U),number:!!/\d/.test(U),symbol:!!/[`!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?~]/.test(U)};_(e)}),[U]),(0,j.jsxs)(r.Tk,{visible:s,onClose:a,"aria-labelledby":"LiveDemoExampleLabel",children:[(0,j.jsx)(r.p0,{onClose:a,children:(0,j.jsx)(r.fl,{id:"LiveDemoExampleLabel",children:v?"Editar ".concat(v.name):"Agregar nuevo"})}),(0,j.jsxs)(r.sD,{children:[(0,j.jsxs)(r.n2,{variant:"tabs",role:"tablist",className:"mt-1",children:[!b&&(0,j.jsx)(r.U6,{role:"presentation",children:(0,j.jsx)(r.AQ,{active:1===f,component:"button",role:"tab","aria-controls":"data-tab-pane","aria-selected":1===f,onClick:()=>C(1),children:"Datos"})}),(b||!v)&&(0,j.jsx)(r.U6,{role:"presentation",children:(0,j.jsx)(r.AQ,{active:2===f,component:"button",role:"tab","aria-controls":"data-tab-pane","aria-selected":2===f,onClick:()=>C(2),children:"Contrase\xf1a"})})]}),(0,j.jsxs)(r.gr,{children:[(0,j.jsx)(r.IA,{role:"tabpanel","aria-labelledby":"data-tab-pane",visible:1===f,children:(0,j.jsxs)(r.lx,{className:"mt-3",children:[(0,j.jsxs)("div",{className:"mb-3",children:[(0,j.jsx)(r.L8,{htmlFor:"name",children:"Nombre completo"}),(0,j.jsx)(r.jO,{type:"text",id:"name",placeholder:"Nombre",onChange:e=>Z(e.target.value),value:S})]}),(0,j.jsxs)("div",{className:"mb-3",children:[(0,j.jsx)(r.L8,{htmlFor:"email",children:"Correo electr\xf3nico"}),(0,j.jsx)(r.jO,{type:"text",id:"email",placeholder:"Correo electr\xf3nico",onChange:e=>z(e.target.value),value:w})]}),(0,j.jsxs)("div",{className:"mb-3 d-flex",children:[(0,j.jsxs)("div",{className:"flex-fill me-2",children:[(0,j.jsx)(r.L8,{htmlFor:"nss",children:"N\xfamero de seguro social (NSS)"}),(0,j.jsx)(r.jO,{type:"text",id:"nss",placeholder:"NSS",onChange:e=>D(e.target.value),value:I})]}),(0,j.jsxs)("div",{className:"flex-fill me-2",children:[(0,j.jsx)(r.L8,{htmlFor:"payrollNumber",children:"N\xfamero de n\xf3mina"}),(0,j.jsx)(r.jO,{type:"text",id:"payrollNumber",placeholder:"No. N\xf3mina",onChange:e=>q(e.target.value),value:B})]})]}),(0,j.jsxs)("div",{className:"mb-3 d-flex",children:[(0,j.jsxs)("div",{className:"flex-fill me-2",children:[(0,j.jsx)(r.L8,{children:"Departamento"}),(0,j.jsxs)(r.LX,{"aria-label":"charge",onChange:e=>L(e.target.value),value:A,children:[(0,j.jsx)("option",{value:"",children:"Seleccione..."}),null===M||void 0===M?void 0:M.data.map((e=>(0,j.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,j.jsxs)("div",{className:"flex-fill me-2",children:[(0,j.jsx)(r.L8,{children:"Rol"}),(0,j.jsxs)(r.LX,{"aria-label":"role",onChange:e=>E(e.target.value),value:F,children:[(0,j.jsx)("option",{value:"",children:"Seleccione..."}),null===K||void 0===K?void 0:K.data.map((e=>(0,j.jsx)("option",{value:e.id,children:e.name},e.id)))]})]})]})]})}),(0,j.jsx)(r.IA,{role:"tabpanel","aria-labelledby":"data-tab-pane",visible:2===f,children:(0,j.jsxs)(r.lx,{className:"mt-3",children:[(0,j.jsxs)("div",{className:"mb-3",children:[(0,j.jsx)(r.L8,{htmlFor:"name",children:"Contrase\xf1a"}),(0,j.jsx)(r.jO,{type:"password",id:"password",placeholder:"Contrase\xf1a",onChange:e=>T(e.target.value),value:U})]}),(0,j.jsxs)("div",{className:"mb-3",children:[(0,j.jsx)(r.L8,{htmlFor:"confirmPassword",children:"Confirmar contrase\xf1a"}),(0,j.jsx)(r.jO,{type:"password",id:"confirmPassword",placeholder:"Confirmar contrase\xf1a",onChange:e=>R(e.target.value),value:P}),P&&U!==P&&(0,j.jsx)("p",{className:"text-danger",children:"*La contrase\xf1a no coincide"})]}),(0,j.jsxs)("div",{className:"mb-3",children:[(0,j.jsx)("h6",{className:"fw-bolder",children:"La contrase\xf1a debe contener: "}),(0,j.jsxs)("div",{className:"d-flex align-items-center",children:[O.numCharacters?(0,j.jsx)(c.Z,{icon:d.F,className:"text-success"}):(0,j.jsx)(c.Z,{icon:u,className:"text-danger"}),"8 o mas digitos"]}),(0,j.jsxs)("div",{className:"d-flex align-items-center",children:[O.uppercaseLetter?(0,j.jsx)(c.Z,{icon:d.F,className:"text-success"}):(0,j.jsx)(c.Z,{icon:u,className:"text-danger"}),"Una letra mayuscula"]}),(0,j.jsxs)("div",{className:"d-flex align-items-center",children:[O.lowercaseLetter?(0,j.jsx)(c.Z,{icon:d.F,className:"text-success"}):(0,j.jsx)(c.Z,{icon:u,className:"text-danger"}),"Una letra minuscula"]}),(0,j.jsxs)("div",{className:"d-flex align-items-center",children:[O.number?(0,j.jsx)(c.Z,{icon:d.F,className:"text-success"}):(0,j.jsx)(c.Z,{icon:u,className:"text-danger"}),"Un numero"]}),(0,j.jsxs)("div",{className:"d-flex align-items-center",children:[O.symbol?(0,j.jsx)(c.Z,{icon:d.F,className:"text-success"}):(0,j.jsx)(c.Z,{icon:u,className:"text-danger"}),"Un simbolo"]})]})]})})]})]}),(0,j.jsxs)(r.Ym,{children:[(0,j.jsx)(r.u5,{color:"secondary",onClick:a,children:"Cerrar"}),(0,j.jsx)(r.u5,{color:"primary",className:"text-light fw-semibold",onClick:e=>{if(e.preventDefault(),!S)return void alert("Ingrese un nombre");if(!w)return void alert("Ingrese un correo electr\xf3nico");if(b||!v){if(Object.values(O).every((e=>!e)))return void alert("Verifique las pol\xedticas de contrase\xf1a segura");if(!P)return void alert("Confirme la contrase\xf1a")}let s={name:S,email:w,nss:I,role_id:F,department_id:A,payrollNumber:B},t={password:U},r=b?t:s;$(v?(0,o.Nq)(r,N,(e=>{e.success?($((0,i.f)((0,l.Kv)({msg:"Usuario actualizado correctamente.",title:"Usuarios",type:"success"}))),b&&y&&X("/login")):$((0,i.f)((0,l.Kv)({msg:"Ha ocurrido un error.",title:"Usuarios",type:"error"}))),Q(),a()})):(0,o.cn)({...s,...t},(e=>{e.success?$((0,i.f)((0,l.Kv)({msg:"Usuario agregado correctamente.",title:"Usuarios",type:"success"}))):$((0,i.f)((0,l.Kv)({msg:"Ha ocurrido un error.",title:"Usuarios",type:"error"}))),Q(),a()})))},children:"Guardar"})]})]})}},7201:(e,s,a)=>{a.d(s,{Jw:()=>d,Tg:()=>p,a4:()=>u,aL:()=>c,iT:()=>i,mY:()=>l,mk:()=>h,uD:()=>m,uf:()=>n,y3:()=>o});var t=a(9779),r=a(9101);const n=e=>(e/1).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),i=e=>t.ou.fromISO(e).toLocaleString(t.ou.DATE_SHORT),l=e=>t.ou.fromISO(e).toLocaleString(t.ou.DATETIME_SHORT),o=e=>new Promise(((s,a)=>{const t=new FileReader;t.readAsDataURL(e),t.onload=e=>s(e.target.result.toString()),t.onerror=a})),c=function(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{inprogress:s?"Cotizaci\xf3nes enviadas":"Cotizaci\xf3nes disponibles",approved:"Cotizaci\xf3n aprobada",authorized:"Cotizaci\xf3n autorizada",ok:"Cotizaci\xf3n VoBo",sent:s?"Solicitud nueva":"Solicitud enviada",sentPay:"Enviada a pago",paid:"Pagado",rejected:"Cotizaci\xf3nes rechazadas"}[e]},d={inprogress:"#00FFFF",approved:"#00FF00",authorized:"#0000FF",ok:"#008000",sent:"#FFA500",sentPay:"#30AFD4",paid:"#800080",rejected:"#FF0000"},u={pending:"Pendiente de aprobaci\xf3n",approved:"Solicitud aprobada",paid:"Pagado",rejected:"Solicitud rechazada"},m={pending:"#FFA500",approved:"#00FF00",paid:"#800080",rejected:"#FF0000"},h={index:"Listar",show:"Ver",create:"Crear",edit:"Editar",delete:"Eliminar",reject:"Rechazar",pay:"Pagar",approve:"Aprobar",authorize:"Autorizar","authorize.minor.1000":"Autorizar < $1,000","authorize.mayor.1000":"Autorizar > $1,000","authorize.minor.5000":"Autorizar < $5,000","authorize.mayor.5000":"Autorizar > $5,000",modules:"Asignar modulos",permissions:"Asignar permisos","upload.quote":"Subir cotizaci\xf3nes"},p=(e,s)=>{const a=(0,r.v9)((e=>e.auth.permissions)),t=(0,r.v9)((e=>e.auth.modules)).find((s=>s.submodule===e));return!!t&&!!a.find((e=>e.submodule===t.submodule&&e.permission===s))}},1535:(e,s,a)=>{a.r(s),a.d(s,{default:()=>N});var t=a(2791),r=a(2937),n=a(9101),i=a(4846),l=a(8030),o=a(7941),c=a(640),d=a(3896),u=a(1830),m=a.n(u),h=a(4166),p=a(222),x=a(184);const g=e=>{let{visible:s,onClose:a,userData:i}=e;const[l,d]=(0,t.useState)(1),[u,m]=(0,t.useState)(),[p,g]=(0,t.useState)(!1),[j,v]=(0,t.useState)(!1),[b,y]=(0,t.useState)(!1),[f,C]=(0,t.useState)(!1),[N,k]=(0,t.useState)(!1),[S,Z]=(0,t.useState)(!1),[w,z]=(0,t.useState)(!1),[A,L]=(0,t.useState)([]),F=(0,n.I0)(),E=((0,n.v9)((e=>e.user.loading)),function(e,s){arguments.length>2&&void 0!==arguments[2]&&arguments[2]||L(e?[...A,s]:A.filter((e=>e!==s))),"banks"===s&&g(e),"providers"===s&&v(e),"quotes"===s&&y(e),"purchaseRequest"===s&&C(e),"pendingPayments"===s&&k(e),"departments"===s&&Z(e),"users"===s&&z(e)});return(0,t.useEffect)((()=>{if(!i)return;m(i.id);let e=[];i.modules&&(i.modules.forEach((s=>{E(!0,s.module.submodule,!0),e.push(s.module.submodule)})),L(e))}),[i]),console.log(A),(0,x.jsxs)(r.Tk,{visible:s,onClose:a,"aria-labelledby":"UserModulesModal",size:"lg",children:[(0,x.jsx)(r.p0,{onClose:a,children:(0,x.jsx)(r.fl,{id:"UserModulesModal",children:"Asignar modulos a ".concat(i.name)})}),(0,x.jsxs)(r.sD,{children:[(0,x.jsx)(r.n2,{variant:"tabs",role:"tablist",className:"mt-1",children:(0,x.jsx)(r.U6,{role:"presentation",children:(0,x.jsx)(r.AQ,{active:1===l,component:"button",role:"tab","aria-controls":"data-tab-pane","aria-selected":1===l,onClick:()=>d(1),children:"Modulos"})})}),(0,x.jsx)(r.gr,{children:(0,x.jsx)(r.IA,{role:"tabpanel","aria-labelledby":"data-tab-pane",visible:1===l,children:(0,x.jsxs)(r.lx,{className:"mt-3",children:[(0,x.jsxs)("div",{className:"mb-3",children:[(0,x.jsx)("h5",{children:"Administraci\xf3n"}),(0,x.jsxs)("div",{className:"row row-cols-3",children:[(0,x.jsx)("div",{className:"col",children:(0,x.jsx)(r.EC,{id:"banks",label:"Bancos",checked:p,onChange:e=>E(e.target.checked,"banks")})}),(0,x.jsx)("div",{className:"col",children:(0,x.jsx)(r.EC,{id:"providers",label:"Proveedores",checked:j,onChange:e=>E(e.target.checked,"providers")})})]})]}),(0,x.jsxs)("div",{className:"mb-3",children:[(0,x.jsx)("h5",{children:"Pagos"}),(0,x.jsxs)("div",{className:"row row-cols-3",children:[(0,x.jsx)("div",{className:"col",children:(0,x.jsx)(r.EC,{id:"quotes",label:"Solicitud de compra",checked:b,onChange:e=>E(e.target.checked,"quotes")})}),(0,x.jsx)("div",{className:"col",children:(0,x.jsx)(r.EC,{id:"purchaseRequest",label:"Solicitud de pago",checked:f,onChange:e=>E(e.target.checked,"purchaseRequest")})}),(0,x.jsx)("div",{className:"col",children:(0,x.jsx)(r.EC,{id:"pendingPayments",label:"Pagos pendientes",checked:N,onChange:e=>E(e.target.checked,"pendingPayments")})})]})]}),(0,x.jsxs)("div",{className:"mb-3",children:[(0,x.jsx)("h5",{children:"Usuarios"}),(0,x.jsxs)("div",{className:"row row-cols-3",children:[(0,x.jsx)("div",{className:"col",children:(0,x.jsx)(r.EC,{id:"departments",label:"Departamentos",checked:S,onChange:e=>E(e.target.checked,"departments")})}),(0,x.jsx)("div",{className:"col",children:(0,x.jsx)(r.EC,{id:"users",label:"Usuarios",checked:w,onChange:e=>E(e.target.checked,"users")})})]})]})]})})})]}),(0,x.jsxs)(r.Ym,{children:[(0,x.jsx)(r.u5,{color:"secondary",onClick:a,children:"Cerrar"}),(0,x.jsx)(r.u5,{color:"primary",className:"text-light fw-semibold",onClick:e=>{e.preventDefault();let s={user_id:u,modules:A};F((0,c.zx)(s,(e=>{e.success&&F((0,h.f)((0,o.Kv)({msg:e.message,type:"success"})))}))),a()},children:"Guardar"})]})]})};var j=a(591),v=a(5294),b=a(6647);var y=a(7201);const f=e=>{let{visible:s,onClose:a,userData:i}=e;const[l,d]=(0,t.useState)(1),[u,m]=(0,t.useState)(),[p,g]=(0,t.useState)([]),f=(0,n.I0)(),C=(0,n.v9)((e=>e.permission.loading)),N=(0,n.v9)((e=>e.permission.permissions));(0,t.useEffect)((()=>{if(!i)return;m(i.id);let e=[];i.permissions&&(i.permissions.forEach((s=>{k(!0,s.permission.id,!0),e.push(s.permission.id)})),g(e))}),[i]),(0,t.useEffect)((()=>{f((async e=>{try{const s=await v.Z.get("".concat(b.Z.instance.baseURL,"/api/permission"),{headers:{...b.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});e({type:j.ji,payload:s.data})}catch(s){e({type:j.qZ,payload:{msg:s.response.statusText,status:s.response.status}})}}))}),[f]);const k=function(e,s){arguments.length>2&&void 0!==arguments[2]&&arguments[2]||g(e?[...p,s]:p.filter((e=>e!==s)))};return(0,x.jsxs)(r.Tk,{visible:s,onClose:a,"aria-labelledby":"UserPermissionsModal",size:"xl",children:[(0,x.jsx)(r.p0,{onClose:a,children:(0,x.jsx)(r.fl,{id:"UserPermissionsModal",children:"Editar permisos a ".concat(i.name)})}),(0,x.jsxs)(r.sD,{children:[(0,x.jsx)(r.n2,{variant:"tabs",role:"tablist",className:"mt-1",children:(0,x.jsx)(r.U6,{role:"presentation",children:(0,x.jsx)(r.AQ,{active:1===l,component:"button",role:"tab","aria-controls":"data-tab-pane","aria-selected":1===l,onClick:()=>d(1),children:"Permisos"})})}),(0,x.jsx)(r.gr,{children:C?(0,x.jsx)(r.LQ,{color:"primary",variant:"grow"}):(0,x.jsx)(r.IA,{role:"tabpanel","aria-labelledby":"data-tab-pane",visible:1===l,children:(0,x.jsx)(r.lx,{className:"mt-3",children:(0,x.jsxs)("div",{className:"row row-cols-5",children:[i.modules.find((e=>"banks"===e.module.submodule))&&(0,x.jsxs)("div",{className:"col mb-3",children:[(0,x.jsx)("h5",{children:"Bancos"}),null===N||void 0===N?void 0:N.map((e=>"banks"===e.module.submodule?(0,x.jsx)("div",{children:(0,x.jsx)(r.EC,{id:e.name,label:y.mk[e.name],checked:p.find((s=>s===e.id)),onChange:s=>k(s.target.checked,e.id)})},e.id):(0,x.jsx)(x.Fragment,{})))]}),i.modules.find((e=>"providers"===e.module.submodule))&&(0,x.jsxs)("div",{className:"col mb-3",children:[(0,x.jsx)("h5",{children:"Proveedores"}),N.map((e=>"providers"===e.module.submodule?(0,x.jsx)("div",{children:(0,x.jsx)(r.EC,{id:e.name,label:y.mk[e.name],checked:p.find((s=>s===e.id)),onChange:s=>k(s.target.checked,e.id)})},e.id):(0,x.jsx)(x.Fragment,{})))]}),i.modules.find((e=>"quotes"===e.module.submodule))&&(0,x.jsxs)("div",{className:"col mb-3",children:[(0,x.jsx)("h5",{children:"Solicitudes de compra"}),N.map((e=>"quotes"===e.module.submodule?(0,x.jsx)("div",{children:(0,x.jsx)(r.EC,{id:e.name,label:y.mk[e.name],checked:p.find((s=>s===e.id)),onChange:s=>k(s.target.checked,e.id)})},e.id):(0,x.jsx)(x.Fragment,{})))]}),i.modules.find((e=>"purchaseRequest"===e.module.submodule))&&(0,x.jsxs)("div",{className:"col mb-3",children:[(0,x.jsx)("h5",{children:"Solicitudes de pago"}),N.map((e=>"purchaseRequest"===e.module.submodule?(0,x.jsx)("div",{children:(0,x.jsx)(r.EC,{id:e.name,label:y.mk[e.name],checked:p.find((s=>s===e.id)),onChange:s=>k(s.target.checked,e.id)})},e.id):(0,x.jsx)(x.Fragment,{})))]}),i.modules.find((e=>"pendingPayments"===e.module.submodule))&&(0,x.jsxs)("div",{className:"col mb-3",children:[(0,x.jsx)("h5",{children:"Pagos pendientes"}),N.map((e=>"pendingPayments"===e.module.submodule?(0,x.jsx)("div",{children:(0,x.jsx)(r.EC,{id:e.name,label:y.mk[e.name],checked:p.find((s=>s===e.id)),onChange:s=>k(s.target.checked,e.id)})},e.id):(0,x.jsx)(x.Fragment,{})))]}),i.modules.find((e=>"departments"===e.module.submodule))&&(0,x.jsxs)("div",{className:"col mb-3",children:[(0,x.jsx)("h5",{children:"Departamentos"}),N.map((e=>"departments"===e.module.submodule?(0,x.jsx)("div",{children:(0,x.jsx)(r.EC,{id:e.name,label:y.mk[e.name],checked:p.find((s=>s===e.id)),onChange:s=>k(s.target.checked,e.id)})},e.id):(0,x.jsx)(x.Fragment,{})))]}),i.modules.find((e=>"users"===e.module.submodule))&&(0,x.jsxs)("div",{className:"col mb-3",children:[(0,x.jsx)("h5",{children:"Usuarios"}),N.map((e=>"users"===e.module.submodule?(0,x.jsx)("div",{children:(0,x.jsx)(r.EC,{id:e.name,label:y.mk[e.name],checked:p.find((s=>s===e.id)),onChange:s=>k(s.target.checked,e.id)})},e.id):(0,x.jsx)(x.Fragment,{})))]})]})})})})]}),(0,x.jsxs)(r.Ym,{children:[(0,x.jsx)(r.u5,{color:"secondary",onClick:a,children:"Cerrar"}),(0,x.jsx)(r.u5,{color:"primary",className:"text-light fw-semibold",onClick:e=>{e.preventDefault();let s={user_id:u,permissions:p};f((0,c.X9)(s,(e=>{e.success?f((0,h.f)((0,o.Kv)({msg:e.message,type:"success"}))):f((0,h.f)((0,o.Kv)({msg:e.message,type:"error"})))}))),a()},children:"Guardar"})]})]})},C=e=>{let{data:s}=e;const[a,l]=(0,t.useState)(!1),[u,j]=(0,t.useState)(!1),[v,b]=(0,t.useState)(!1),[C,N]=(0,t.useState)(!1),[k,S]=(0,t.useState)(null),Z=(0,n.I0)(),w=(0,y.Tg)("users","delete"),z=(0,y.Tg)("users","edit"),A=(0,y.Tg)("users","modules"),L=(0,y.Tg)("users","permissions"),F=e=>{m().fire({title:"\xbfEst\xe1 seguro?",text:"No podr\xe1s revertir esto.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar."}).then((s=>{s.isConfirmed&&Z((0,c.h8)(e,(e=>{e.success?(Z((0,h.f)((0,o.Kv)({msg:"Usuario eliminado correctamente.",title:"Usuarios",type:"success"}))),m().fire({title:"Eliminado!",text:"El Usuario ha sido eliminado.",icon:"success"})):Z((0,h.f)((0,o.Kv)({msg:"Ocurrio un error.",title:"Usuarios",type:"error"})))})))}))};return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(r.Sx,{striped:!0,responsive:!0,children:[(0,x.jsx)(r.V,{children:(0,x.jsxs)(r.T6,{children:[(0,x.jsx)(r.is,{scope:"col",children:"#"}),(0,x.jsx)(r.is,{scope:"col",children:"Nombre"}),(0,x.jsx)(r.is,{scope:"col",children:"Correo electr\xf3nico"}),(0,x.jsx)(r.is,{scope:"col",children:"Departamento"}),(0,x.jsx)(r.is,{scope:"col",children:"Rol"}),(0,x.jsx)(r.is,{scope:"col",className:"text-center",children:"Opciones"})]})}),(0,x.jsx)(r.NR,{children:null===s||void 0===s?void 0:s.map((e=>{var s,t,n;return(0,x.jsxs)(r.T6,{children:[(0,x.jsx)(r.is,{scope:"row",children:e.id}),(0,x.jsx)(r.NN,{children:e.name}),(0,x.jsx)(r.NN,{children:e.email}),(0,x.jsx)(r.NN,{children:(null===e||void 0===e||null===(s=e.department)||void 0===s?void 0:s.name)||(0,x.jsx)("span",{className:"text-primary fw-bolder",children:"Sin departamento asignado"})}),(0,x.jsx)(r.NN,{children:(null===e||void 0===e||null===(t=e.role)||void 0===t?void 0:t.name)||(0,x.jsx)("span",{className:"text-primary fw-bolder",children:"Sin rol asignado"})}),(0,x.jsx)(r.NN,{className:"text-center overflow-visible",children:(0,x.jsxs)(r.w5,{variant:"dropdown",children:[(0,x.jsx)(r.SQ,{href:"#",color:"light",children:(0,x.jsx)(i.Z,{icon:d.t,title:"Opciones",size:"lg"})}),(0,x.jsxs)(r.$H,{className:"position-fixed",children:[A&&(0,x.jsx)(r.$f,{style:{cursor:"pointer"},onClick:()=>{j(!u),S(e)},children:"Asignar modulos"}),L&&(null===e||void 0===e||null===(n=e.modules)||void 0===n?void 0:n.length)>0&&(0,x.jsx)(r.$f,{style:{cursor:"pointer"},onClick:()=>{b(!v),S(e)},children:"Permisos"}),z&&(0,x.jsx)(r.$f,{style:{cursor:"pointer"},onClick:()=>{l(!a),S(e)},children:"Editar"}),z&&(0,x.jsx)(r.$f,{style:{cursor:"pointer"},onClick:()=>{l(!a),N(!0),S(e)},children:"Cambiar contrase\xf1a"}),w&&(0,x.jsx)(r.$f,{style:{cursor:"pointer"},onClick:()=>F(e.id),children:"Eliminar"})]})]})})]},e.id)}))})]}),a&&(0,x.jsx)(p.Z,{visible:a,onClose:()=>{l(!1),N(!1)},userData:k,visibleChangePassword:C}),u&&(0,x.jsx)(g,{visible:u,onClose:()=>j(!1),userData:k}),v&&(0,x.jsx)(f,{visible:v,onClose:()=>b(!1),userData:k})]})},N=()=>{const[e,s]=(0,t.useState)(!1),a=(0,n.I0)(),[d,u]=(0,t.useState)("name"),[m,h]=(0,t.useState)(""),g=(0,n.v9)((e=>e.user.users.data)),[j,v]=(0,t.useState)(1),b=(0,n.v9)((e=>e.user.users.current_page)),f=(0,n.v9)((e=>e.user.users.last_page)),N=((0,n.v9)((e=>e.user.users.total)),(0,n.v9)((e=>e.user.loading)));return(0,t.useEffect)((()=>{a((0,c.Rf)(j,d,m))}),[a,j]),(0,t.useEffect)((()=>{b&&v(b)}),[b]),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(r.xH,{children:[(0,x.jsxs)(r.bn,{className:"d-flex justify-content-between align-items-center",children:[(0,x.jsx)("h4",{children:"Listado de usuarios"}),(0,x.jsx)("div",{className:"d-flex gap-2",children:(0,y.Tg)("users","create")&&(0,x.jsxs)(r.u5,{color:"primary",className:"text-light fw-semibold align-content-center d-flex",onClick:()=>s(!e),children:[(0,x.jsx)(i.Z,{icon:l.q,size:"xl",className:"me-1"}),"Nuevo"]})})]}),(0,x.jsxs)(r.sl,{children:[(0,x.jsxs)(r.lx,{children:[(0,x.jsx)(r.L8,{children:"Filtros de busqueda"}),(0,x.jsxs)("div",{className:"mb-3 d-flex",children:[(0,x.jsx)("div",{className:"flex-fill me-2",children:(0,x.jsx)(r.LX,{value:d,onChange:e=>u(e.target.value),"aria-label":"caseFilter",options:[{label:"Nombre",value:"name"},{label:"Rol",value:"role"}]})}),(0,x.jsx)("div",{className:"flex-fill me-2",children:(0,x.jsx)(r.jO,{value:m,onChange:e=>h(e.target.value),type:"text",placeholder:"Ingresar texto"})})]}),(0,x.jsx)(r.u5,{type:"button",className:"text-light fw-semibold",onClick:()=>a((0,c.Rf)(j,d,m)),children:"Buscar"})]}),N?(0,x.jsx)("div",{className:"d-flex justify-content-center",children:(0,x.jsx)(r.LQ,{color:"primary",variant:"grow"})}):(0,x.jsx)(C,{data:g})]}),(0,x.jsx)(r.Bt,{children:(0,x.jsx)(o.bD,{currentPage:j,lastPage:f,setCurrentPage:v})})]}),e&&(0,x.jsx)(p.Z,{visible:e,onClose:()=>s(!1)})]})}},1404:(e,s,a)=>{a.d(s,{F:()=>t});var t=["512 512","<polygon fill='var(--ci-primary-color, currentColor)' points='200.359 382.269 61.057 251.673 82.943 228.327 199.641 337.731 428.686 108.687 451.314 131.313 200.359 382.269' class='ci-primary'/>"]}}]);
//# sourceMappingURL=535.a7ae1375.chunk.js.map