"use strict";(self.webpackChunkgasomax_client=self.webpackChunkgasomax_client||[]).push([[956],{868:(e,a,s)=>{s.d(a,{Im:()=>h,OO:()=>n,SU:()=>d,Sk:()=>c,UT:()=>u,YD:()=>p,_x:()=>l,iy:()=>r,my:()=>o});var t=s(9427),i=s(8044);const r=e=>(e/1).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),o=e=>t.CS.fromISO(e).toLocaleString(t.CS.DATE_SHORT),n=e=>t.CS.fromISO(e).toLocaleString(t.CS.DATETIME_SHORT),c=function(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{inprogress:a?"Cotizaci\xf3nes enviadas":"Cotizaci\xf3nes disponibles",approved:"Cotizaci\xf3n aprobada",authorized:"Cotizaci\xf3n autorizada",ok:"Cotizaci\xf3n VoBo",sent:a?"Solicitud nueva":"Solicitud enviada",sentPay:"Enviada a pago",paid:"Pagado",rejected:"Cotizaci\xf3nes rechazadas"}[e]},l={inprogress:"#00FFFF",approved:"#00FF00",authorized:"#0000FF",ok:"#008000",sent:"#FFA500",sentPay:"#30AFD4",paid:"#800080",rejected:"#FF0000"},d={pending:"Pendiente de aprobaci\xf3n",approved:"Solicitud aprobada",paid:"Pagado",rejected:"Solicitud rechazada"},u={pending:"#FFA500",approved:"#00FF00",paid:"#800080",rejected:"#FF0000"},p={index:"Listar",show:"Ver",create:"Crear",edit:"Editar",delete:"Eliminar",reject:"Rechazar",pay:"Pagar",approve:"Aprobar",authorize:"Autorizar","authorize.minor.1000":"Autorizar < $1,000","authorize.mayor.1000":"Autorizar > $1,000","authorize.minor.5000":"Autorizar < $5,000","authorize.mayor.5000":"Autorizar > $5,000",modules:"Asignar modulos",permissions:"Asignar permisos","upload.quote":"Subir cotizaci\xf3nes"},h=(e,a)=>{const s=(0,i.w1)((e=>e.auth.permissions)),t=(0,i.w1)((e=>e.auth.modules)).find((a=>a.submodule===e));return!!t&&!!s.find((e=>e.submodule===t.submodule&&e.permission===a))}},8956:(e,a,s)=>{s.r(a),s.d(a,{default:()=>g});var t=s(9060),i=s(3084),r=s(5564),o=s(3088),n=s(8044),c=s(8372),l=s(2156),d=s(4836);const u=(e,a,s)=>async t=>{try{const i=await c.c.get("".concat(d.c.instance.baseURL,"/api/pending/purchaseRequest?").concat(a,"=").concat(s,"&page=").concat(e),{headers:{...d.c.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});console.log(i.data),t({type:l.KM,payload:{...i.data,filters:{filter:a,value:s}}})}catch(i){t({type:l._y,payload:{msg:i.response.statusText,status:i.response.status}})}};var p=s(7316),h=s(4904),x=s(868),j=s(2496);const m=e=>{let{visible:a,onClose:s,purchaseRequestDetailID:r,provider:o}=e;const u=(0,n.OY)(),[p,h]=(0,t.useState)(0),{balance:m,loadingBalance:v}=(0,n.w1)((e=>e.pendingPayments));return(0,t.useEffect)((()=>{var e;u((e=r,async a=>{try{const s=await c.c.get("".concat(d.c.instance.baseURL,"/api/balance/purchaseRequestDetail/").concat(e),{headers:{...d.c.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});a({type:l.wn,payload:s.data})}catch(s){a({type:l._y,payload:{msg:s.response.statusText,status:s.response.status}})}}))}),[u,r]),(0,t.useEffect)((()=>{var e;m&&h(null===(e=m.find((e=>!e.purchase_detail_pending_id)))||void 0===e?void 0:e.totalAmount)}),[m]),(0,j.jsxs)(i.U5,{visible:a,onClose:s,"aria-labelledby":"ModalForm",size:"xl",children:[(0,j.jsx)(i.gO,{onClose:s,children:(0,j.jsx)(i._K,{id:"ModalForm",children:"Estado de cuenta"})}),(0,j.jsx)(i.EB,{children:v?(0,j.jsx)("div",{className:"d-flex justify-content-center",children:(0,j.jsx)(i.GG,{color:"primary",variant:"grow"})}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(i.YR,{className:"mt-3",children:[(0,j.jsxs)("div",{className:"mb-3",children:[(0,j.jsx)(i.Q5,{htmlFor:"provider",children:"Proveedor"}),(0,j.jsx)(i.Ip,{type:"text",id:"provider",value:o,disabled:!0})]}),(0,j.jsxs)("div",{className:"mb-3",children:[(0,j.jsx)("p",{children:"Importe total"}),(0,j.jsxs)("h5",{id:"totalAmount",className:"fw-bold text-primary",children:["$",(0,x.iy)(p)]})]})]}),(0,j.jsxs)(i.k7,{striped:!0,responsive:!0,children:[(0,j.jsx)(i.Iy,{children:(0,j.jsxs)(i.uH,{children:[(0,j.jsx)(i.Qr,{scope:"col",children:"Fecha solic."}),(0,j.jsx)(i.Qr,{scope:"col",children:"Fecha pago"}),(0,j.jsx)(i.Qr,{scope:"col",children:"Cargo"}),(0,j.jsx)(i.Qr,{scope:"col",children:"Concepto"}),(0,j.jsx)(i.Qr,{scope:"col",children:"Detalle"}),(0,j.jsx)(i.Qr,{scope:"col",children:"Pago"}),(0,j.jsx)(i.Qr,{scope:"col",children:"Saldo"})]})}),(0,j.jsx)(i.g7,{children:null===m||void 0===m?void 0:m.map((e=>(0,j.jsxs)(i.uH,{children:[(0,j.jsx)(i.kz,{children:(0,x.OO)(e.created_at)}),(0,j.jsx)(i.kz,{children:(0,x.my)(e.paymentDate)}),(0,j.jsx)(i.kz,{children:e.quote.quote_concept.charge}),(0,j.jsx)(i.kz,{children:e.quote.quote_concept.concept}),(0,j.jsx)(i.kz,{children:e.title}),(0,j.jsxs)(i.kz,{children:["$",(0,x.iy)(e.paymentAmount)]}),(0,j.jsx)(i.kz,{children:e.balance<=0?"$"+(0,x.iy)((null===e||void 0===e?void 0:e.totalAmount)-(null===e||void 0===e?void 0:e.paymentAmount)):"$"+(0,x.iy)(e.balance)})]},e.id)))})]})]})}),(0,j.jsx)(i.yI,{children:(0,j.jsx)(i.uE,{color:"secondary",onClick:s,children:"Cerrar"})})]})},v=e=>{let{data:a}=e;const[s,o]=(0,t.useState)(!1),[c,l]=(0,t.useState)(null),[d,u]=(0,t.useState)("");(0,n.OY)();return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(i.k7,{striped:!0,responsive:!0,children:[(0,j.jsx)(i.Iy,{children:(0,j.jsxs)(i.uH,{children:[(0,j.jsx)(i.Qr,{scope:"col",children:"Proveedor"}),(0,j.jsx)(i.Qr,{scope:"col",children:"Solicitante"}),(0,j.jsx)(i.Qr,{scope:"col",children:"Cargo"}),(0,j.jsx)(i.Qr,{scope:"col",children:"Concepto"}),(0,j.jsx)(i.Qr,{scope:"col",children:"Titulo"}),(0,j.jsx)(i.Qr,{scope:"col",children:"Fecha solic."}),(0,j.jsx)(i.Qr,{scope:"col",children:"Saldo"}),(0,j.jsx)(i.Qr,{scope:"col",className:"text-center",children:"Opciones"})]})}),(0,j.jsx)(i.g7,{children:null===a||void 0===a?void 0:a.map((e=>(0,j.jsxs)(i.uH,{children:[(0,j.jsx)(i.kz,{children:e.quote.provider.name}),(0,j.jsx)(i.kz,{children:e.petitioner.name}),(0,j.jsx)(i.kz,{children:e.quote.quote_concept.charge}),(0,j.jsx)(i.kz,{children:e.quote.quote_concept.concept}),(0,j.jsx)(i.kz,{children:e.title}),(0,j.jsx)(i.kz,{children:(0,x.my)(e.created_at)}),(0,j.jsxs)(i.kz,{children:["$",(0,x.iy)(e.balance)]}),(0,j.jsx)(i.kz,{className:"text-center overflow-visible",children:(0,j.jsxs)(i.Cg,{variant:"dropdown",children:[(0,j.jsx)(i.uw,{href:"#",color:"light",children:(0,j.jsx)(r.c,{icon:h.i,title:"Opciones",size:"lg"})}),(0,j.jsx)(i.cI,{className:"position-fixed",children:(0,j.jsx)(i.yu,{style:{cursor:"pointer"},onClick:()=>{u(e.quote.provider.name),l(e.id),o(!s)},children:"Ver estado de cuenta"})})]})})]},e.id)))})]}),s&&(0,j.jsx)(m,{visible:s,onClose:()=>{o(!1),l(null),u("")},purchaseRequestDetailID:c,provider:d})]})},g=()=>{const[e,a]=(0,t.useState)("provider"),[s,c]=(0,t.useState)(""),[l,d]=(0,t.useState)(1),h=(0,n.OY)(),{currentPage:x,last_page:m,data:g}=(0,n.w1)((e=>e.pendingPayments.pendingPayments)),y=(0,n.w1)((e=>e.pendingPayments.loading));return(0,t.useEffect)((()=>{h(u(l,e,s))}),[l,h]),(0,t.useEffect)((()=>{x&&d(x)}),[x]),(0,j.jsxs)(i.u0,{children:[(0,j.jsxs)(i.Q_,{className:"d-flex justify-content-between align-items-center",children:[(0,j.jsx)("h4",{children:"Listado de Pagos Pendientes"}),(0,j.jsx)("div",{className:"d-flex gap-2",children:(0,j.jsx)(i.uE,{color:"info",className:"text-light align-content-center d-flex",children:(0,j.jsx)(r.c,{icon:o.W,size:"xl"})})})]}),(0,j.jsxs)(i.Yj,{children:[(0,j.jsxs)(i.YR,{children:[(0,j.jsx)(i.Q5,{children:"Filtros de busqueda"}),(0,j.jsxs)("div",{className:"mb-3 d-flex",children:[(0,j.jsx)("div",{className:"flex-fill me-2",children:(0,j.jsx)(i.Wc,{value:e,onChange:e=>a(e.target.value),"aria-label":"caseFilter",options:[{label:"Proveedor",value:"provider"},{label:"Solicitante",value:"petitioner"}]})}),(0,j.jsx)("div",{className:"flex-fill me-2",children:"status"!==e?(0,j.jsx)(i.Ip,{value:s,onChange:e=>c(e.target.value),type:"text",id:"provider",placeholder:"Ingresar texto"}):(0,j.jsx)(i.Wc,{value:s,onChange:e=>c(e.target.value),"aria-label":"caseFilter",options:[{label:"Pendientes",value:"pending"},{label:"Revisadas",value:"review"},{label:"Aprobadas",value:"approved"},{label:"Rechazadas",value:"rejects"}]})})]}),(0,j.jsx)(i.uE,{type:"button",className:"text-light fw-semibold",onClick:()=>h(u(l,e,s)),children:"Buscar"})]}),y?(0,j.jsx)("div",{className:"d-flex justify-content-center",children:(0,j.jsx)(i.GG,{color:"primary",variant:"grow"})}):(0,j.jsx)(v,{data:g})]}),(0,j.jsx)(i.IE,{children:(0,j.jsx)(p.KQ,{currentPage:l,lastPage:m,setCurrentPage:d})})]})}}}]);
//# sourceMappingURL=956.82ca7fe7.chunk.js.map