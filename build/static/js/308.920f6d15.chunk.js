"use strict";(self.webpackChunkgasomax_client=self.webpackChunkgasomax_client||[]).push([[308],{6800:(e,a,t)=>{t.r(a),t.d(a,{default:()=>x});var o=t(9060),s=t(7316),r=t(8044),n=t(7780),d=t(8372),c=t(4836),i=t(2156);var l=t(12),p=t(5064),u=t(2496);const x=()=>{const e=(0,r.OY)(),[a]=((0,r.w1)((e=>e.auth.user)),(0,r.w1)((e=>e.auth.permissions)),(0,l.k5)()),t=a.get("code"),{token_dropbox:x}=(0,r.w1)((e=>e.dropbox.token));return(0,o.useEffect)((()=>{e((0,n.eg)())}),[e]),(0,o.useEffect)((()=>{var a;e((a=a=>{a.data||e((0,p.I)((0,s.oN)({msg:"Sin token para dropbox",type:"error"})))},async e=>{try{var t,o,s,r,n,l;const p=await d.c.get("".concat(c.c.instance.baseURL,"/api/configuration"),{headers:{...c.c.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});let u={token_dropbox:null===(t=p.data)||void 0===t||null===(o=t.data)||void 0===o?void 0:o.token_dropbox,token_dropbox_expires_in:null===(s=p.data)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.token_dropbox_expires_in,token_dropbox_refresh:null===(n=p.data)||void 0===n||null===(l=n.data)||void 0===l?void 0:l.token_dropbox_refresh};e({type:i.uU,payload:u}),a(p.data)}catch(p){console.log(p)}}))}),[e]),(0,o.useEffect)((()=>{var a;t&&e((a=t,async e=>{try{await d.c.post("".concat(c.c.instance.baseURL,"/api/token/dropbox"),{code:a,redirect_uri:c.c.instance.return_uri},{headers:{...c.c.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}})}catch(t){e({type:i.Md,payload:{msg:t.response.statusText,status:t.response.status}})}}))}),[e,t,x]),(0,u.jsxs)("div",{children:[(0,u.jsx)(s.yq,{}),(0,u.jsxs)("div",{className:"wrapper d-flex flex-column min-vh-100 bg-light",children:[(0,u.jsx)(s.gZ,{}),(0,u.jsx)("div",{className:"body flex-grow-1 px-3",children:(0,u.jsx)(s.OB,{})}),(0,u.jsx)(s.M5,{})]})]})}}}]);
//# sourceMappingURL=308.920f6d15.chunk.js.map