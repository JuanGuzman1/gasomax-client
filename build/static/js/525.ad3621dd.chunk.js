"use strict";(self.webpackChunkgasomax_client=self.webpackChunkgasomax_client||[]).push([[525],{8383:(e,s,a)=>{a.d(s,{BZ:()=>o,If:()=>c,Ps:()=>i,j4:()=>l,tt:()=>d});var t=a(5294),r=a(591),n=a(6647);const i=(e,s,a)=>async i=>{try{const o=await t.Z.get("".concat(n.Z.instance.baseURL,"/api/department?").concat(s,"=").concat(a,"&page=").concat(e),{headers:{...n.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});i({type:r.hf,payload:o.data})}catch(o){i({type:r.fm,payload:{msg:o.response.statusText,status:o.response.status}})}},o=(e,s)=>async a=>{try{const i=await t.Z.post("".concat(n.Z.instance.baseURL,"/api/department"),e,{headers:{...n.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});a({type:r.Wo,payload:i.data.data}),s(i.data)}catch(i){a({type:r.fm,payload:{msg:i.response.statusText,status:i.response.status}}),s({success:!1,message:i.message})}},l=(e,s,a)=>async i=>{try{const o=await t.Z.put("".concat(n.Z.instance.baseURL,"/api/department/").concat(s),e,{headers:{...n.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});i({type:r.aZ,payload:o.data.data}),a(o.data)}catch(o){i({type:r.fm,payload:{msg:o.response.statusText,status:o.response.status}}),a({success:!1,message:o.message})}},c=(e,s)=>async a=>{try{const i=await t.Z.delete("".concat(n.Z.instance.baseURL,"/api/department/").concat(e),{headers:{...n.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});a({type:r.k_,payload:e}),s(i.data)}catch(i){a({type:r.fm,payload:{msg:i.response.statusText,status:i.response.status}}),s({success:!1,message:i.message})}},d=()=>async e=>{try{const s=await t.Z.get("".concat(n.Z.instance.baseURL,"/api/select/department"),{headers:{...n.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});e({type:r.qN,payload:s.data})}catch(s){e({type:r.fm,payload:{msg:s.response.statusText,status:s.response.status}})}}},7201:(e,s,a)=>{a.d(s,{Jw:()=>c,Tg:()=>h,a4:()=>d,aL:()=>l,iT:()=>i,mY:()=>o,mk:()=>m,uD:()=>u,uf:()=>n});var t=a(9779),r=a(9101);const n=e=>(e/1).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),i=e=>t.ou.fromISO(e).toLocaleString(t.ou.DATE_SHORT),o=e=>t.ou.fromISO(e).toLocaleString(t.ou.DATETIME_SHORT),l=function(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{inprogress:s?"Cotizaci\xf3nes enviadas":"Cotizaci\xf3nes disponibles",approved:"Cotizaci\xf3n aprobada",authorized:"Cotizaci\xf3n autorizada",ok:"Cotizaci\xf3n VoBo",sent:s?"Solicitud nueva":"Solicitud enviada",sentPay:"Enviada a pago",paid:"Pagado",rejected:"Cotizaci\xf3nes rechazadas"}[e]},c={inprogress:"#00FFFF",approved:"#00FF00",authorized:"#0000FF",ok:"#008000",sent:"#FFA500",sentPay:"#30AFD4",paid:"#800080",rejected:"#FF0000"},d={pending:"Pendiente de aprobaci\xf3n",approved:"Solicitud aprobada",paid:"Pagado",rejected:"Solicitud rechazada"},u={pending:"#FFA500",approved:"#00FF00",paid:"#800080",rejected:"#FF0000"},m={index:"Listar",show:"Ver",create:"Crear",edit:"Editar",delete:"Eliminar",reject:"Rechazar",pay:"Pagar",approve:"Aprobar",authorize:"Autorizar","authorize.minor.1000":"Autorizar < $1,000","authorize.mayor.1000":"Autorizar > $1,000","authorize.minor.5000":"Autorizar < $5,000","authorize.mayor.5000":"Autorizar > $5,000",modules:"Asignar modulos",permissions:"Asignar permisos","upload.quote":"Subir cotizaci\xf3nes"},h=(e,s)=>{const a=(0,r.v9)((e=>e.auth.permissions)),t=(0,r.v9)((e=>e.auth.modules)).find((s=>s.submodule===e));return!!t&&!!a.find((e=>e.submodule===t.submodule&&e.permission===s))}},525:(e,s,a)=>{a.r(s),a.d(s,{default:()=>Z});var t=a(2791),r=a(2937),n=a(9101),i=a(4846),o=a(8030),l=a(574),c=a(5294),d=a(591),u=a(6647);const m=(e,s,a)=>async t=>{try{const r=await c.Z.get("".concat(u.Z.instance.baseURL,"/api/user?").concat(s,"=").concat(a,"&page=").concat(e),{headers:{...u.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});t({type:d.fo,payload:r.data})}catch(r){t({type:d.zA,payload:{msg:r.response.statusText,status:r.response.status}})}};var h=a(3896),p=a(1830),x=a.n(p),g=a(4166),j=a(1404),v=["512 512","<polygon fill='var(--ci-primary-color, currentColor)' points='427.314 107.313 404.686 84.687 256 233.373 107.314 84.687 84.686 107.313 233.373 256 84.686 404.687 107.314 427.313 256 278.627 404.686 427.313 427.314 404.687 278.627 256 427.314 107.313' class='ci-primary'/>"],b=a(8383);var y=a(184);const f=e=>{let{visible:s,onClose:a,userData:o,visibleChangePassword:m}=e;const[h,p]=(0,t.useState)(m?2:1),[x,f]=(0,t.useState)(),[C,N]=(0,t.useState)(""),[k,S]=(0,t.useState)(""),[Z,w]=(0,t.useState)(""),[A,z]=(0,t.useState)(""),[L,F]=(0,t.useState)(""),[E,U]=(0,t.useState)(""),[T,I]=(0,t.useState)(""),[P,B]=(0,t.useState)(""),[D,R]=(0,t.useState)({numCharacters:!1,uppercaseLetter:!1,lowercaseLetter:!1,number:!1,symbol:!1}),q=(0,n.I0)(),O=(0,n.v9)((e=>e.role.roles)),_=(0,n.v9)((e=>e.department.departments));(0,t.useEffect)((()=>{q((0,b.tt)()),q((async e=>{try{const s=await c.Z.get("".concat(u.Z.instance.baseURL,"/api/select/role"),{headers:{...u.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});e({type:d.gJ,payload:s.data})}catch(s){e({type:d.lZ,payload:{msg:s.response.statusText,status:s.response.status}})}}))}),[q]);const $=(0,t.useCallback)((()=>{N(""),S(""),F(""),U(""),z(""),I(""),B(""),w(""),f(""),p(1)}),[]);return(0,t.useEffect)((()=>{o&&(f(o.id),N(o.name),S(o.email),z(o.role_id),w(o.department_id),B(o.payrollNumber),I(o.nss),console.log(o))}),[o]),(0,t.useEffect)((()=>{if(!L)return void R({numCharacters:!1,uppercaseLetter:!1,lowercaseLetter:!1,number:!1,symbol:!1});const e={numCharacters:L.length>8,lowercaseLetter:!!/[a-z]/.test(L),uppercaseLetter:!!/[A-Z]/.test(L),number:!!/\d/.test(L),symbol:!!/[`!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?~]/.test(L)};R(e)}),[L]),(0,y.jsxs)(r.Tk,{visible:s,onClose:a,"aria-labelledby":"LiveDemoExampleLabel",children:[(0,y.jsx)(r.p0,{onClose:a,children:(0,y.jsx)(r.fl,{id:"LiveDemoExampleLabel",children:o?"Editar ".concat(o.name):"Agregar nuevo"})}),(0,y.jsxs)(r.sD,{children:[(0,y.jsxs)(r.n2,{variant:"tabs",role:"tablist",className:"mt-1",children:[!m&&(0,y.jsx)(r.U6,{role:"presentation",children:(0,y.jsx)(r.AQ,{active:1===h,component:"button",role:"tab","aria-controls":"data-tab-pane","aria-selected":1===h,onClick:()=>p(1),children:"Datos"})}),(m||!o)&&(0,y.jsx)(r.U6,{role:"presentation",children:(0,y.jsx)(r.AQ,{active:2===h,component:"button",role:"tab","aria-controls":"data-tab-pane","aria-selected":2===h,onClick:()=>p(2),children:"Contrase\xf1a"})})]}),(0,y.jsxs)(r.gr,{children:[(0,y.jsx)(r.IA,{role:"tabpanel","aria-labelledby":"data-tab-pane",visible:1===h,children:(0,y.jsxs)(r.lx,{className:"mt-3",children:[(0,y.jsxs)("div",{className:"mb-3",children:[(0,y.jsx)(r.L8,{htmlFor:"name",children:"Nombre completo"}),(0,y.jsx)(r.jO,{type:"text",id:"name",placeholder:"Nombre",onChange:e=>N(e.target.value),value:C})]}),(0,y.jsxs)("div",{className:"mb-3",children:[(0,y.jsx)(r.L8,{htmlFor:"email",children:"Correo electr\xf3nico"}),(0,y.jsx)(r.jO,{type:"text",id:"email",placeholder:"Correo electr\xf3nico",onChange:e=>S(e.target.value),value:k})]}),(0,y.jsxs)("div",{className:"mb-3 d-flex",children:[(0,y.jsxs)("div",{className:"flex-fill me-2",children:[(0,y.jsx)(r.L8,{htmlFor:"nss",children:"N\xfamero de seguro social (NSS)"}),(0,y.jsx)(r.jO,{type:"text",id:"nss",placeholder:"NSS",onChange:e=>I(e.target.value),value:T})]}),(0,y.jsxs)("div",{className:"flex-fill me-2",children:[(0,y.jsx)(r.L8,{htmlFor:"payrollNumber",children:"N\xfamero de n\xf3mina"}),(0,y.jsx)(r.jO,{type:"text",id:"payrollNumber",placeholder:"No. N\xf3mina",onChange:e=>B(e.target.value),value:P})]})]}),(0,y.jsxs)("div",{className:"mb-3 d-flex",children:[(0,y.jsxs)("div",{className:"flex-fill me-2",children:[(0,y.jsx)(r.L8,{children:"Departamento"}),(0,y.jsxs)(r.LX,{"aria-label":"charge",onChange:e=>w(e.target.value),value:Z,children:[(0,y.jsx)("option",{value:"",children:"Seleccione..."}),null===_||void 0===_?void 0:_.data.map((e=>(0,y.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,y.jsxs)("div",{className:"flex-fill me-2",children:[(0,y.jsx)(r.L8,{children:"Rol"}),(0,y.jsxs)(r.LX,{"aria-label":"role",onChange:e=>z(e.target.value),value:A,children:[(0,y.jsx)("option",{value:"",children:"Seleccione..."}),null===O||void 0===O?void 0:O.data.map((e=>(0,y.jsx)("option",{value:e.id,children:e.name},e.id)))]})]})]})]})}),(0,y.jsx)(r.IA,{role:"tabpanel","aria-labelledby":"data-tab-pane",visible:2===h,children:(0,y.jsxs)(r.lx,{className:"mt-3",children:[(0,y.jsxs)("div",{className:"mb-3",children:[(0,y.jsx)(r.L8,{htmlFor:"name",children:"Contrase\xf1a"}),(0,y.jsx)(r.jO,{type:"password",id:"password",placeholder:"Contrase\xf1a",onChange:e=>F(e.target.value),value:L})]}),(0,y.jsxs)("div",{className:"mb-3",children:[(0,y.jsx)(r.L8,{htmlFor:"confirmPassword",children:"Confirmar contrase\xf1a"}),(0,y.jsx)(r.jO,{type:"password",id:"confirmPassword",placeholder:"Confirmar contrase\xf1a",onChange:e=>U(e.target.value),value:E}),E&&L!==E&&(0,y.jsx)("p",{className:"text-danger",children:"*La contrase\xf1a no coincide"})]}),(0,y.jsxs)("div",{className:"mb-3",children:[(0,y.jsx)("h6",{className:"fw-bolder",children:"La contrase\xf1a debe contener: "}),(0,y.jsxs)("div",{className:"d-flex align-items-center",children:[D.numCharacters?(0,y.jsx)(i.Z,{icon:j.F,className:"text-success"}):(0,y.jsx)(i.Z,{icon:v,className:"text-danger"}),"8 o mas digitos"]}),(0,y.jsxs)("div",{className:"d-flex align-items-center",children:[D.uppercaseLetter?(0,y.jsx)(i.Z,{icon:j.F,className:"text-success"}):(0,y.jsx)(i.Z,{icon:v,className:"text-danger"}),"Una letra mayuscula"]}),(0,y.jsxs)("div",{className:"d-flex align-items-center",children:[D.lowercaseLetter?(0,y.jsx)(i.Z,{icon:j.F,className:"text-success"}):(0,y.jsx)(i.Z,{icon:v,className:"text-danger"}),"Una letra minuscula"]}),(0,y.jsxs)("div",{className:"d-flex align-items-center",children:[D.number?(0,y.jsx)(i.Z,{icon:j.F,className:"text-success"}):(0,y.jsx)(i.Z,{icon:v,className:"text-danger"}),"Un numero"]}),(0,y.jsxs)("div",{className:"d-flex align-items-center",children:[D.symbol?(0,y.jsx)(i.Z,{icon:j.F,className:"text-success"}):(0,y.jsx)(i.Z,{icon:v,className:"text-danger"}),"Un simbolo"]})]})]})})]})]}),(0,y.jsxs)(r.Ym,{children:[(0,y.jsx)(r.u5,{color:"secondary",onClick:a,children:"Cerrar"}),(0,y.jsx)(r.u5,{color:"primary",className:"text-light fw-semibold",onClick:e=>{if(e.preventDefault(),!C)return void alert("Ingrese un nombre");if(!k)return void alert("Ingrese un correo electr\xf3nico");if(m||!o){if(Object.values(D).every((e=>!e)))return void alert("Verifique las pol\xedticas de contrase\xf1a segura");if(!E)return void alert("Confirme la contrase\xf1a")}let s={name:C,email:k,nss:T,role_id:A,department_id:Z,payrollNumber:P},t={password:L};q(o?((e,s,a)=>async t=>{try{const r=await c.Z.put("".concat(u.Z.instance.baseURL,"/api/user/").concat(s),e,{headers:{...u.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});t({type:d.AX,payload:r.data.data}),a(r.data)}catch(r){t({type:d.zA,payload:{msg:r.response.statusText,status:r.response.status}}),a({success:!1,message:r.message})}})(m?t:s,x,(e=>{e.success?q((0,g.f)((0,l.Kv)({msg:"Usuario actualizado correctamente.",title:"Usuarios",type:"success"}))):q((0,g.f)((0,l.Kv)({msg:"Ha ocurrido un error.",title:"Usuarios",type:"error"}))),$(),a()})):((e,s)=>async a=>{try{const t=await c.Z.post("".concat(u.Z.instance.baseURL,"/api/user"),e,{headers:{...u.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});a({type:d.jN,payload:t.data.data}),s(t.data)}catch(t){a({type:d.zA,payload:{msg:t.response.statusText,status:t.response.status}}),s({success:!1,message:t.message})}})({...s,...t},(e=>{e.success?q((0,g.f)((0,l.Kv)({msg:"Usuario agregado correctamente.",title:"Usuarios",type:"success"}))):q((0,g.f)((0,l.Kv)({msg:"Ha ocurrido un error.",title:"Usuarios",type:"error"}))),$(),a()})))},children:"Guardar"})]})]})},C=e=>{let{visible:s,onClose:a,userData:i}=e;const[o,m]=(0,t.useState)(1),[h,p]=(0,t.useState)(),[x,j]=(0,t.useState)(!1),[v,b]=(0,t.useState)(!1),[f,C]=(0,t.useState)(!1),[N,k]=(0,t.useState)(!1),[S,Z]=(0,t.useState)(!1),[w,A]=(0,t.useState)(!1),[z,L]=(0,t.useState)(!1),[F,E]=(0,t.useState)([]),U=(0,n.I0)(),T=((0,n.v9)((e=>e.user.loading)),function(e,s){arguments.length>2&&void 0!==arguments[2]&&arguments[2]||E(e?[...F,s]:F.filter((e=>e!==s))),"banks"===s&&j(e),"providers"===s&&b(e),"quotes"===s&&C(e),"purchaseRequest"===s&&k(e),"pendingPayments"===s&&Z(e),"departments"===s&&A(e),"users"===s&&L(e)});return(0,t.useEffect)((()=>{if(!i)return;p(i.id);let e=[];i.modules&&(i.modules.forEach((s=>{T(!0,s.module.submodule,!0),e.push(s.module.submodule)})),E(e))}),[i]),console.log(F),(0,y.jsxs)(r.Tk,{visible:s,onClose:a,"aria-labelledby":"UserModulesModal",size:"lg",children:[(0,y.jsx)(r.p0,{onClose:a,children:(0,y.jsx)(r.fl,{id:"UserModulesModal",children:"Asignar modulos a ".concat(i.name)})}),(0,y.jsxs)(r.sD,{children:[(0,y.jsx)(r.n2,{variant:"tabs",role:"tablist",className:"mt-1",children:(0,y.jsx)(r.U6,{role:"presentation",children:(0,y.jsx)(r.AQ,{active:1===o,component:"button",role:"tab","aria-controls":"data-tab-pane","aria-selected":1===o,onClick:()=>m(1),children:"Modulos"})})}),(0,y.jsx)(r.gr,{children:(0,y.jsx)(r.IA,{role:"tabpanel","aria-labelledby":"data-tab-pane",visible:1===o,children:(0,y.jsxs)(r.lx,{className:"mt-3",children:[(0,y.jsxs)("div",{className:"mb-3",children:[(0,y.jsx)("h5",{children:"Administraci\xf3n"}),(0,y.jsxs)("div",{className:"row row-cols-3",children:[(0,y.jsx)("div",{className:"col",children:(0,y.jsx)(r.EC,{id:"banks",label:"Bancos",checked:x,onChange:e=>T(e.target.checked,"banks")})}),(0,y.jsx)("div",{className:"col",children:(0,y.jsx)(r.EC,{id:"providers",label:"Proveedores",checked:v,onChange:e=>T(e.target.checked,"providers")})})]})]}),(0,y.jsxs)("div",{className:"mb-3",children:[(0,y.jsx)("h5",{children:"Pagos"}),(0,y.jsxs)("div",{className:"row row-cols-3",children:[(0,y.jsx)("div",{className:"col",children:(0,y.jsx)(r.EC,{id:"quotes",label:"Solicitud de compra",checked:f,onChange:e=>T(e.target.checked,"quotes")})}),(0,y.jsx)("div",{className:"col",children:(0,y.jsx)(r.EC,{id:"purchaseRequest",label:"Solicitud de pago",checked:N,onChange:e=>T(e.target.checked,"purchaseRequest")})}),(0,y.jsx)("div",{className:"col",children:(0,y.jsx)(r.EC,{id:"pendingPayments",label:"Pagos pendientes",checked:S,onChange:e=>T(e.target.checked,"pendingPayments")})})]})]}),(0,y.jsxs)("div",{className:"mb-3",children:[(0,y.jsx)("h5",{children:"Usuarios"}),(0,y.jsxs)("div",{className:"row row-cols-3",children:[(0,y.jsx)("div",{className:"col",children:(0,y.jsx)(r.EC,{id:"departments",label:"Departamentos",checked:w,onChange:e=>T(e.target.checked,"departments")})}),(0,y.jsx)("div",{className:"col",children:(0,y.jsx)(r.EC,{id:"users",label:"Usuarios",checked:z,onChange:e=>T(e.target.checked,"users")})})]})]})]})})})]}),(0,y.jsxs)(r.Ym,{children:[(0,y.jsx)(r.u5,{color:"secondary",onClick:a,children:"Cerrar"}),(0,y.jsx)(r.u5,{color:"primary",className:"text-light fw-semibold",onClick:e=>{e.preventDefault(),U(((e,s)=>async a=>{try{const t=await c.Z.post("".concat(u.Z.instance.baseURL,"/api/assign/module"),e,{headers:{...u.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});a({type:d.AX,payload:t.data.data}),s(t.data)}catch(t){a({type:d.zA,payload:{msg:t.response.statusText,status:t.response.status}}),s({success:!1,message:t.message})}})({user_id:h,modules:F},(e=>{e.success&&U((0,g.f)((0,l.Kv)({msg:e.message,type:"success"})))}))),a()},children:"Guardar"})]})]})};var N=a(7201);const k=e=>{let{visible:s,onClose:a,userData:i}=e;const[o,m]=(0,t.useState)(1),[h,p]=(0,t.useState)(),[x,j]=(0,t.useState)([]),v=(0,n.I0)(),b=(0,n.v9)((e=>e.permission.loading)),f=(0,n.v9)((e=>e.permission.permissions));(0,t.useEffect)((()=>{if(!i)return;p(i.id);let e=[];i.permissions&&(i.permissions.forEach((s=>{C(!0,s.permission.id,!0),e.push(s.permission.id)})),j(e))}),[i]),(0,t.useEffect)((()=>{v((async e=>{try{const s=await c.Z.get("".concat(u.Z.instance.baseURL,"/api/permission"),{headers:{...u.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});e({type:d.ji,payload:s.data})}catch(s){e({type:d.qZ,payload:{msg:s.response.statusText,status:s.response.status}})}}))}),[v]);const C=function(e,s){arguments.length>2&&void 0!==arguments[2]&&arguments[2]||j(e?[...x,s]:x.filter((e=>e!==s)))};return(0,y.jsxs)(r.Tk,{visible:s,onClose:a,"aria-labelledby":"UserPermissionsModal",size:"xl",children:[(0,y.jsx)(r.p0,{onClose:a,children:(0,y.jsx)(r.fl,{id:"UserPermissionsModal",children:"Editar permisos a ".concat(i.name)})}),(0,y.jsxs)(r.sD,{children:[(0,y.jsx)(r.n2,{variant:"tabs",role:"tablist",className:"mt-1",children:(0,y.jsx)(r.U6,{role:"presentation",children:(0,y.jsx)(r.AQ,{active:1===o,component:"button",role:"tab","aria-controls":"data-tab-pane","aria-selected":1===o,onClick:()=>m(1),children:"Permisos"})})}),(0,y.jsx)(r.gr,{children:b?(0,y.jsx)(r.LQ,{color:"primary",variant:"grow"}):(0,y.jsx)(r.IA,{role:"tabpanel","aria-labelledby":"data-tab-pane",visible:1===o,children:(0,y.jsx)(r.lx,{className:"mt-3",children:(0,y.jsxs)("div",{className:"row row-cols-5",children:[i.modules.find((e=>"banks"===e.module.submodule))&&(0,y.jsxs)("div",{className:"col mb-3",children:[(0,y.jsx)("h5",{children:"Bancos"}),null===f||void 0===f?void 0:f.map((e=>"banks"===e.module.submodule?(0,y.jsx)("div",{children:(0,y.jsx)(r.EC,{id:e.name,label:N.mk[e.name],checked:x.find((s=>s===e.id)),onChange:s=>C(s.target.checked,e.id)})},e.id):(0,y.jsx)(y.Fragment,{})))]}),i.modules.find((e=>"providers"===e.module.submodule))&&(0,y.jsxs)("div",{className:"col mb-3",children:[(0,y.jsx)("h5",{children:"Proveedores"}),f.map((e=>"providers"===e.module.submodule?(0,y.jsx)("div",{children:(0,y.jsx)(r.EC,{id:e.name,label:N.mk[e.name],checked:x.find((s=>s===e.id)),onChange:s=>C(s.target.checked,e.id)})},e.id):(0,y.jsx)(y.Fragment,{})))]}),i.modules.find((e=>"quotes"===e.module.submodule))&&(0,y.jsxs)("div",{className:"col mb-3",children:[(0,y.jsx)("h5",{children:"Solicitudes de compra"}),f.map((e=>"quotes"===e.module.submodule?(0,y.jsx)("div",{children:(0,y.jsx)(r.EC,{id:e.name,label:N.mk[e.name],checked:x.find((s=>s===e.id)),onChange:s=>C(s.target.checked,e.id)})},e.id):(0,y.jsx)(y.Fragment,{})))]}),i.modules.find((e=>"purchaseRequest"===e.module.submodule))&&(0,y.jsxs)("div",{className:"col mb-3",children:[(0,y.jsx)("h5",{children:"Solicitudes de pago"}),f.map((e=>"purchaseRequest"===e.module.submodule?(0,y.jsx)("div",{children:(0,y.jsx)(r.EC,{id:e.name,label:N.mk[e.name],checked:x.find((s=>s===e.id)),onChange:s=>C(s.target.checked,e.id)})},e.id):(0,y.jsx)(y.Fragment,{})))]}),i.modules.find((e=>"pendingPayments"===e.module.submodule))&&(0,y.jsxs)("div",{className:"col mb-3",children:[(0,y.jsx)("h5",{children:"Pagos pendientes"}),f.map((e=>"pendingPayments"===e.module.submodule?(0,y.jsx)("div",{children:(0,y.jsx)(r.EC,{id:e.name,label:N.mk[e.name],checked:x.find((s=>s===e.id)),onChange:s=>C(s.target.checked,e.id)})},e.id):(0,y.jsx)(y.Fragment,{})))]}),i.modules.find((e=>"departments"===e.module.submodule))&&(0,y.jsxs)("div",{className:"col mb-3",children:[(0,y.jsx)("h5",{children:"Departamentos"}),f.map((e=>"departments"===e.module.submodule?(0,y.jsx)("div",{children:(0,y.jsx)(r.EC,{id:e.name,label:N.mk[e.name],checked:x.find((s=>s===e.id)),onChange:s=>C(s.target.checked,e.id)})},e.id):(0,y.jsx)(y.Fragment,{})))]}),i.modules.find((e=>"users"===e.module.submodule))&&(0,y.jsxs)("div",{className:"col mb-3",children:[(0,y.jsx)("h5",{children:"Usuarios"}),f.map((e=>"users"===e.module.submodule?(0,y.jsx)("div",{children:(0,y.jsx)(r.EC,{id:e.name,label:N.mk[e.name],checked:x.find((s=>s===e.id)),onChange:s=>C(s.target.checked,e.id)})},e.id):(0,y.jsx)(y.Fragment,{})))]})]})})})})]}),(0,y.jsxs)(r.Ym,{children:[(0,y.jsx)(r.u5,{color:"secondary",onClick:a,children:"Cerrar"}),(0,y.jsx)(r.u5,{color:"primary",className:"text-light fw-semibold",onClick:e=>{e.preventDefault(),v(((e,s)=>async a=>{try{const t=await c.Z.post("".concat(u.Z.instance.baseURL,"/api/assign/permission"),e,{headers:{...u.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});a({type:d.AX,payload:t.data.data}),s(t.data)}catch(t){a({type:d.zA,payload:{msg:t.response.statusText,status:t.response.status}}),s({success:!1,message:t.message})}})({user_id:h,permissions:x},(e=>{e.success?v((0,g.f)((0,l.Kv)({msg:e.message,type:"success"}))):v((0,g.f)((0,l.Kv)({msg:e.message,type:"error"})))}))),a()},children:"Guardar"})]})]})},S=e=>{let{data:s}=e;const[a,o]=(0,t.useState)(!1),[m,p]=(0,t.useState)(!1),[j,v]=(0,t.useState)(!1),[b,S]=(0,t.useState)(!1),[Z,w]=(0,t.useState)(null),A=(0,n.I0)(),z=(0,N.Tg)("users","delete"),L=(0,N.Tg)("users","edit"),F=(0,N.Tg)("users","modules"),E=(0,N.Tg)("users","permissions"),U=e=>{x().fire({title:"\xbfEst\xe1 seguro?",text:"No podr\xe1s revertir esto.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar."}).then((s=>{s.isConfirmed&&A(((e,s)=>async a=>{try{const t=await c.Z.delete("".concat(u.Z.instance.baseURL,"/api/user/").concat(e),{headers:{...u.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});a({type:d.AZ,payload:e}),s(t.data)}catch(t){a({type:d.zA,payload:{msg:t.response.statusText,status:t.response.status}}),s({success:!1,message:t.message})}})(e,(e=>{e.success?(A((0,g.f)((0,l.Kv)({msg:"Usuario eliminado correctamente.",title:"Usuarios",type:"success"}))),x().fire({title:"Eliminado!",text:"El Usuario ha sido eliminado.",icon:"success"})):A((0,g.f)((0,l.Kv)({msg:"Ocurrio un error.",title:"Usuarios",type:"error"})))})))}))};return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(r.Sx,{striped:!0,responsive:!0,children:[(0,y.jsx)(r.V,{children:(0,y.jsxs)(r.T6,{children:[(0,y.jsx)(r.is,{scope:"col",children:"#"}),(0,y.jsx)(r.is,{scope:"col",children:"Nombre"}),(0,y.jsx)(r.is,{scope:"col",children:"Correo electr\xf3nico"}),(0,y.jsx)(r.is,{scope:"col",children:"Departamento"}),(0,y.jsx)(r.is,{scope:"col",className:"text-center",children:"Opciones"})]})}),(0,y.jsx)(r.NR,{children:null===s||void 0===s?void 0:s.map((e=>{var s,t;return(0,y.jsxs)(r.T6,{children:[(0,y.jsx)(r.is,{scope:"row",children:e.id}),(0,y.jsx)(r.NN,{children:e.name}),(0,y.jsx)(r.NN,{children:e.email}),(0,y.jsx)(r.NN,{children:(null===e||void 0===e||null===(s=e.department)||void 0===s?void 0:s.name)||(0,y.jsx)("span",{className:"text-primary fw-bolder",children:"Sin departamento asignado"})}),(0,y.jsx)(r.NN,{className:"text-center overflow-visible",children:(0,y.jsxs)(r.w5,{variant:"dropdown",children:[(0,y.jsx)(r.SQ,{href:"#",color:"light",children:(0,y.jsx)(i.Z,{icon:h.t,title:"Opciones",size:"lg"})}),(0,y.jsxs)(r.$H,{className:"position-fixed",children:[F&&(0,y.jsx)(r.$f,{style:{cursor:"pointer"},onClick:()=>{p(!m),w(e)},children:"Asignar modulos"}),E&&(null===e||void 0===e||null===(t=e.modules)||void 0===t?void 0:t.length)>0&&(0,y.jsx)(r.$f,{style:{cursor:"pointer"},onClick:()=>{v(!j),w(e)},children:"Permisos"}),L&&(0,y.jsx)(r.$f,{style:{cursor:"pointer"},onClick:()=>{o(!a),w(e)},children:"Editar"}),L&&(0,y.jsx)(r.$f,{style:{cursor:"pointer"},onClick:()=>{o(!a),S(!0),w(e)},children:"Cambiar contrase\xf1a"}),z&&(0,y.jsx)(r.$f,{style:{cursor:"pointer"},onClick:()=>U(e.id),children:"Eliminar"})]})]})})]},e.id)}))})]}),a&&(0,y.jsx)(f,{visible:a,onClose:()=>{o(!1),S(!1)},userData:Z,visibleChangePassword:b}),m&&(0,y.jsx)(C,{visible:m,onClose:()=>p(!1),userData:Z}),j&&(0,y.jsx)(k,{visible:j,onClose:()=>v(!1),userData:Z})]})},Z=()=>{const[e,s]=(0,t.useState)(!1),a=(0,n.I0)(),[c,d]=(0,t.useState)("name"),[u,h]=(0,t.useState)(""),p=(0,n.v9)((e=>e.user.users.data)),[x,g]=(0,t.useState)(1),j=(0,n.v9)((e=>e.user.users.current_page)),v=(0,n.v9)((e=>e.user.users.last_page)),b=((0,n.v9)((e=>e.user.users.total)),(0,n.v9)((e=>e.user.loading)));return(0,t.useEffect)((()=>{a(m(x,c,u))}),[a,x]),(0,t.useEffect)((()=>{j&&g(j)}),[j]),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(r.xH,{children:[(0,y.jsxs)(r.bn,{className:"d-flex justify-content-between align-items-center",children:[(0,y.jsx)("h4",{children:"Listado de usuarios"}),(0,y.jsx)("div",{className:"d-flex gap-2",children:(0,N.Tg)("users","create")&&(0,y.jsxs)(r.u5,{color:"primary",className:"text-light fw-semibold align-content-center d-flex",onClick:()=>s(!e),children:[(0,y.jsx)(i.Z,{icon:o.q,size:"xl",className:"me-1"}),"Nuevo"]})})]}),(0,y.jsxs)(r.sl,{children:[(0,y.jsxs)(r.lx,{children:[(0,y.jsx)(r.L8,{children:"Filtros de busqueda"}),(0,y.jsxs)("div",{className:"mb-3 d-flex",children:[(0,y.jsx)("div",{className:"flex-fill me-2",children:(0,y.jsx)(r.LX,{value:c,onChange:e=>d(e.target.value),"aria-label":"caseFilter",options:[{label:"Nombre",value:"name"}]})}),(0,y.jsx)("div",{className:"flex-fill me-2",children:(0,y.jsx)(r.jO,{value:u,onChange:e=>h(e.target.value),type:"text",placeholder:"Ingresar texto"})})]}),(0,y.jsx)(r.u5,{type:"button",className:"text-light fw-semibold",onClick:()=>a(m(x,c,u)),children:"Buscar"})]}),b?(0,y.jsx)("div",{className:"d-flex justify-content-center",children:(0,y.jsx)(r.LQ,{color:"primary",variant:"grow"})}):(0,y.jsx)(S,{data:p})]}),(0,y.jsx)(r.Bt,{children:(0,y.jsx)(l.bD,{currentPage:x,lastPage:v,setCurrentPage:g})})]}),e&&(0,y.jsx)(f,{visible:e,onClose:()=>s(!1)})]})}},1404:(e,s,a)=>{a.d(s,{F:()=>t});var t=["512 512","<polygon fill='var(--ci-primary-color, currentColor)' points='200.359 382.269 61.057 251.673 82.943 228.327 199.641 337.731 428.686 108.687 451.314 131.313 200.359 382.269' class='ci-primary'/>"]}}]);
//# sourceMappingURL=525.ad3621dd.chunk.js.map