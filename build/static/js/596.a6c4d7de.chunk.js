"use strict";(self.webpackChunkgasomax_client=self.webpackChunkgasomax_client||[]).push([[596],{507:(e,a,s)=>{s.d(a,{AG:()=>i,G5:()=>c,I2:()=>l,qH:()=>o,wT:()=>d});var t=s(5294),n=s(591),r=s(6647);const c=(e,a,s)=>async c=>{try{const o=await t.Z.get("".concat(r.Z.instance.baseURL,"/api/bank?").concat(a,"=").concat(s,"&page=").concat(e),{headers:{...r.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});c({type:n.s6,payload:o.data})}catch(o){c({type:n.l9,payload:{msg:o.response.statusText,status:o.response.status}})}},o=(e,a)=>async s=>{try{const c=await t.Z.post("".concat(r.Z.instance.baseURL,"/api/bank"),e,{headers:{...r.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});s({type:n.RS,payload:c.data.data}),a(c.data)}catch(c){s({type:n.l9,payload:{msg:c.response.statusText,status:c.response.status}}),a({success:!1,message:c.message})}},i=(e,a,s)=>async c=>{try{const o=await t.Z.put("".concat(r.Z.instance.baseURL,"/api/bank/").concat(a),e,{headers:{...r.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});c({type:n.h5,payload:o.data.data}),s(o.data)}catch(o){c({type:n.l9,payload:{msg:o.response.statusText,status:o.response.status}}),s({success:!1,message:o.message})}},l=(e,a)=>async s=>{try{const c=await t.Z.delete("".concat(r.Z.instance.baseURL,"/api/bank/").concat(e),{headers:{...r.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});s({type:n.ZU,payload:e}),a(c.data)}catch(c){s({type:n.l9,payload:{msg:c.response.statusText,status:c.response.status}}),a({success:!1,message:c.message})}},d=()=>async e=>{try{const a=await t.Z.get("".concat(r.Z.instance.baseURL,"/api/select/bank"),{headers:{...r.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});e({type:n.mC,payload:a.data})}catch(a){e({type:n.l9,payload:{msg:a.response.statusText,status:a.response.status}})}}},7201:(e,a,s)=>{s.d(a,{Tg:()=>m,a4:()=>l,iT:()=>c,mY:()=>o,mk:()=>u,uD:()=>d,uf:()=>r,yw:()=>i});var t=s(9779),n=s(9101);const r=e=>(e/1).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),c=e=>t.ou.fromISO(e).toLocaleString(t.ou.DATE_SHORT),o=e=>t.ou.fromISO(e).toLocaleString(t.ou.DATETIME_SHORT),i={advance:"Anticipo",settlement:"Liquidaci\xf3n",payment:"Abono a cuenta"},l={pending:"Cotizaci\xf3n completa",approved:"Cotizaci\xf3n aprobada",paid:"Cotizaci\xf3n pagada",rejected:"Cotizaci\xf3n rechazada"},d={pending:"warning",approved:"success",paid:"info",rejected:"danger"},u={index:"Lectura",create:"Crear",edit:"Editar",delete:"Eliminar",reject:"Rechazar",pay:"Pagar",authorize:"Autorizar",modules:"Asignar modulos",permissions:"Asignar permisos"},m=(e,a)=>{const s=(0,n.v9)((e=>e.auth.permissions)),t=(0,n.v9)((e=>e.auth.modules)).find((a=>a.submodule===e));return!!t&&!!s.find((e=>e.submodule===t.submodule&&e.permission===a))}},596:(e,a,s)=>{s.r(a),s.d(a,{default:()=>j});var t=s(2791),n=s(2937),r=s(9101),c=s(507),o=s(4166),i=s(574),l=s(184);const d=e=>{let{visible:a,onClose:s,bankData:d}=e;const[u,m]=(0,t.useState)(1),[p,x]=(0,t.useState)(),[h,g]=(0,t.useState)(),b=(0,r.I0)(),j=((0,r.v9)((e=>e.bank.loading)),(0,t.useCallback)((()=>{g(),m(1)}),[]));return(0,t.useEffect)((()=>{d&&(x(d.id),g(d.name))}),[d]),(0,l.jsxs)(n.Tk,{visible:a,onClose:s,"aria-labelledby":"LiveDemoExampleLabel",size:"lg",children:[(0,l.jsx)(n.p0,{onClose:s,children:(0,l.jsx)(n.fl,{id:"LiveDemoExampleLabel",children:d?"Editar ".concat(d.name):"Agregar nuevo"})}),(0,l.jsxs)(n.sD,{children:[(0,l.jsx)(n.n2,{variant:"tabs",role:"tablist",className:"mt-1",children:(0,l.jsx)(n.U6,{role:"presentation",children:(0,l.jsx)(n.AQ,{active:1===u,component:"button",role:"tab","aria-controls":"data-tab-pane","aria-selected":1===u,onClick:()=>m(1),children:"Datos"})})}),(0,l.jsx)(n.gr,{children:(0,l.jsx)(n.IA,{role:"tabpanel","aria-labelledby":"data-tab-pane",visible:1===u,children:(0,l.jsx)(n.lx,{className:"mt-3",children:(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsx)(n.L8,{htmlFor:"bank",children:"Banco"}),(0,l.jsx)(n.jO,{type:"text",id:"bank",placeholder:"nombre",onChange:e=>g(e.target.value),value:h})]})})})})]}),(0,l.jsxs)(n.Ym,{children:[(0,l.jsx)(n.u5,{color:"secondary",onClick:s,children:"Cerrar"}),(0,l.jsx)(n.u5,{color:"primary",className:"text-light fw-semibold",onClick:e=>{if(e.preventDefault(),!h)return void alert("Ingrese un nombre");let a={name:h};b(d?(0,c.AG)(a,p,(e=>{e.success?b((0,o.f)((0,i.Kv)({msg:"Banco actualizado correctamente.",title:"Bancos",type:"success"}))):b((0,o.f)((0,i.Kv)({msg:"Ha ocurrido un error.",title:"Bancos",type:"error"}))),j(),s()})):(0,c.qH)(a,(e=>{e.success?b((0,o.f)((0,i.Kv)({msg:"Banco agregado correctamente.",title:"Bancos",type:"success"}))):b((0,o.f)((0,i.Kv)({msg:"Ha ocurrido un error.",title:"Bancos",type:"error"}))),j(),s()})))},children:"Guardar"})]})]})};var u=s(4846),m=s(3896),p=s(1830),x=s.n(p),h=s(7201);const g=e=>{let{data:a}=e;const[s,p]=(0,t.useState)(!1),[g,b]=(0,t.useState)(null),j=(0,r.I0)(),v=(0,h.Tg)("banks","delete"),y=(0,h.Tg)("banks","edit");return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(n.Sx,{striped:!0,responsive:!0,children:[(0,l.jsx)(n.V,{children:(0,l.jsxs)(n.T6,{children:[(0,l.jsx)(n.is,{scope:"col",children:"#"}),(0,l.jsx)(n.is,{scope:"col",children:"Banco"}),(0,l.jsx)(n.is,{scope:"col",className:"text-center",children:"Opciones"})]})}),(0,l.jsx)(n.NR,{children:null===a||void 0===a?void 0:a.map((e=>(0,l.jsxs)(n.T6,{children:[(0,l.jsx)(n.is,{scope:"row",children:e.id}),(0,l.jsx)(n.NN,{children:e.name}),(0,l.jsx)(n.NN,{className:"text-center overflow-visible",children:(0,l.jsxs)(n.w5,{variant:"dropdown",children:[(0,l.jsx)(n.SQ,{href:"#",color:"light",children:(0,l.jsx)(u.Z,{icon:m.t,title:"Opciones",size:"lg"})}),(0,l.jsxs)(n.$H,{className:"position-fixed",children:[y&&(0,l.jsx)(n.$f,{style:{cursor:"pointer"},onClick:()=>{p(!s),b(e)},children:"Editar"}),v&&(0,l.jsx)(n.$f,{style:{cursor:"pointer"},onClick:()=>{return a=e.id,void x().fire({title:"\xbfEst\xe1 seguro?",text:"No podr\xe1s revertir esto.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar."}).then((e=>{e.isConfirmed&&j((0,c.I2)(a,(e=>{e.success?(j((0,o.f)((0,i.Kv)({msg:"Banco eliminado correctamente.",title:"Bancos",type:"success"}))),x().fire({title:"Eliminado!",text:"El banco ha sido eliminado.",icon:"success"})):j((0,o.f)((0,i.Kv)({msg:"Ocurrio un error.",title:"Bancos",type:"error"})))})))}));var a},children:"Eliminar"})]})]})})]},e.id)))})]}),(0,l.jsx)(d,{visible:s,onClose:()=>p(!1),bankData:g})]})};var b=s(8030);const j=()=>{const[e,a]=(0,t.useState)(!1),s=(0,r.I0)(),[o,m]=(0,t.useState)("name"),[p,x]=(0,t.useState)(""),j=(0,r.v9)((e=>e.bank.banks.data)),[v,y]=(0,t.useState)(1),f=(0,r.v9)((e=>e.bank.banks.current_page)),k=(0,r.v9)((e=>e.bank.banks.last_page)),C=((0,r.v9)((e=>e.bank.banks.total)),(0,r.v9)((e=>e.bank.loading)));return(0,t.useEffect)((()=>{s((0,c.G5)(v,o,p))}),[s,v]),(0,t.useEffect)((()=>{f&&y(f)}),[f]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(n.xH,{children:[(0,l.jsxs)(n.bn,{className:"d-flex justify-content-between align-items-center",children:[(0,l.jsx)("h4",{children:"Listado de Bancos"}),(0,l.jsx)("div",{className:"d-flex gap-2",children:(0,h.Tg)("banks","create")&&(0,l.jsxs)(n.u5,{color:"primary",className:"text-light fw-semibold align-content-center d-flex",onClick:()=>a(!e),children:[(0,l.jsx)(u.Z,{icon:b.q,size:"xl",className:"me-1"}),"Nuevo"]})})]}),(0,l.jsxs)(n.sl,{children:[(0,l.jsxs)(n.lx,{children:[(0,l.jsx)(n.L8,{children:"Filtros de busqueda"}),(0,l.jsxs)("div",{className:"mb-3 d-flex",children:[(0,l.jsx)("div",{className:"flex-fill me-2",children:(0,l.jsx)(n.LX,{value:o,onChange:e=>m(e.target.value),"aria-label":"caseFilter",options:[{label:"Banco",value:"name"}]})}),(0,l.jsx)("div",{className:"flex-fill me-2",children:(0,l.jsx)(n.jO,{value:p,onChange:e=>x(e.target.value),type:"text",placeholder:"Ingresar texto"})})]}),(0,l.jsx)(n.u5,{type:"button",className:"text-light fw-semibold",onClick:()=>s((0,c.G5)(v,o,p)),children:"Buscar"})]}),C?(0,l.jsx)("div",{className:"d-flex justify-content-center",children:(0,l.jsx)(n.LQ,{color:"primary",variant:"grow"})}):(0,l.jsx)(g,{data:j})]}),(0,l.jsx)(n.Bt,{children:(0,l.jsx)(i.bD,{currentPage:v,lastPage:k,setCurrentPage:y})})]}),e&&(0,l.jsx)(d,{visible:e,onClose:()=>a(!1)})]})}}}]);
//# sourceMappingURL=596.a6c4d7de.chunk.js.map