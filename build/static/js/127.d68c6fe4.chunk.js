"use strict";(self.webpackChunkgasomax_client=self.webpackChunkgasomax_client||[]).push([[127],{9741:(e,a,t)=>{t.r(a),t.d(a,{default:()=>x});var o=t(2791),r=t(7941),s=t(9101),n=t(374),d=t(5294),i=t(6647),c=t(591);var l=t(1087),p=t(4166),u=t(184);const x=()=>{const e=(0,s.I0)(),[a]=((0,s.v9)((e=>e.auth.user)),(0,s.v9)((e=>e.auth.permissions)),(0,l.lr)()),t=a.get("code"),{token_dropbox:x}=(0,s.v9)((e=>e.dropbox.token));return(0,o.useEffect)((()=>{e((0,n.PR)())}),[e]),(0,o.useEffect)((()=>{var a;e((a=a=>{a.data||e((0,p.f)((0,r.Kv)({msg:"Sin token para dropbox",type:"error"})))},async e=>{try{var t,o,r,s,n,l;const p=await d.Z.get("".concat(i.Z.instance.baseURL,"/api/configuration"),{headers:{...i.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});let u={token_dropbox:null===(t=p.data)||void 0===t||null===(o=t.data)||void 0===o?void 0:o.token_dropbox,token_dropbox_expires_in:null===(r=p.data)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.token_dropbox_expires_in,token_dropbox_refresh:null===(n=p.data)||void 0===n||null===(l=n.data)||void 0===l?void 0:l.token_dropbox_refresh};e({type:c.G9,payload:u}),a(p.data)}catch(p){console.log(p)}}))}),[e]),(0,o.useEffect)((()=>{var a;t&&e((a=t,async e=>{try{await d.Z.post("".concat(i.Z.instance.baseURL,"/api/token/dropbox"),{code:a,redirect_uri:i.Z.instance.return_uri},{headers:{...i.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}})}catch(t){e({type:c.mx,payload:{msg:t.response.statusText,status:t.response.status}})}}))}),[e,t,x]),(0,u.jsxs)("div",{children:[(0,u.jsx)(r.S8,{}),(0,u.jsxs)("div",{className:"wrapper d-flex flex-column min-vh-100 bg-light",children:[(0,u.jsx)(r.tf,{}),(0,u.jsx)("div",{className:"body flex-grow-1 px-3",children:(0,u.jsx)(r.Lk,{})}),(0,u.jsx)(r.qh,{})]})]})}}}]);
//# sourceMappingURL=127.d68c6fe4.chunk.js.map