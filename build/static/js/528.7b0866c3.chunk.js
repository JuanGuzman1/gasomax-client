"use strict";(self.webpackChunkgasomax_client=self.webpackChunkgasomax_client||[]).push([[528],{4880:(e,a,s)=>{s.d(a,{GB:()=>o,GU:()=>i,M7:()=>d,jH:()=>l,yq:()=>n});var t=s(8372),r=s(2156),c=s(4836);const l=(e,a,s)=>async l=>{try{const n=await t.c.get("".concat(c.c.instance.baseURL,"/api/department?").concat(a,"=").concat(s,"&page=").concat(e),{headers:{...c.c.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});l({type:r.Uj,payload:n.data})}catch(n){l({type:r.G4,payload:{msg:n.response.statusText,status:n.response.status}})}},n=(e,a)=>async s=>{try{const l=await t.c.post("".concat(c.c.instance.baseURL,"/api/department"),e,{headers:{...c.c.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});s({type:r._e,payload:l.data.data}),a(l.data)}catch(l){s({type:r.G4,payload:{msg:l.response.statusText,status:l.response.status}}),a({success:!1,message:l.message})}},o=(e,a,s)=>async l=>{try{const n=await t.c.put("".concat(c.c.instance.baseURL,"/api/department/").concat(a),e,{headers:{...c.c.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});l({type:r.gR,payload:n.data.data}),s(n.data)}catch(n){l({type:r.G4,payload:{msg:n.response.statusText,status:n.response.status}}),s({success:!1,message:n.message})}},i=(e,a)=>async s=>{try{const l=await t.c.delete("".concat(c.c.instance.baseURL,"/api/department/").concat(e),{headers:{...c.c.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});s({type:r.mw,payload:e}),a(l.data)}catch(l){s({type:r.G4,payload:{msg:l.response.statusText,status:l.response.status}}),a({success:!1,message:l.message})}},d=()=>async e=>{try{const a=await t.c.get("".concat(c.c.instance.baseURL,"/api/select/department"),{headers:{...c.c.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});e({type:r.Av,payload:a.data})}catch(a){e({type:r.G4,payload:{msg:a.response.statusText,status:a.response.status}})}}},2784:(e,a,s)=>{s.d(a,{A0:()=>i,Ab:()=>d,O8:()=>l,Oq:()=>m,YL:()=>o,i2:()=>n});var t=s(8372),r=s(2156),c=s(4836);const l=(e,a,s)=>async l=>{try{const n=await t.c.get("".concat(c.c.instance.baseURL,"/api/user?").concat(a,"=").concat(s,"&page=").concat(e),{headers:{...c.c.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});l({type:r.gX,payload:n.data})}catch(n){l({type:r.I7,payload:{msg:n.response.statusText,status:n.response.status}})}},n=(e,a)=>async s=>{try{const l=await t.c.post("".concat(c.c.instance.baseURL,"/api/user"),e,{headers:{...c.c.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});s({type:r.A5,payload:l.data.data}),a(l.data)}catch(l){s({type:r.I7,payload:{msg:l.response.statusText,status:l.response.status}}),a({success:!1,message:l.message})}},o=(e,a,s)=>async l=>{try{const n=await t.c.put("".concat(c.c.instance.baseURL,"/api/user/").concat(a),e,{headers:{...c.c.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});l({type:r.Qr,payload:n.data.data}),s(n.data)}catch(n){l({type:r.I7,payload:{msg:n.response.statusText,status:n.response.status}}),s({success:!1,message:n.message})}},i=(e,a)=>async s=>{try{const l=await t.c.delete("".concat(c.c.instance.baseURL,"/api/user/").concat(e),{headers:{...c.c.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});s({type:r.ym,payload:e}),a(l.data)}catch(l){s({type:r.I7,payload:{msg:l.response.statusText,status:l.response.status}}),a({success:!1,message:l.message})}},d=(e,a)=>async s=>{try{const l=await t.c.post("".concat(c.c.instance.baseURL,"/api/assign/module"),e,{headers:{...c.c.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});s({type:r.Qr,payload:l.data.data}),a(l.data)}catch(l){s({type:r.I7,payload:{msg:l.response.statusText,status:l.response.status}}),a({success:!1,message:l.message})}},m=(e,a)=>async s=>{try{const l=await t.c.post("".concat(c.c.instance.baseURL,"/api/assign/permission"),e,{headers:{...c.c.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});s({type:r.Qr,payload:l.data.data}),a(l.data)}catch(l){s({type:r.I7,payload:{msg:l.response.statusText,status:l.response.status}}),a({success:!1,message:l.message})}}},9936:(e,a,s)=>{s.d(a,{c:()=>y});var t=s(9060),r=s(3084),c=s(8044),l=s(5064),n=s(7316),o=s(2784),i=s(5564),d=s(76),m=["512 512","<polygon fill='var(--ci-primary-color, currentColor)' points='427.314 107.313 404.686 84.687 256 233.373 107.314 84.687 84.686 107.313 233.373 256 84.686 404.687 107.314 427.313 256 278.627 404.686 427.313 427.314 404.687 278.627 256 427.314 107.313' class='ci-primary'/>"],u=s(4880),p=s(2156),h=s(8372),x=s(4836);var g=s(1560),j=s(2496);const y=e=>{let{visible:a,onClose:s,userData:y,visibleChangePassword:b,fromProfile:v}=e;const[N,f]=(0,t.useState)(b?2:1),[w,C]=(0,t.useState)(),[S,I]=(0,t.useState)(""),[U,k]=(0,t.useState)(""),[L,A]=(0,t.useState)(""),[R,E]=(0,t.useState)(""),[B,Q]=(0,t.useState)(""),[z,T]=(0,t.useState)(""),[q,Y]=(0,t.useState)(""),[_,D]=(0,t.useState)(""),[F,G]=(0,t.useState)({numCharacters:!1,uppercaseLetter:!1,lowercaseLetter:!1,number:!1,symbol:!1}),P=(0,c.OY)(),O=(0,c.w1)((e=>e.role.roles)),W=(0,c.w1)((e=>e.department.departments)),H=(0,g.i6)();(0,t.useEffect)((()=>{P((0,u.M7)()),P((async e=>{try{const a=await h.c.get("".concat(x.c.instance.baseURL,"/api/select/role"),{headers:{...x.c.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});e({type:p.sp,payload:a.data})}catch(a){e({type:p.AX,payload:{msg:a.response.statusText,status:a.response.status}})}}))}),[P]);const J=(0,t.useCallback)((()=>{I(""),k(""),Q(""),T(""),E(""),Y(""),D(""),A(""),C(""),f(1)}),[]);return(0,t.useEffect)((()=>{y&&(C(y.id),I(y.name),k(y.email),E(y.role_id),A(y.department_id),D(y.payrollNumber),Y(y.nss))}),[y]),(0,t.useEffect)((()=>{if(!B)return void G({numCharacters:!1,uppercaseLetter:!1,lowercaseLetter:!1,number:!1,symbol:!1});const e={numCharacters:B.length>8,lowercaseLetter:!!/[a-z]/.test(B),uppercaseLetter:!!/[A-Z]/.test(B),number:!!/\d/.test(B),symbol:!!/[`!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?~]/.test(B)};G(e)}),[B]),(0,j.jsxs)(r.U5,{visible:a,onClose:s,"aria-labelledby":"LiveDemoExampleLabel",children:[(0,j.jsx)(r.gO,{onClose:s,children:(0,j.jsx)(r._K,{id:"LiveDemoExampleLabel",children:y?"Editar ".concat(y.name):"Agregar nuevo"})}),(0,j.jsxs)(r.EB,{children:[(0,j.jsxs)(r.wx,{variant:"tabs",role:"tablist",className:"mt-1",children:[!b&&(0,j.jsx)(r.SU,{role:"presentation",children:(0,j.jsx)(r.QJ,{active:1===N,component:"button",role:"tab","aria-controls":"data-tab-pane","aria-selected":1===N,onClick:()=>f(1),children:"Datos"})}),(b||!y)&&(0,j.jsx)(r.SU,{role:"presentation",children:(0,j.jsx)(r.QJ,{active:2===N,component:"button",role:"tab","aria-controls":"data-tab-pane","aria-selected":2===N,onClick:()=>f(2),children:"Contrase\xf1a"})})]}),(0,j.jsxs)(r.CY,{children:[(0,j.jsx)(r.Wy,{role:"tabpanel","aria-labelledby":"data-tab-pane",visible:1===N,children:(0,j.jsxs)(r.YR,{className:"mt-3",children:[(0,j.jsxs)("div",{className:"mb-3",children:[(0,j.jsx)(r.Q5,{htmlFor:"name",children:"Nombre completo"}),(0,j.jsx)(r.Ip,{type:"text",id:"name",placeholder:"Nombre",onChange:e=>I(e.target.value),value:S})]}),(0,j.jsxs)("div",{className:"mb-3",children:[(0,j.jsx)(r.Q5,{htmlFor:"email",children:"Correo electr\xf3nico"}),(0,j.jsx)(r.Ip,{type:"text",id:"email",placeholder:"Correo electr\xf3nico",onChange:e=>k(e.target.value),value:U})]}),(0,j.jsxs)("div",{className:"mb-3 d-flex",children:[(0,j.jsxs)("div",{className:"flex-fill me-2",children:[(0,j.jsx)(r.Q5,{htmlFor:"nss",children:"N\xfamero de seguro social (NSS)"}),(0,j.jsx)(r.Ip,{type:"text",id:"nss",placeholder:"NSS",onChange:e=>Y(e.target.value),value:q})]}),(0,j.jsxs)("div",{className:"flex-fill me-2",children:[(0,j.jsx)(r.Q5,{htmlFor:"payrollNumber",children:"N\xfamero de n\xf3mina"}),(0,j.jsx)(r.Ip,{type:"text",id:"payrollNumber",placeholder:"No. N\xf3mina",onChange:e=>D(e.target.value),value:_})]})]}),(0,j.jsxs)("div",{className:"mb-3 d-flex",children:[(0,j.jsxs)("div",{className:"flex-fill me-2",children:[(0,j.jsx)(r.Q5,{children:"Departamento"}),(0,j.jsxs)(r.Wc,{"aria-label":"charge",onChange:e=>A(e.target.value),value:L,children:[(0,j.jsx)("option",{value:"",children:"Seleccione..."}),null===W||void 0===W?void 0:W.data.map((e=>(0,j.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,j.jsxs)("div",{className:"flex-fill me-2",children:[(0,j.jsx)(r.Q5,{children:"Rol"}),(0,j.jsxs)(r.Wc,{"aria-label":"role",onChange:e=>E(e.target.value),value:R,children:[(0,j.jsx)("option",{value:"",children:"Seleccione..."}),null===O||void 0===O?void 0:O.data.map((e=>(0,j.jsx)("option",{value:e.id,children:e.name},e.id)))]})]})]})]})}),(0,j.jsx)(r.Wy,{role:"tabpanel","aria-labelledby":"data-tab-pane",visible:2===N,children:(0,j.jsxs)(r.YR,{className:"mt-3",children:[(0,j.jsxs)("div",{className:"mb-3",children:[(0,j.jsx)(r.Q5,{htmlFor:"name",children:"Contrase\xf1a"}),(0,j.jsx)(r.Ip,{type:"password",id:"password",placeholder:"Contrase\xf1a",onChange:e=>Q(e.target.value),value:B})]}),(0,j.jsxs)("div",{className:"mb-3",children:[(0,j.jsx)(r.Q5,{htmlFor:"confirmPassword",children:"Confirmar contrase\xf1a"}),(0,j.jsx)(r.Ip,{type:"password",id:"confirmPassword",placeholder:"Confirmar contrase\xf1a",onChange:e=>T(e.target.value),value:z}),z&&B!==z&&(0,j.jsx)("p",{className:"text-danger",children:"*La contrase\xf1a no coincide"})]}),(0,j.jsxs)("div",{className:"mb-3",children:[(0,j.jsx)("h6",{className:"fw-bolder",children:"La contrase\xf1a debe contener: "}),(0,j.jsxs)("div",{className:"d-flex align-items-center",children:[F.numCharacters?(0,j.jsx)(i.c,{icon:d.q,className:"text-success"}):(0,j.jsx)(i.c,{icon:m,className:"text-danger"}),"8 o mas digitos"]}),(0,j.jsxs)("div",{className:"d-flex align-items-center",children:[F.uppercaseLetter?(0,j.jsx)(i.c,{icon:d.q,className:"text-success"}):(0,j.jsx)(i.c,{icon:m,className:"text-danger"}),"Una letra mayuscula"]}),(0,j.jsxs)("div",{className:"d-flex align-items-center",children:[F.lowercaseLetter?(0,j.jsx)(i.c,{icon:d.q,className:"text-success"}):(0,j.jsx)(i.c,{icon:m,className:"text-danger"}),"Una letra minuscula"]}),(0,j.jsxs)("div",{className:"d-flex align-items-center",children:[F.number?(0,j.jsx)(i.c,{icon:d.q,className:"text-success"}):(0,j.jsx)(i.c,{icon:m,className:"text-danger"}),"Un numero"]}),(0,j.jsxs)("div",{className:"d-flex align-items-center",children:[F.symbol?(0,j.jsx)(i.c,{icon:d.q,className:"text-success"}):(0,j.jsx)(i.c,{icon:m,className:"text-danger"}),"Un simbolo"]})]})]})})]})]}),(0,j.jsxs)(r.yI,{children:[(0,j.jsx)(r.uE,{color:"secondary",onClick:s,children:"Cerrar"}),(0,j.jsx)(r.uE,{color:"primary",className:"text-light fw-semibold",onClick:e=>{if(e.preventDefault(),!S)return void alert("Ingrese un nombre");if(!U)return void alert("Ingrese un correo electr\xf3nico");if(b||!y){if(Object.values(F).every((e=>!e)))return void alert("Verifique las pol\xedticas de contrase\xf1a segura");if(!z)return void alert("Confirme la contrase\xf1a")}let a={name:S,email:U,nss:q,role_id:R,department_id:L,payrollNumber:_},t={password:B},r=b?t:a;P(y?(0,o.YL)(r,w,(e=>{e.success?(P((0,l.I)((0,n.oN)({msg:"Usuario actualizado correctamente.",title:"Usuarios",type:"success"}))),b&&v&&H("/login")):P((0,l.I)((0,n.oN)({msg:"Ha ocurrido un error.",title:"Usuarios",type:"error"}))),J(),s()})):(0,o.i2)({...a,...t},(e=>{e.success?P((0,l.I)((0,n.oN)({msg:"Usuario agregado correctamente.",title:"Usuarios",type:"success"}))):P((0,l.I)((0,n.oN)({msg:"Ha ocurrido un error.",title:"Usuarios",type:"error"}))),J(),s()})))},children:"Guardar"})]})]})}},8128:(e,a,s)=>{s.d(a,{i:()=>t});const t={provider:"provider",purchaseRequest:"purchaseRequest",quote:"quote",user:"user"}},8528:(e,a,s)=>{s.r(a),s.d(a,{default:()=>h});var t=s(3084),r=s(9060),c=s(8044),l=s(6552),n=s(686),o=s(8128),i=s(7780),d=s(2496);const m=e=>{let{visible:a,onClose:s,userData:m}=e;const[u,p]=(0,r.useState)(1),[h,x]=(0,r.useState)(),[g,j]=(0,r.useState)(null),y=(0,c.w1)((e=>e.file.progress)),b=(0,c.OY)();(0,r.useEffect)((()=>{m&&x(m.id)}),[m]);return(0,r.useEffect)((()=>{100===y&&setTimeout((()=>{s()}),3e3)}),[y,s]),(0,d.jsxs)(t.U5,{visible:a,onClose:s,"aria-labelledby":"uploadPhoto",alignment:"center",children:[(0,d.jsx)(t.gO,{onClose:s,children:(0,d.jsx)(t._K,{id:"uploadPhoto",children:m?"Editar ".concat(m.name):"Agregar nuevo"})}),(0,d.jsxs)(t.EB,{children:[g&&!(null!==g&&void 0!==g&&g.id)&&(0,d.jsxs)(t.a4,{value:y,className:"mb-2",children:[y,"%"]}),(0,d.jsx)(t.wx,{variant:"tabs",role:"tablist",className:"mt-1",children:(0,d.jsx)(t.SU,{role:"presentation",children:(0,d.jsx)(t.QJ,{active:1===u,component:"button",role:"tab","aria-controls":"data-tab-pane","aria-selected":1===u,onClick:()=>p(1),children:"Foto"})})}),(0,d.jsx)(t.CY,{children:(0,d.jsx)(t.Wy,{role:"tabpanel","aria-labelledby":"data-tab-pane",visible:1===u,children:(0,d.jsx)(t.YR,{className:"mt-3",children:(0,d.jsxs)("div",{className:"mb-3",children:[(0,d.jsx)(t.Q5,{htmlFor:"name",children:"Sube una foto o imagen de perfil"}),(0,d.jsx)(t.Ip,{type:"file",id:"photo",onChange:e=>j({file:e.target.files[0],tag:l.k.img,fileName:e.target.files[0].name}),accept:"image/*"})]})})})})]}),(0,d.jsxs)(t.yI,{children:[(0,d.jsx)(t.uE,{color:"secondary",onClick:s,children:"Cerrar"}),(0,d.jsx)(t.uE,{color:"primary",className:"text-light fw-semibold",onClick:()=>{try{b((0,n.S_)(g.file,g.tag,null,h,o.i.user,(()=>{b((0,i.eg)())})))}catch(e){console.log(e)}},children:"Guardar"})]})]})};var u=s(9936);const p=s(9704),h=()=>{const e=(0,c.w1)((e=>e.auth.user)).data.user,[a,s]=(0,r.useState)(!1),[l,n]=(0,r.useState)(!1);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"d-flex",children:[(0,d.jsx)(t.u0,{className:"flex-fill mx-3",children:(0,d.jsxs)(t.Yj,{className:"d-flex flex-column align-items-center",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(t.KS,{rounded:!0,src:p,width:200,height:200,className:"mt-4"}),(0,d.jsx)("p",{className:"text-primary text-center text-decoration-underline",onClick:()=>n(!l),children:"Cambiar imagen"})]}),(0,d.jsx)(t.wT,{className:"text-primary fs-3 mt-3",children:e.name}),(0,d.jsx)("hr",{className:"text-secondary w-25"}),(0,d.jsxs)("div",{className:"d-flex mt-2",children:[(0,d.jsxs)("div",{className:"mx-1",children:[(0,d.jsx)("div",{children:(0,d.jsx)("p",{className:"text-end lh-sm fw-semibold text-muted",children:"Nombre:"})}),(0,d.jsx)("div",{children:(0,d.jsx)("p",{className:"text-end lh-sm fw-semibold text-muted",children:"Correo electr\xf3nico:"})}),(0,d.jsx)("div",{children:(0,d.jsx)("p",{className:"text-end lh-sm fw-semibold text-muted",children:"Departamento:"})}),(0,d.jsx)("div",{children:(0,d.jsx)("p",{className:"text-end lh-sm fw-semibold text-muted",children:"Puesto:"})}),(0,d.jsx)("div",{children:(0,d.jsx)("p",{className:"text-end lh-sm fw-semibold text-muted",children:"No. Nomina:"})})]}),(0,d.jsxs)("div",{className:"mx-1",children:[(0,d.jsx)("div",{children:(0,d.jsx)("p",{className:"text-start lh-sm fw-bold",children:e.name})}),(0,d.jsx)("div",{children:(0,d.jsx)("p",{className:"text-start lh-sm fw-bold",children:e.email})}),(0,d.jsx)("div",{children:(0,d.jsx)("p",{className:"text-start lh-sm fw-bold",children:e.department.name})}),(0,d.jsx)("div",{children:(0,d.jsx)("p",{className:"text-start lh-sm fw-bold",children:e.role.name})}),(0,d.jsx)("div",{children:(0,d.jsx)("p",{className:"text-start lh-sm fw-bold",children:e.payrollNumber})})]})]})]})}),(0,d.jsx)("div",{className:"w-25",children:(0,d.jsx)(t.u0,{children:(0,d.jsx)(t.Yj,{children:(0,d.jsx)(t.uE,{className:"w-100 p-3 text-white fw-normal",style:{backgroundColor:"#21274E"},onClick:()=>s(!a),children:"Cambiar contrase\xf1a"})})})})]}),a&&(0,d.jsx)(u.c,{visible:a,onClose:()=>{s(!1)},userData:e,visibleChangePassword:!0,fromProfile:!0}),(0,d.jsx)(m,{visible:l,onClose:()=>{n(!1)},userData:e})]})}},76:(e,a,s)=>{s.d(a,{q:()=>t});var t=["512 512","<polygon fill='var(--ci-primary-color, currentColor)' points='200.359 382.269 61.057 251.673 82.943 228.327 199.641 337.731 428.686 108.687 451.314 131.313 200.359 382.269' class='ci-primary'/>"]}}]);
//# sourceMappingURL=528.7b0866c3.chunk.js.map