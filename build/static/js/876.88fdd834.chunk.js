"use strict";(self.webpackChunkgasomax_client=self.webpackChunkgasomax_client||[]).push([[876],{7201:(e,s,a)=>{a.d(s,{Jw:()=>c,Tg:()=>h,a4:()=>d,aL:()=>l,iT:()=>r,mY:()=>n,mk:()=>p,uD:()=>u,uf:()=>o});var i=a(9779),t=a(9101);const o=e=>(e/1).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),r=e=>i.ou.fromISO(e).toLocaleString(i.ou.DATE_SHORT),n=e=>i.ou.fromISO(e).toLocaleString(i.ou.DATETIME_SHORT),l=function(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{inprogress:s?"Cotizaci\xf3nes enviadas":"Cotizaci\xf3nes disponibles",approved:"Cotizaci\xf3n aprobada",authorized:"Cotizaci\xf3n autorizada",ok:"Cotizaci\xf3n VoBo",sent:s?"Solicitud nueva":"Solicitud enviada",sentPay:"Enviada a pago",paid:"Pagado",rejected:"Cotizaci\xf3nes rechazadas"}[e]},c={inprogress:"#00FFFF",approved:"#00FF00",authorized:"#0000FF",ok:"#008000",sent:"#FFA500",sentPay:"#30AFD4",paid:"#800080",rejected:"#FF0000"},d={pending:"Pendiente de aprobaci\xf3n",approved:"Solicitud aprobada",paid:"Pagado",rejected:"Solicitud rechazada"},u={pending:"#FFA500",approved:"#00FF00",paid:"#800080",rejected:"#FF0000"},p={index:"Listar",show:"Ver",create:"Crear",edit:"Editar",delete:"Eliminar",reject:"Rechazar",pay:"Pagar",approve:"Aprobar",authorize:"Autorizar","authorize.minor.1000":"Autorizar < $1,000","authorize.mayor.1000":"Autorizar > $1,000","authorize.minor.5000":"Autorizar < $5,000","authorize.mayor.5000":"Autorizar > $5,000",modules:"Asignar modulos",permissions:"Asignar permisos","upload.quote":"Subir cotizaci\xf3nes"},h=(e,s)=>{const a=(0,t.v9)((e=>e.auth.permissions)),i=(0,t.v9)((e=>e.auth.modules)).find((s=>s.submodule===e));return!!i&&!!a.find((e=>e.submodule===i.submodule&&e.permission===s))}},1876:(e,s,a)=>{a.r(s),a.d(s,{default:()=>g});var i=a(2791),t=a(2937),o=a(4846),r=a(8723),n=a(9101),l=a(5294),c=a(591),d=a(6647);const u=(e,s,a)=>async i=>{try{const t=await l.Z.get("".concat(d.Z.instance.baseURL,"/api/pending/purchaseRequest?").concat(s,"=").concat(a,"&page=").concat(e),{headers:{...d.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});console.log(t.data),i({type:c.x0,payload:{...t.data,filters:{filter:s,value:a}}})}catch(t){i({type:c.xL,payload:{msg:t.response.statusText,status:t.response.status}})}};var p=a(7941),h=a(3896),x=a(7201),j=a(184);const m=e=>{let{visible:s,onClose:a,purchaseRequestDetailID:o,provider:r}=e;const u=(0,n.I0)(),[p,h]=(0,i.useState)(0),{balance:m,loadingBalance:v}=(0,n.v9)((e=>e.pendingPayments));return(0,i.useEffect)((()=>{var e;u((e=o,async s=>{try{const a=await l.Z.get("".concat(d.Z.instance.baseURL,"/api/balance/purchaseRequestDetail/").concat(e),{headers:{...d.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});s({type:c.Or,payload:a.data})}catch(a){s({type:c.xL,payload:{msg:a.response.statusText,status:a.response.status}})}}))}),[u,o]),(0,i.useEffect)((()=>{var e;m&&h(null===(e=m.find((e=>!e.purchase_detail_pending_id)))||void 0===e?void 0:e.totalAmount)}),[m]),(0,j.jsxs)(t.Tk,{visible:s,onClose:a,"aria-labelledby":"ModalForm",size:"xl",children:[(0,j.jsx)(t.p0,{onClose:a,children:(0,j.jsx)(t.fl,{id:"ModalForm",children:"Estado de cuenta"})}),(0,j.jsx)(t.sD,{children:v?(0,j.jsx)("div",{className:"d-flex justify-content-center",children:(0,j.jsx)(t.LQ,{color:"primary",variant:"grow"})}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(t.lx,{className:"mt-3",children:[(0,j.jsxs)("div",{className:"mb-3",children:[(0,j.jsx)(t.L8,{htmlFor:"provider",children:"Proveedor"}),(0,j.jsx)(t.jO,{type:"text",id:"provider",value:r,disabled:!0})]}),(0,j.jsxs)("div",{className:"mb-3",children:[(0,j.jsx)("p",{children:"Importe total"}),(0,j.jsxs)("h5",{id:"totalAmount",className:"fw-bold text-primary",children:["$",(0,x.uf)(p)]})]})]}),(0,j.jsxs)(t.Sx,{striped:!0,responsive:!0,children:[(0,j.jsx)(t.V,{children:(0,j.jsxs)(t.T6,{children:[(0,j.jsx)(t.is,{scope:"col",children:"Fecha solic."}),(0,j.jsx)(t.is,{scope:"col",children:"Fecha pago"}),(0,j.jsx)(t.is,{scope:"col",children:"Cargo"}),(0,j.jsx)(t.is,{scope:"col",children:"Concepto"}),(0,j.jsx)(t.is,{scope:"col",children:"Detalle"}),(0,j.jsx)(t.is,{scope:"col",children:"Pago"}),(0,j.jsx)(t.is,{scope:"col",children:"Saldo"})]})}),(0,j.jsx)(t.NR,{children:null===m||void 0===m?void 0:m.map((e=>(0,j.jsxs)(t.T6,{children:[(0,j.jsx)(t.NN,{children:(0,x.mY)(e.created_at)}),(0,j.jsx)(t.NN,{children:(0,x.iT)(e.paymentDate)}),(0,j.jsx)(t.NN,{children:e.quote.quote_concept.charge}),(0,j.jsx)(t.NN,{children:e.quote.quote_concept.concept}),(0,j.jsx)(t.NN,{children:e.title}),(0,j.jsxs)(t.NN,{children:["$",(0,x.uf)(e.paymentAmount)]}),(0,j.jsx)(t.NN,{children:e.balance<=0?"$"+(0,x.uf)((null===e||void 0===e?void 0:e.totalAmount)-(null===e||void 0===e?void 0:e.paymentAmount)):"$"+(0,x.uf)(e.balance)})]},e.id)))})]})]})}),(0,j.jsx)(t.Ym,{children:(0,j.jsx)(t.u5,{color:"secondary",onClick:a,children:"Cerrar"})})]})},v=e=>{let{data:s}=e;const[a,r]=(0,i.useState)(!1),[l,c]=(0,i.useState)(null),[d,u]=(0,i.useState)("");(0,n.I0)();return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(t.Sx,{striped:!0,responsive:!0,children:[(0,j.jsx)(t.V,{children:(0,j.jsxs)(t.T6,{children:[(0,j.jsx)(t.is,{scope:"col",children:"Proveedor"}),(0,j.jsx)(t.is,{scope:"col",children:"Solicitante"}),(0,j.jsx)(t.is,{scope:"col",children:"Cargo"}),(0,j.jsx)(t.is,{scope:"col",children:"Concepto"}),(0,j.jsx)(t.is,{scope:"col",children:"Titulo"}),(0,j.jsx)(t.is,{scope:"col",children:"Fecha solic."}),(0,j.jsx)(t.is,{scope:"col",children:"Saldo"}),(0,j.jsx)(t.is,{scope:"col",className:"text-center",children:"Opciones"})]})}),(0,j.jsx)(t.NR,{children:null===s||void 0===s?void 0:s.map((e=>(0,j.jsxs)(t.T6,{children:[(0,j.jsx)(t.NN,{children:e.quote.provider.name}),(0,j.jsx)(t.NN,{children:e.petitioner.name}),(0,j.jsx)(t.NN,{children:e.quote.quote_concept.charge}),(0,j.jsx)(t.NN,{children:e.quote.quote_concept.concept}),(0,j.jsx)(t.NN,{children:e.title}),(0,j.jsx)(t.NN,{children:(0,x.iT)(e.created_at)}),(0,j.jsxs)(t.NN,{children:["$",(0,x.uf)(e.balance)]}),(0,j.jsx)(t.NN,{className:"text-center overflow-visible",children:(0,j.jsxs)(t.w5,{variant:"dropdown",children:[(0,j.jsx)(t.SQ,{href:"#",color:"light",children:(0,j.jsx)(o.Z,{icon:h.t,title:"Opciones",size:"lg"})}),(0,j.jsx)(t.$H,{className:"position-fixed",children:(0,j.jsx)(t.$f,{style:{cursor:"pointer"},onClick:()=>{u(e.quote.provider.name),c(e.id),r(!a)},children:"Ver estado de cuenta"})})]})})]},e.id)))})]}),a&&(0,j.jsx)(m,{visible:a,onClose:()=>{r(!1),c(null),u("")},purchaseRequestDetailID:l,provider:d})]})},g=()=>{const[e,s]=(0,i.useState)("provider"),[a,l]=(0,i.useState)(""),[c,d]=(0,i.useState)(1),h=(0,n.I0)(),{currentPage:x,last_page:m,data:g}=(0,n.v9)((e=>e.pendingPayments.pendingPayments)),N=(0,n.v9)((e=>e.pendingPayments.loading));return(0,i.useEffect)((()=>{h(u(c,e,a))}),[c,h]),(0,i.useEffect)((()=>{x&&d(x)}),[x]),(0,j.jsxs)(t.xH,{children:[(0,j.jsxs)(t.bn,{className:"d-flex justify-content-between align-items-center",children:[(0,j.jsx)("h4",{children:"Listado de Pagos Pendientes"}),(0,j.jsx)("div",{className:"d-flex gap-2",children:(0,j.jsx)(t.u5,{color:"info",className:"text-light align-content-center d-flex",children:(0,j.jsx)(o.Z,{icon:r.j,size:"xl"})})})]}),(0,j.jsxs)(t.sl,{children:[(0,j.jsxs)(t.lx,{children:[(0,j.jsx)(t.L8,{children:"Filtros de busqueda"}),(0,j.jsxs)("div",{className:"mb-3 d-flex",children:[(0,j.jsx)("div",{className:"flex-fill me-2",children:(0,j.jsx)(t.LX,{value:e,onChange:e=>s(e.target.value),"aria-label":"caseFilter",options:[{label:"Proveedor",value:"provider"},{label:"Solicitante",value:"petitioner"}]})}),(0,j.jsx)("div",{className:"flex-fill me-2",children:"status"!==e?(0,j.jsx)(t.jO,{value:a,onChange:e=>l(e.target.value),type:"text",id:"provider",placeholder:"Ingresar texto"}):(0,j.jsx)(t.LX,{value:a,onChange:e=>l(e.target.value),"aria-label":"caseFilter",options:[{label:"Pendientes",value:"pending"},{label:"Revisadas",value:"review"},{label:"Aprobadas",value:"approved"},{label:"Rechazadas",value:"rejects"}]})})]}),(0,j.jsx)(t.u5,{type:"button",className:"text-light fw-semibold",onClick:()=>h(u(c,e,a)),children:"Buscar"})]}),N?(0,j.jsx)("div",{className:"d-flex justify-content-center",children:(0,j.jsx)(t.LQ,{color:"primary",variant:"grow"})}):(0,j.jsx)(v,{data:g})]}),(0,j.jsx)(t.Bt,{children:(0,j.jsx)(p.bD,{currentPage:c,lastPage:m,setCurrentPage:d})})]})}}}]);
//# sourceMappingURL=876.88fdd834.chunk.js.map