"use strict";(self.webpackChunkgasomax_client=self.webpackChunkgasomax_client||[]).push([[989],{8383:(e,t,a)=>{a.d(t,{BZ:()=>l,If:()=>c,Ps:()=>r,j4:()=>n,tt:()=>d});var s=a(5294),i=a(591),o=a(6647);const r=(e,t,a)=>async r=>{try{const l=await s.Z.get("".concat(o.Z.instance.baseURL,"/api/department?").concat(t,"=").concat(a,"&page=").concat(e),{headers:{...o.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});r({type:i.hf,payload:l.data})}catch(l){r({type:i.fm,payload:{msg:l.response.statusText,status:l.response.status}})}},l=(e,t)=>async a=>{try{const r=await s.Z.post("".concat(o.Z.instance.baseURL,"/api/department"),e,{headers:{...o.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});a({type:i.Wo,payload:r.data.data}),t(r.data)}catch(r){a({type:i.fm,payload:{msg:r.response.statusText,status:r.response.status}}),t({success:!1,message:r.message})}},n=(e,t,a)=>async r=>{try{const l=await s.Z.put("".concat(o.Z.instance.baseURL,"/api/department/").concat(t),e,{headers:{...o.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});r({type:i.aZ,payload:l.data.data}),a(l.data)}catch(l){r({type:i.fm,payload:{msg:l.response.statusText,status:l.response.status}}),a({success:!1,message:l.message})}},c=(e,t)=>async a=>{try{const r=await s.Z.delete("".concat(o.Z.instance.baseURL,"/api/department/").concat(e),{headers:{...o.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});a({type:i.k_,payload:e}),t(r.data)}catch(r){a({type:i.fm,payload:{msg:r.response.statusText,status:r.response.status}}),t({success:!1,message:r.message})}},d=()=>async e=>{try{const t=await s.Z.get("".concat(o.Z.instance.baseURL,"/api/select/department"),{headers:{...o.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});e({type:i.qN,payload:t.data})}catch(t){e({type:i.fm,payload:{msg:t.response.statusText,status:t.response.status}})}}},1232:(e,t,a)=>{a.d(t,{Az:()=>l,Fr:()=>u,J9:()=>r,P0:()=>n,dm:()=>c,i1:()=>d,j7:()=>p});var s=a(5294),i=a(591),o=a(6647);const r=(e,t,a)=>async r=>{try{const l=await s.Z.get("".concat(o.Z.instance.baseURL,"/api/provider?").concat(t,"=").concat(a,"&page=").concat(e),{headers:{...o.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});r({type:i.E3,payload:{...l.data,filters:{filter:t,value:a}}})}catch(l){r({type:i.Q_,payload:{msg:l.response.statusText,status:l.response.status}})}},l=(e,t)=>async a=>{try{const r=await s.Z.post("".concat(o.Z.instance.baseURL,"/api/provider"),e,{headers:{...o.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});a({type:i.Tm,payload:r.data.data}),t(r.data)}catch(r){a({type:i.Q_,payload:{msg:r.response.statusText,status:r.response.status}}),t({success:!1,message:r.message})}},n=(e,t,a)=>async r=>{try{const l=await s.Z.put("".concat(o.Z.instance.baseURL,"/api/provider/").concat(t),e,{headers:{...o.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});r({type:i.rE,payload:l.data.data}),a(l.data)}catch(l){r({type:i.Q_,payload:{msg:l.response.statusText,status:l.response.status}}),a({success:!1,message:l.message})}},c=(e,t)=>async a=>{try{const r=await s.Z.delete("".concat(o.Z.instance.baseURL,"/api/provider/").concat(e),{headers:{...o.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});a({type:i.Z4,payload:e}),t(r.data)}catch(r){a({type:i.Q_,payload:{msg:r.response.statusText,status:r.response.status}}),t({success:!1,message:r.message})}},d=(e,t)=>async a=>{try{const r=await s.Z.get("".concat(o.Z.instance.baseURL,"/api/excel/provider/export?").concat(e,"=").concat(t),{headers:{...o.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")},responseType:"blob"}),l=window.URL.createObjectURL(new Blob([r.data])),n=document.createElement("a");n.href=l,n.setAttribute("download","Proveedores.xlsx"),document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(l),a({type:i.Nx})}catch(r){a({type:i.Q_,payload:{msg:r.response.statusText,status:r.response.status}})}},u=()=>async e=>{try{const t=await s.Z.get("".concat(o.Z.instance.baseURL,"/api/select/provider"),{headers:{...o.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});e({type:i.tb,payload:t.data})}catch(t){e({type:i.Q_,payload:{msg:t.response.statusText,status:t.response.status}})}},p=e=>async t=>{try{const a=await s.Z.get("".concat(o.Z.instance.baseURL,"/api/select/account/provider/").concat(e),{headers:{...o.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});t({type:i.e4,payload:a.data})}catch(a){t({type:i.Q_,payload:{msg:a.response.statusText,status:a.response.status}})}}},7201:(e,t,a)=>{a.d(t,{Jw:()=>c,Tg:()=>h,a4:()=>d,aL:()=>n,iT:()=>r,mY:()=>l,mk:()=>p,uD:()=>u,uf:()=>o});var s=a(9779),i=a(9101);const o=e=>(e/1).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),r=e=>s.ou.fromISO(e).toLocaleString(s.ou.DATE_SHORT),l=e=>s.ou.fromISO(e).toLocaleString(s.ou.DATETIME_SHORT),n=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{inprogress:t?"Cotizaci\xf3nes enviadas":"Cotizaci\xf3nes disponibles",approved:"Cotizaci\xf3n aprobada",authorized:"Cotizaci\xf3n autorizada",ok:"Cotizaci\xf3n VoBo",sent:t?"Solicitud nueva":"Solicitud enviada",sentPay:"Enviada a pago",paid:"Pagado",rejected:"Cotizaci\xf3nes rechazadas"}[e]},c={inprogress:"#00FFFF",approved:"#00FF00",authorized:"#0000FF",ok:"#008000",sent:"#FFA500",sentPay:"#30AFD4",paid:"#800080",rejected:"#FF0000"},d={pending:"Pendiente de aprobaci\xf3n",approved:"Solicitud aprobada",paid:"Pagado",rejected:"Solicitud rechazada"},u={pending:"#FFA500",approved:"#00FF00",paid:"#800080",rejected:"#FF0000"},p={index:"Listar",show:"Ver",create:"Crear",edit:"Editar",delete:"Eliminar",reject:"Rechazar",pay:"Pagar",approve:"Aprobar",authorize:"Autorizar","authorize.minor.1000":"Autorizar < $1,000","authorize.mayor.1000":"Autorizar > $1,000","authorize.minor.5000":"Autorizar < $5,000","authorize.mayor.5000":"Autorizar > $5,000",modules:"Asignar modulos",permissions:"Asignar permisos","upload.quote":"Subir cotizaci\xf3nes"},h=(e,t)=>{const a=(0,i.v9)((e=>e.auth.permissions)),s=(0,i.v9)((e=>e.auth.modules)).find((t=>t.submodule===e));return!!s&&!!a.find((e=>e.submodule===s.submodule&&e.permission===t))}},1732:(e,t,a)=>{a.d(t,{K:()=>s});const s={provider:"provider",purchaseRequest:"purchaseRequest",quote:"quote"}},2989:(e,t,a)=>{a.r(t),a.d(t,{default:()=>w});var s=a(2791),i=a(2937),o=a(4846),r=a(8030),l=a(8723),n=a(9101),c=a(574),d=a(7201),u=a(7462),p=a(1830),h=a.n(p),v=a(1232),m=a(4166),x=a(9463),g=a(1732),j=a(5294),f=a(591),y=a(6647);var b=a(9293);var S=a(184);const N=e=>{var t,a;let{visible:o,onClose:r,quoteID:l}=e;const u=(0,n.I0)(),[p,h]=(0,s.useState)(""),{observations:v,loadingObservations:x}=(0,n.v9)((e=>e.quote)),g=null===(t=(0,n.v9)((e=>e.auth.user)))||void 0===t||null===(a=t.data)||void 0===a?void 0:a.user;(0,s.useEffect)((()=>{u((0,b.JA)(l))}),[u,l]);return(0,S.jsxs)(i.Tk,{visible:o,onClose:r,"aria-labelledby":"ModalObsForm",keyboard:!1,backdrop:"static",children:[(0,S.jsx)(i.p0,{onClose:r,children:(0,S.jsx)(i.fl,{id:"ModalObsForm",children:"Observaciones"})}),(0,S.jsx)(i.sD,{children:x?(0,S.jsx)("div",{className:"d-flex justify-content-center",children:(0,S.jsx)(i.LQ,{color:"primary",variant:"grow"})}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(i.Sx,{striped:!0,responsive:!0,children:[(0,S.jsx)(i.V,{children:(0,S.jsxs)(i.T6,{children:[(0,S.jsx)(i.is,{scope:"col",children:"Usuario"}),(0,S.jsx)(i.is,{scope:"col",children:"Observaci\xf3n"}),(0,S.jsx)(i.is,{scope:"col",children:"Fecha"})]})}),(0,S.jsx)(i.NR,{children:null===v||void 0===v?void 0:v.map((e=>(0,S.jsxs)(i.T6,{children:[(0,S.jsx)(i.NN,{children:e.user.name}),(0,S.jsx)(i.NN,{children:e.message}),(0,S.jsx)(i.NN,{children:(0,d.mY)(e.created_at)})]},e.id)))})]}),(0,S.jsx)(i.lx,{className:"mt-3",children:(0,S.jsx)("div",{className:"mb-3",children:(0,S.jsx)(i.PB,{id:"obs",label:"Observaci\xf3n",rows:2,value:p,onChange:e=>h(e.target.value)})})})]})}),(0,S.jsxs)(i.Ym,{children:[(0,S.jsx)(i.u5,{color:"secondary",onClick:r,children:"Cerrar"}),(0,S.jsx)(i.u5,{color:"primary",className:"text-light fw-semibold",onClick:e=>{e.preventDefault();try{if(!p||""===p)return void u((0,m.f)((0,c.Kv)({msg:"Escribe un mensaje",title:"Error",type:"error"})));let e={message:p,user_id:g.id,quote_id:l};u((0,b.Bk)(e,(e=>{e.success?u((0,m.f)((0,c.Kv)({msg:"Mensaje guardado con exito",title:"Observacion",type:"success"}))):u((0,m.f)((0,c.Kv)({msg:"Ha ocurrido un error",title:"Observacion",type:"error"})))})))}catch(t){console.log(t)}h("")},children:"Guardar"})]})]})};var C=a(8383);const z=e=>{var t,a,l;let{visible:p,onClose:z,quoteData:k,view:A}=e;const[w,P]=(0,s.useState)(1),[T,L]=(0,s.useState)(""),[Z,E]=(0,s.useState)(""),[R,q]=(0,s.useState)(""),[F,I]=(0,s.useState)([]),[B,_]=(0,s.useState)(""),[O,D]=(0,s.useState)(""),[Q,U]=(0,s.useState)(""),[K,M]=(0,s.useState)([]),[H,V]=(0,s.useState)([]),[X,$]=(0,s.useState)(null),[G,J]=(0,s.useState)(""),[W,Y]=(0,s.useState)(0),[ee,te]=(0,s.useState)([]),[ae,se]=(0,s.useState)([]),[ie,oe]=(0,s.useState)(""),[re,le]=(0,s.useState)(""),[ne,ce]=(0,s.useState)(""),[de,ue]=(0,s.useState)(""),[pe,he]=(0,s.useState)(!1),[ve,me]=(0,s.useState)(0),[xe,ge]=(0,s.useState)(""),[je,fe]=(0,s.useState)(""),[ye,be]=(0,s.useState)(""),[Se,Ne]=(0,s.useState)(0),[Ce,ze]=(0,s.useState)(""),[ke,Ae]=(0,s.useState)(!1),[we,Pe]=(0,s.useState)(!1),[Te,Le]=(0,s.useState)(!1),[Ze,Ee]=(0,s.useState)(""),Re=(0,n.I0)(),{progress:qe}=(0,n.v9)((e=>e.file)),{providers:Fe,accounts:Ie}=(0,n.v9)((e=>e.provider)),Be=(0,d.Tg)("quotes","pay"),_e=((0,d.Tg)("quotes","reject"),(0,d.Tg)("quotes","approve")),Oe=(0,d.Tg)("quotes","authorize.minor.5000"),De=(0,d.Tg)("quotes","authorize.mayor.5000"),Qe=(0,d.Tg)("quotes","upload.quote"),Ue=(0,s.useRef)(),Ke=(0,s.useRef)(),Me=(0,s.useRef)(),He=null===(t=(0,n.v9)((e=>e.auth.user)))||void 0===t||null===(a=t.data)||void 0===a?void 0:a.user,Ve=(0,n.v9)((e=>e.quoteConcept.charges)),Xe=(0,n.v9)((e=>e.quoteConcept.concepts)),$e=(0,n.v9)((e=>e.department.departments)),Ge=(0,n.v9)((e=>e.unit.lines)),Je=(0,n.v9)((e=>e.unit.units)),{quotes:We,filters:Ye,progress:et}=(0,n.v9)((e=>e.quote)),[tt,at]=(0,s.useState)(!1);(0,s.useEffect)((()=>{Re((0,v.Fr)())}),[Re]),(0,s.useEffect)((()=>{Re((async e=>{try{const t=await j.Z.get("".concat(y.Z.instance.baseURL,"/api/select/line"),{headers:{...y.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});e({type:f.wH,payload:t.data})}catch(t){e({type:f.Pz,payload:{msg:t.response.statusText,status:t.response.status}})}})),Re((0,C.tt)())}),[Re]),(0,s.useEffect)((()=>{if(!$e)return;let e=["NOMINA","TESORERIA","CONTRALORIA","CARWASH","RESTAURANTE","MAXSTORE"],t=$e.data.filter((t=>!e.includes(t.name)));I(t)}),[$e]),(0,s.useEffect)((()=>{re&&Re((e=>async t=>{try{const a=await j.Z.get("".concat(y.Z.instance.baseURL,"/api/select/unit/line?line=").concat(e),{headers:{...y.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});t({type:f._2,payload:a.data})}catch(a){t({type:f.Pz,payload:{msg:a.response.statusText,status:a.response.status}})}})(re))}),[Re,re]),(0,s.useEffect)((()=>{B&&Re((e=>async t=>{try{const a=await j.Z.get("".concat(y.Z.instance.baseURL,"/api/select/charge?department_id=").concat(e),{headers:{...y.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});t({type:f.rP,payload:a.data})}catch(a){t({type:f.A6,payload:{msg:a.response.statusText,status:a.response.status}})}})(B))}),[Re,B]),(0,s.useEffect)((()=>{R&&Re((e=>async t=>{try{const a=await j.Z.get("".concat(y.Z.instance.baseURL,"/api/select/concept/charge?charge=").concat(e),{headers:{...y.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});t({type:f.Ru,payload:a.data})}catch(a){t({type:f.A6,payload:{msg:a.response.statusText,status:a.response.status}})}})(R))}),[Re,R]),(0,s.useEffect)((()=>{xe&&Re((0,v.j7)(xe))}),[Re,xe]),(0,s.useEffect)((()=>{let e=[];for(let t=0;t<W;t++)e.push(t);se(e)}),[W]),(0,s.useEffect)((()=>{we&&Le(!1)}),[we]),(0,s.useEffect)((()=>{Te&&Pe(!1)}),[Te]),(0,s.useEffect)((()=>{var e;if(k&&(L(k.id),E(k.title),U(k.description),_(k.quote_concept.department_id),q(k.quote_concept.charge),D(k.quote_concept.id),le(k.line),ce(k.unit),Y(k.numProviders),te(JSON.parse(k.recommendedProviders)),M(k.images),V(k.files),ue(null===(e=k.files.find((e=>e.selectedQuoteFile)))||void 0===e?void 0:e.id),he(k.rejectQuotes),me(k.approvedAmount),Pe(k.onePayment),Le(k.multiplePayments),oe(k.suggestedProvider),ge(k.provider_id),fe(k.provider_account_id),Ae(k.paymentWithoutInvoice),!k.paymentWithoutInvoice)){var t,a;let e=null===k||void 0===k||null===(t=k.payments)||void 0===t||null===(a=t.find((e=>!e.purchase_request_pending_id&&e.fromQuote)))||void 0===a?void 0:a.files,s=null===e||void 0===e?void 0:e.find((e=>e.tag===u.O.invoice));$(s)}}),[k]);const st=(0,s.useCallback)((()=>{M([])}),[]),it=e=>{e.preventDefault();try{if(!Z||""===Z)return void Re((0,m.f)((0,c.Kv)({msg:"Falta agregar un titulo",type:"error"})));let e;pe?e="rejected":ve>0&&(e="approved");let t={title:Z,provider_id:xe,quote_concept_id:O,description:Q,numProviders:W,recommendedProviders:JSON.stringify(ee),line:re,unit:ne,rejectQuotes:pe,approvedAmount:ve,observation:Ze,onePayment:we,multiplePayments:Te,suggestedProvider:ie,status:e,selectedQuoteID:de};Re(k?(0,b.xd)(t,T,(e=>{e.success?(Re((0,m.f)((0,c.Kv)({msg:"Solicitud actualizada correctamente.",title:"Solicitudes de compra",type:"success"}))),ot(e.data)):Re((0,m.f)((0,c.Kv)({msg:"Ha ocurrido un error.",title:"Solicitudes de compra",type:"error"})))})):(0,b.KP)({...t,petitioner_id:He.id},(e=>{e.success?(Re((0,m.f)((0,c.Kv)({msg:"Solicitud realizada correctamente.",title:"Solicitudes de compra",type:"success"}))),ot(e.data)):Re((0,m.f)((0,c.Kv)({msg:"Ha ocurrido un error.",title:"Solicitudes de compra",type:"error"})))})))}catch(t){console.log(t)}},ot=e=>{K.length>0?Promise.all(K.map((t=>{if(!t.id)return Re((0,x.cT)(t.file,t.tag,null,e.id,g.K.quote,(()=>{})));z(),st()}))).finally((()=>{Re((0,b.QR)(We.current_page,Ye.filter,Ye.value))})):(z(),st())},rt=e=>{try{Re((0,x.cT)(X.file,X.tag,null,e.id,g.K.purchaseRequest,(()=>{Re((0,b.QR)(We.current_page,Ye.filter,Ye.value))})))}catch(t){console.log(t)}},lt=e=>{e.preventDefault();try{h().fire({title:"\xbfEsta seguro de autorizar?",showCancelButton:!0,confirmButtonText:"Autorizar"}).then((e=>{e.isConfirmed&&Re((0,b.xd)({status:"authorized"},T,(e=>{e.success?(Re((0,m.f)((0,c.Kv)({msg:"Solicitud actualizada correctamente.",title:"Solicitudes de compra",type:"success"}))),z(),st(),h().fire("Autorizado!","","success")):Re((0,m.f)((0,c.Kv)({msg:"Ha ocurrido un error.",title:"Solicitudes de compra",type:"error"})))})))}))}catch(t){console.log(t)}};return(0,s.useEffect)((()=>{100===qe&&setTimeout((()=>{z(),st()}),3e3)}),[qe,z,st]),(0,s.useEffect)((()=>{100===et&&setTimeout((()=>{z(),st()}),3e3)}),[et,z,st]),(0,s.useEffect)((()=>{pe&&(me(0),ue(""))}),[pe]),(0,s.useEffect)((()=>{var e;if(!de)return void me(0);let t=null===k||void 0===k||null===(e=k.files)||void 0===e?void 0:e.find((e=>e.id===de));t&&(me(t.amount),he(!1))}),[de,k]),(0,s.useEffect)((()=>{A&&"paid"===k.status||ke&&($(null),Me.current.value="")}),[ke,k,A]),(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(i.Tk,{visible:p,onClose:z,"aria-labelledby":"ModalForm",size:"xl",scrollable:!0,backdrop:"static",children:[(0,S.jsx)(i.p0,{onClose:z,children:(0,S.jsx)(i.fl,{id:"ModalForm",children:k?"".concat(A?"":"Editar"," Solicitud ").concat(k.title):"Nueva Solicitud"})}),(0,S.jsxs)(i.sD,{children:[K.length>0&&K.some((e=>!e.id))&&(0,S.jsxs)(i.yI,{value:qe,className:"mb-2",children:[qe,"%"]}),H.length>0&&H.some((e=>!e.id))&&(0,S.jsxs)(i.yI,{value:et,className:"mb-2",children:[et,"%"]}),X&&!(null!==X&&void 0!==X&&X.id)&&(0,S.jsxs)(i.yI,{value:qe,className:"mb-2",children:[qe,"%"]}),(0,S.jsxs)(i.n2,{variant:"tabs",role:"tablist",className:"mt-1",children:[(0,S.jsx)(i.U6,{role:"presentation",children:(0,S.jsx)(i.AQ,{active:1===w,component:"button",role:"tab","aria-controls":"data-tab-pane","aria-selected":1===w,onClick:()=>P(1),children:"General"})}),A&&(0,S.jsx)(i.U6,{role:"presentation",children:(0,S.jsx)(i.AQ,{active:2===w,component:"button",role:"tab","aria-controls":"account-tab-pane","aria-selected":2===w,onClick:()=>P(2),children:"Cotizaci\xf3nes"})}),(A&&"authorized"===k.status&&Be||A&&"sentPay"===k.status||A&&"paid"===k.status)&&(0,S.jsx)(i.U6,{role:"presentation",children:(0,S.jsx)(i.AQ,{active:3===w,component:"button",role:"tab","aria-controls":"account-tab-pane","aria-selected":3===w,onClick:()=>P(3),children:"Selecci\xf3n de cuenta y proveedor"})})]}),(0,S.jsxs)(i.gr,{children:[(0,S.jsx)(i.IA,{role:"tabpanel","aria-labelledby":"data-tab-pane",visible:1===w,children:(0,S.jsxs)(i.lx,{className:"mt-3",children:[(0,S.jsxs)("div",{className:"mb-3",children:[(0,S.jsx)(i.L8,{children:"T\xedtulo"}),(0,S.jsx)(i.jO,{type:"text",id:"title",placeholder:"T\xedtulo de la solicitud",value:Z,onChange:e=>E(e.target.value),disabled:A})]}),(0,S.jsxs)("div",{className:"mb-3 d-flex",children:[(0,S.jsxs)("div",{className:"flex-md-fill me-2",children:[(0,S.jsx)(i.L8,{children:"Departamento"}),(0,S.jsxs)(i.LX,{"aria-label":"department",onChange:e=>_(e.target.value),value:B,disabled:A,children:[(0,S.jsx)("option",{value:"",children:"Selecciona..."}),F.map((e=>{let{id:t,name:a}=e;return(0,S.jsx)("option",{value:t,children:a},a)}))]})]}),(0,S.jsxs)("div",{className:"flex-md-fill me-2",children:[(0,S.jsx)(i.L8,{children:"Cargo"}),(0,S.jsxs)(i.LX,{"aria-label":"charge",onChange:e=>q(e.target.value),value:R,disabled:A,children:[(0,S.jsx)("option",{value:"",children:"Selecciona..."}),Ve.map((e=>{let{charge:t}=e;return(0,S.jsx)("option",{value:t,children:t},t)}))]})]}),(0,S.jsxs)("div",{className:"flex-md-fill me-2",children:[(0,S.jsx)(i.L8,{children:"Concepto"}),(0,S.jsxs)(i.LX,{"aria-label":"concept",onChange:e=>D(e.target.value),value:O,disabled:A,children:[(0,S.jsx)("option",{value:"",children:"Selecciona..."}),Xe.data.map((e=>{let{id:t,concept:a}=e;return(0,S.jsx)("option",{value:t,children:a},t)}))]})]})]}),(0,S.jsx)("div",{className:"mb-3",children:(0,S.jsx)(i.PB,{id:"desc",label:"Descripci\xf3n ",rows:2,value:Q,onChange:e=>U(e.target.value),disabled:A})}),!A&&(0,S.jsxs)("div",{className:"mb-3",children:[(0,S.jsxs)(i.L8,{children:["Sube ",(0,S.jsx)("b",{children:"im\xe1genes"})," para la solicitud (opcional)"]}),(0,S.jsx)(i.jO,{ref:Ue,type:"file",id:"imgFile",onChange:e=>{if(!e.target.files[0])return;let t={localName:e.target.files[0].name,file:e.target.files[0]};Ue.current.value&&(M([...K,{...t,tag:u.O.img}]),Ue.current.value="")},accept:"image/*",text:"Archivos permitidos jpg, png, jpeg (10 MB)"})]}),(0,S.jsx)("div",{className:"mb-3 d-flex",children:K.map(((e,t)=>(0,S.jsx)(c.sZ,{file:e,onDelete:a=>e.id?M(K.filter((e=>e.id!==a))):M(K.filter(((e,a)=>t!==a))),viewMode:A},e.tag)))}),(0,S.jsx)("div",{className:"mb-3",children:(0,S.jsx)(i.EC,{id:"onePayment",label:"Pago en una sola exhibici\xf3n",checked:we,onChange:e=>Pe(e.target.checked),disabled:A})}),(0,S.jsx)("div",{className:"mb-3",children:(0,S.jsx)(i.EC,{id:"multiplePayments",label:"M\xfaltiples pagos",checked:Te,onChange:e=>Le(e.target.checked),disabled:A})}),(0,S.jsxs)("div",{className:"mb-3 d-flex",children:[(0,S.jsxs)("div",{className:"flex-fill",children:[(0,S.jsx)(i.L8,{children:"Giro"}),(0,S.jsxs)(i.LX,{"aria-label":"line",onChange:e=>le(e.target.value),value:re,disabled:A,children:[(0,S.jsx)("option",{value:"",children:"Selecciona..."}),Ge.map((e=>(0,S.jsx)("option",{value:e.line,children:e.line},e.line)))]})]}),(0,S.jsxs)("div",{className:"flex-fill mx-2",children:[(0,S.jsx)(i.L8,{children:"Unidad"}),(0,S.jsxs)(i.LX,{"aria-label":"unit",onChange:e=>ce(e.target.value),value:ne,disabled:A,children:[(0,S.jsx)("option",{value:"",children:"Selecciona..."}),Je.data.map((e=>{let{id:t,unit:a}=e;return(0,S.jsx)("option",{value:a,children:a},t)}))]})]}),(0,S.jsxs)("div",{className:"flex-fill",children:[(0,S.jsx)(i.L8,{htmlFor:"recommendedProviders",children:"Cotizaci\xf3nes requeridas"}),(0,S.jsx)(i.jO,{type:"number",id:"recommendedProviders",placeholder:"No Cotizaci\xf3nes",onChange:e=>Y(e.target.value),value:W,max:5,min:0,disabled:A})]})]}),ae.map(((e,t)=>(0,S.jsxs)("div",{className:"mb-3",children:[(0,S.jsxs)(i.L8,{children:["Proveedor recomendado ",e+1]}),(0,S.jsxs)(i.LX,{"aria-label":"charge",onChange:e=>((e,t)=>{if(""===e.target.value)return void te(ee.filter(((e,a)=>a!==t)));let a=[...ee];a[t]=e.target.value?e.target.value:"",te(a)})(e,t),value:ee[t],disabled:A,children:[(0,S.jsx)("option",{value:"",children:"Selecciona..."}),Fe.data.map((e=>{let{id:t,name:a}=e;return(0,S.jsx)("option",{value:a,children:a},t)}))]})]},e))),W>0&&(0,S.jsxs)("div",{className:"mb-3",children:[(0,S.jsx)(i.L8,{children:"Proveedor sugerido"}),(0,S.jsx)(i.jO,{type:"text",id:"suggestedProvider",placeholder:"Proveedor sugerido",value:ie,onChange:e=>oe(e.target.value),disabled:A})]})]})}),(0,S.jsx)(i.IA,{role:"tabpanel","aria-labelledby":"data-tab-pane",visible:2===w,children:(0,S.jsxs)(i.lx,{className:"mt-3",children:[Qe&&"authorized"!==k.status&&"approved"!==k.status&&"sentPay"!==k.status&&"paid"!==k.status&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(i.L8,{className:"fs-5",children:["A\xf1ade las ",(0,S.jsx)("b",{children:"Cotizaci\xf3nes"})," para la solicitud"]}),(0,S.jsx)("div",{className:"mb-3",children:(0,S.jsx)(i.jO,{ref:Ke,type:"file",id:"quoteFile",text:"Archivos permitidos jpg, pdf, png, xlxs (10 MB)"})}),(0,S.jsxs)("div",{className:"d-flex mb-3",children:[(0,S.jsxs)("div",{className:"flex-fill",children:[(0,S.jsx)(i.L8,{children:"Proveedor(*)"}),(0,S.jsx)(i.jO,{type:"text",id:"quoteProvider",placeholder:"Proveedor",value:ye,onChange:e=>be(e.target.value)})]}),(0,S.jsxs)("div",{className:"flex-fill mx-2",children:[(0,S.jsx)(i.L8,{children:"Monto(*)"}),(0,S.jsx)(i.jO,{type:"number",id:"amount",placeholder:"0",value:Se,onChange:e=>Ne(e.target.value)})]}),(0,S.jsxs)("div",{className:"flex-fill",children:[(0,S.jsx)(i.L8,{children:"Tiempo de entrega(*)"}),(0,S.jsx)(i.jO,{type:"date",id:"deliveryDate",value:Ce,onChange:e=>ze(e.target.value)})]})]}),(0,S.jsx)("div",{className:"mb-3",children:(0,S.jsx)(i.PB,{id:"desc",label:"Descripci\xf3n(*)",rows:2,value:G,onChange:e=>J(e.target.value)})}),(0,S.jsxs)(i.u5,{color:"primary",className:"text-light fw-semibold me-2",onClick:()=>{Ke.current.value?ye?Se?Ce?G?Ke.current.value&&(V([...H,{localName:Ke.current.files[0].name,file:Ke.current.files[0],tag:u.O.quotation,description:G,provider:ye,amount:Se,deliveryDate:Ce}]),Ke.current.value="",J(""),be(""),Ne(0),ze("")):alert("Deja una breve descripci\xf3n"):alert("Selecciona fecha de entrega"):alert("Escribe un monto"):alert("Escribe un proveedor"):alert("Carga una cotizaci\xf3n")},children:[(0,S.jsx)(o.Z,{icon:r.q,className:"me-1"}),"A\xf1adir a la solicitud"]})]}),H.length>0?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(i.Sx,{striped:!0,responsive:!0,children:[(0,S.jsx)(i.V,{children:(0,S.jsxs)(i.T6,{children:[(0,S.jsx)(i.is,{scope:"col",children:"Datos"}),(0,S.jsx)(i.is,{scope:"col",children:"Descripci\xf3n"}),(0,S.jsx)(i.is,{scope:"col",children:"Archivo Cotizaci\xf3n"}),(_e||Oe||De||Be&&"approved"===k.status||Be&&"authorized"===k.status||Be&&"sentPay"===k.status||A&&"paid"===k.status)&&(0,S.jsx)(i.is,{scope:"col",className:"text-center",children:"Aprobada"})]})}),(0,S.jsx)(i.NR,{children:H.map(((e,t)=>(0,S.jsxs)(i.T6,{children:[(0,S.jsxs)(i.NN,{children:[(0,S.jsxs)("p",{children:[(0,S.jsx)("b",{children:"Monto: "}),"$",(0,d.uf)(e.amount)]}),(0,S.jsxs)("p",{children:[(0,S.jsx)("b",{children:"Proveedor: "})," ",e.provider]}),(0,S.jsxs)("p",{children:[(0,S.jsx)("b",{children:"Tiempo de entrega: "})," ",e.deliveryDate]})]}),(0,S.jsx)(i.NN,{children:e.description}),(0,S.jsx)(i.NN,{children:(0,S.jsx)(c.sZ,{file:e,quoteFile:!0,onDelete:a=>e.id?V(H.filter((e=>e.id!==a))):V(H.filter(((e,a)=>t!==a))),viewMode:A&&!Qe||A&&"approved"===k.status||A&&"authorized"===k.status||A&&"sentPay"===k.status||A&&"paid"===k.status},e.name)}),(_e||Oe||De||Be&&"approved"===k.status||Be&&"authorized"===k.status||Be&&"sentPay"===k.status||A&&"paid"===k.status)&&(0,S.jsx)(i.NN,{className:"text-center",children:(0,S.jsx)(i.EC,{id:"selectedQuoteID",checked:e.id===de,onChange:t=>{t.target.checked?ue(e.id):ue("")},disabled:"rejected"===(null===k||void 0===k?void 0:k.status)&&k.rejectQuotes||"approved"===(null===k||void 0===k?void 0:k.status)||"ok"===(null===k||void 0===k?void 0:k.status)||"authorized"===(null===k||void 0===k?void 0:k.status)||"sentPay"===(null===k||void 0===k?void 0:k.status)||"paid"===(null===k||void 0===k?void 0:k.status)})})]},e.name)))})]}),A&&(_e||"approved"===k.status||"ok"===k.status||"authorized"===k.status||"sentPay"===k.status||"paid"===k.status)&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{className:"mb-3",children:(0,S.jsx)(i.EC,{id:"rejectQuotes",label:"Se descartan todas las cotizaci\xf3nes",checked:pe,onChange:e=>he(e.target.checked),disabled:"rejected"===(null===k||void 0===k?void 0:k.status)&&k.rejectQuotes||"approved"===(null===k||void 0===k?void 0:k.status)||"ok"===(null===k||void 0===k?void 0:k.status)||"authorized"===(null===k||void 0===k?void 0:k.status)||"sentPay"===(null===k||void 0===k?void 0:k.status)||"paid"===(null===k||void 0===k?void 0:k.status)})}),(0,S.jsxs)("div",{className:"mb-3",children:[(0,S.jsx)(i.L8,{htmlFor:"approvedAmount",children:"Monto de cotizaci\xf3n aprobada ($)"}),(0,S.jsx)(i.jO,{type:"number",id:"approvedAmount",placeholder:"Importe",onChange:e=>me(e.target.value),value:ve,disabled:pe||"approved"===(null===k||void 0===k?void 0:k.status)||"ok"===(null===k||void 0===k?void 0:k.status)||"authorized"===(null===k||void 0===k?void 0:k.status)||"sentPay"===(null===k||void 0===k?void 0:k.status)||"paid"===(null===k||void 0===k?void 0:k.status)})]}),"rejected"===(null===k||void 0===k?void 0:k.status)||"approved"===(null===k||void 0===k?void 0:k.status)||"ok"===(null===k||void 0===k?void 0:k.status)||"authorized"===(null===k||void 0===k?void 0:k.status)||"sentPay"===(null===k||void 0===k?void 0:k.status)||"paid"===(null===k||void 0===k?void 0:k.status)?(0,S.jsx)(i.u5,{color:"primary",className:"text-white",onClick:()=>at(!0),children:"Ver observaciones"}):(0,S.jsx)("div",{className:"mb-3",children:(0,S.jsx)(i.PB,{id:"obs",label:"Observaci\xf3n",rows:2,value:Ze,onChange:e=>Ee(e.target.value)})})]})]}):!Qe&&(0,S.jsx)("h3",{className:"text-center text-primary font-monospace",children:"No hay cotizaci\xf3nes disponibles"})]})}),(0,S.jsx)(i.IA,{role:"tabpanel","aria-labelledby":"data-tab-pane",visible:3===w,children:(0,S.jsxs)(i.lx,{className:"mt-3",children:[(0,S.jsxs)("div",{className:"mb-3 d-flex",children:[(0,S.jsxs)("div",{className:"flex-md-fill me-2",children:[(0,S.jsx)(i.L8,{children:"Proveedor(*)"}),(0,S.jsxs)(i.LX,{"aria-label":"provider",onChange:e=>ge(e.target.value),value:xe,disabled:"sentPay"===(null===k||void 0===k?void 0:k.status)||"paid"===(null===k||void 0===k?void 0:k.status),children:[(0,S.jsx)("option",{value:"",children:"Selecciona..."}),Fe.data.map((e=>{let{id:t,name:a}=e;return(0,S.jsx)("option",{value:t,children:a},t)}))]})]}),(0,S.jsxs)("div",{className:"flex-md-fill me-2",children:[(0,S.jsx)(i.L8,{children:"Cuenta(*)"}),(0,S.jsxs)(i.LX,{"aria-label":"providerAccount",onChange:e=>fe(e.target.value),value:je,disabled:"sentPay"===(null===k||void 0===k?void 0:k.status)||"paid"===(null===k||void 0===k?void 0:k.status),children:[(0,S.jsx)("option",{value:"",children:"Selecciona..."}),null===Ie||void 0===Ie||null===(l=Ie.data)||void 0===l?void 0:l.map((e=>{let{id:t,clabe:a,bank:s}=e;return(0,S.jsxs)("option",{value:t,children:[s.name," - ",a]},t)}))]})]})]}),A&&"authorized"===k.status&&Be&&(0,S.jsxs)("div",{className:"mb-3",children:[(0,S.jsxs)(i.L8,{children:["Sube la ",(0,S.jsx)("b",{children:"factura"})," para la solicitud de pago"]}),(0,S.jsx)(i.jO,{ref:Me,type:"file",id:"invoiceFile",onChange:e=>$({tag:u.O.invoice,file:e.target.files[0],localName:e.target.files[0].name}),text:"Archivos permitidos jpg, pdf, jpeg (10 MB)",disabled:ke})]}),X&&(0,S.jsx)("div",{className:"mb-3 d-flex",children:(0,S.jsx)(c.sZ,{file:X,onDelete:e=>{$(null),Me.current.value=""},viewMode:null===X||void 0===X?void 0:X.id})}),(0,S.jsx)("div",{className:"mb-3",children:(0,S.jsx)(i.EC,{id:"paymentWithoutInvoice",label:"Tramitar pago sin factura",checked:ke,onChange:e=>Ae(e.target.checked),disabled:"sentPay"===(null===k||void 0===k?void 0:k.status)||"paid"===(null===k||void 0===k?void 0:k.status)})})]})})]})]}),(0,S.jsxs)(i.Ym,{children:[(0,S.jsx)(i.u5,{color:"secondary",onClick:z,children:"Cerrar"}),A&&"authorized"===k.status&&Be&&(0,S.jsx)(i.u5,{color:"info",className:"text-light fw-semibold",onClick:()=>{try{if(!xe)return void alert("Selecciona un proveedor");if(!je)return void alert("Selecciona una cuenta de proveedor");if(!ke&&!X)return void alert("Sube la factura de pago o selecciona pago sin factura");let e={provider_id:xe,provider_account_id:je,paymentWithoutInvoice:ke,status:"sentPay"};h().fire({title:"\xbfEsta seguro de enviar a pago?",showCancelButton:!0,confirmButtonText:"Enviar"}).then((t=>{t.isConfirmed&&Re((0,b.PA)(e,T,(e=>{e.success?(Re((0,m.f)((0,c.Kv)({msg:"Solicitud enviada a pago",title:"Solicitudes de compra",type:"success"}))),rt(e.data.purchaseRequest),z(),st(),h().fire("Solicitud de pago enviada!","","success")):Re((0,m.f)((0,c.Kv)({msg:e.message,title:"Solicitudes de compra",type:"error"})))})))}))}catch(e){console.log(e)}},children:"Enviar a pago"}),A&&"approved"!==k.status&&"authorized"!==k.status&&"sentPay"!==k.status&&"paid"!==k.status&&(0,S.jsx)(i.u5,{color:"primary",className:"text-light fw-semibold",onClick:e=>{He.id!==k.petitioner_id&&Qe?(e=>{e.preventDefault();try{if(H.length<=0)return void alert("Agrega cotizaci\xf3nes a la solicitud");Re((0,b.xd)({status:"inprogress",rejectQuotes:!1,approvedAmount:0},T,(e=>{e.success?(Re((0,m.f)((0,c.Kv)({msg:"Solicitud actualizada correctamente.",title:"Solicitudes de compra",type:"success"}))),H.length>0?Promise.all(H.map((e=>{if(!e.id){let t={file:e.file,tag:e.tag,description:e.description,provider:e.provider,amount:e.amount,deliveryDate:e.deliveryDate,quote_id:T};return Re((0,b._C)(t,(()=>{})))}z(),st()}))).finally((()=>{Re((0,b.QR)(We.current_page,Ye.filter,Ye.value))})):(z(),st())):Re((0,m.f)((0,c.Kv)({msg:"Ha ocurrido un error.",title:"Solicitudes de compra",type:"error"})))})))}catch(t){console.log(t)}})(e):it(e)},children:"Guardar"}),!A&&(0,S.jsx)(i.u5,{color:"primary",className:"text-light fw-semibold",onClick:e=>{it(e)},children:"Guardar"}),Oe&&A&&"approved"===k.status&&k.approvedAmount<5e3&&(0,S.jsx)(i.u5,{color:"info",className:"text-light fw-semibold",onClick:lt,children:"Autorizar"}),De&&A&&"ok"===k.status&&k.approvedAmount>5e3&&(0,S.jsx)(i.u5,{color:"info",className:"text-light fw-semibold",onClick:lt,children:"Autorizar"}),Oe&&A&&"approved"===k.status&&k.approvedAmount>5e3&&(0,S.jsx)(i.u5,{color:"info",className:"text-light fw-semibold",onClick:e=>{e.preventDefault();try{h().fire({title:"\xbfDar el visto bueno?",showCancelButton:!0,confirmButtonText:"Si"}).then((e=>{e.isConfirmed&&Re((0,b.xd)({status:"ok"},T,(e=>{e.success?(Re((0,m.f)((0,c.Kv)({msg:"Solicitud actualizada correctamente.",title:"Solicitudes de compra",type:"success"}))),z(),st(),h().fire("Autorizado!","","success")):Re((0,m.f)((0,c.Kv)({msg:"Ha ocurrido un error.",title:"Solicitudes de compra",type:"error"})))})))}))}catch(t){console.log(t)}},children:"VoBo"}),Oe&&A&&"approved"===k.status&&(0,S.jsx)(i.u5,{color:"danger",className:"text-light fw-semibold",onClick:e=>{e.preventDefault(),h().fire({title:"Escribe un motivo del rechazo",input:"textarea",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Enviar",confirmButtonColor:"#E94834",showLoaderOnConfirm:!0,preConfirm:async e=>{try{if(!e)return void h().showValidationMessage("\n              Escribe una observacion\n            ");Re((0,b.xd)({status:"rejected",observation:e,selectedQuoteID:de,approvedAmount:0},T,(e=>{e.success?(Re((0,m.f)((0,c.Kv)({msg:"Solicitud actualizada correctamente.",title:"Solicitudes de compra",type:"success"}))),z(),st(),h().fire("Rechazado!","","success")):Re((0,m.f)((0,c.Kv)({msg:"Ha ocurrido un error.",title:"Solicitudes de compra",type:"error"})))})))}catch(t){h().showValidationMessage("\n              Request failed: ".concat(t,"\n            "))}},allowOutsideClick:()=>!h().isLoading()}).then((e=>{e.isConfirmed&&h().fire({title:"Solicitud rechazada correctamente"})}))},children:"Rechazar"})]})]}),tt&&(0,S.jsx)(N,{quoteID:null===k||void 0===k?void 0:k.id,visible:tt,onClose:()=>at(!1)})]})};var k=a(3896);const A=e=>{let{data:t}=e;const[a,r]=(0,s.useState)(!1),[l,u]=(0,s.useState)(!1),[p,v]=(0,s.useState)(null),[x,g]=(0,s.useState)(!1),j=(0,n.I0)(),f=(0,d.Tg)("quotes","delete"),y=(0,d.Tg)("quotes","edit"),C=(0,d.Tg)("quotes","show"),A=(0,d.Tg)("quotes","upload.quote"),w=e=>{h().fire({title:"\xbfEst\xe1 seguro?",text:"No podr\xe1s revertir esto.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar."}).then((t=>{t.isConfirmed&&(j((0,b.UO)(e,(t=>{t.success?(j((0,m.f)((0,c.Kv)({msg:"Solicitud eliminada correctamente.",title:"Solicitudes de compra",type:"success"}))),j((0,b.zN)(e))):j((0,m.f)((0,c.Kv)({msg:"Ha ocurrido un error.",title:"Solicitudes de compra",type:"error"})))}))),h().fire({title:"Eliminado!",text:"La solicitud ha sido eliminada.",icon:"success"}))}))};return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(i.Sx,{striped:!0,responsive:!0,children:[(0,S.jsx)(i.V,{children:(0,S.jsxs)(i.T6,{children:[(0,S.jsx)(i.is,{scope:"col",children:"Folio"}),(0,S.jsx)(i.is,{scope:"col",children:"Solicitante"}),(0,S.jsx)(i.is,{scope:"col",children:"Titulo"}),(0,S.jsx)(i.is,{scope:"col",children:"Fecha de solicitud"}),(0,S.jsx)(i.is,{scope:"col",children:"Giro"}),(0,S.jsx)(i.is,{scope:"col",children:"Unidad"}),(0,S.jsx)(i.is,{scope:"col",children:"Status"}),(0,S.jsx)(i.is,{scope:"col",className:"text-center",children:"Opciones"})]})}),(0,S.jsx)(i.NR,{children:null===t||void 0===t?void 0:t.map((e=>(0,S.jsxs)(i.T6,{children:[(0,S.jsx)(i.is,{scope:"row",children:e.id}),(0,S.jsx)(i.NN,{children:e.petitioner.name}),(0,S.jsx)(i.NN,{children:e.title}),(0,S.jsx)(i.NN,{children:(0,d.iT)(e.created_at)}),(0,S.jsx)(i.NN,{children:e.line}),(0,S.jsx)(i.NN,{children:e.unit}),(0,S.jsx)(i.NN,{children:(0,S.jsx)(i.C_,{style:{backgroundColor:d.Jw[e.status]},children:(0,d.aL)(e.status,A)})}),(0,S.jsx)(i.NN,{className:"text-center overflow-visible",children:(0,S.jsxs)(i.w5,{variant:"dropdown",children:[(0,S.jsx)(i.SQ,{href:"#",color:"light",children:(0,S.jsx)(o.Z,{icon:k.t,title:"Opciones",size:"lg"})}),(0,S.jsxs)(i.$H,{className:"position-fixed",children:[C&&(0,S.jsx)(i.$f,{style:{cursor:"pointer"},onClick:()=>{v(e),g(!0),r(!a)},children:"Ver solicitud"}),y&&"approved"!==e.status&&"inprogress"!==e.status&&"ok"!==e.status&&"authorized"!==e.status&&"sentPay"!==e.status&&"paid"!==e.status&&(0,S.jsx)(i.$f,{style:{cursor:"pointer"},onClick:()=>{v(e),r(!a)},children:"Editar"}),f&&"approved"!==e.status&&"inprogress"!==e.status&&"ok"!==e.status&&"authorized"!==e.status&&"sentPay"!==e.status&&"paid"!==e.status&&(0,S.jsx)(i.$f,{style:{cursor:"pointer"},onClick:()=>w(e.id),children:"Eliminar"}),(0,S.jsx)(i.$f,{style:{cursor:"pointer"},onClick:()=>{v(e),u(!l)},children:"Ver observaciones"})]})]})})]},e.id)))})]}),a&&(0,S.jsx)(z,{visible:a,onClose:()=>{r(!1),g(!1)},quoteData:p,view:x}),l&&(0,S.jsx)(N,{quoteID:null===p||void 0===p?void 0:p.id,visible:l,onClose:()=>u(!1)})]})},w=()=>{const[e,t]=(0,s.useState)(!1),[a,u]=(0,s.useState)("provider"),[p,h]=(0,s.useState)(""),[v,m]=(0,s.useState)(1),x=(0,n.I0)(),{currentPage:g,last_page:j,data:f}=(0,n.v9)((e=>e.quote.quotes)),y=(0,n.v9)((e=>e.quote.loading));return(0,s.useEffect)((()=>{x((0,b.QR)(v,a,p))}),[v,x]),(0,s.useEffect)((()=>{g&&m(g)}),[g]),(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(i.xH,{children:[(0,S.jsxs)(i.bn,{className:"d-flex justify-content-between align-items-center",children:[(0,S.jsx)("h4",{children:"Solicitudes de compra"}),(0,S.jsxs)("div",{className:"d-flex gap-2",children:[(0,d.Tg)("quotes","create")&&(0,S.jsxs)(i.u5,{color:"primary",className:"text-light fw-semibold align-content-center d-flex",onClick:()=>t(!e),children:[(0,S.jsx)(o.Z,{icon:r.q,size:"xl",className:"me-1"}),"Nuevo"]}),(0,S.jsx)(i.u5,{color:"info",className:"text-light align-content-center d-flex",children:(0,S.jsx)(o.Z,{icon:l.j,size:"xl"})})]})]}),(0,S.jsxs)(i.sl,{children:[(0,S.jsxs)(i.lx,{children:[(0,S.jsx)(i.L8,{children:"Filtros de busqueda"}),(0,S.jsxs)("div",{className:"mb-3 d-flex",children:[(0,S.jsx)("div",{className:"flex-fill me-2",children:(0,S.jsx)(i.LX,{value:a,onChange:e=>u(e.target.value),"aria-label":"caseFilter",options:[{label:"Proveedor",value:"provider"},{label:"Solicitante",value:"petitioner"},{label:"Status",value:"status"}]})}),(0,S.jsx)("div",{className:"flex-fill me-2",children:"status"!==a?(0,S.jsx)(i.jO,{value:p,onChange:e=>h(e.target.value),type:"text",id:"provider",placeholder:"Ingresar texto"}):(0,S.jsx)(i.LX,{value:p,onChange:e=>h(e.target.value),"aria-label":"caseFilter",options:[{label:"Pendientes",value:"pending"},{label:"Revisadas",value:"review"},{label:"Aprobadas",value:"approved"},{label:"Rechazadas",value:"rejects"}]})})]}),(0,S.jsx)(i.u5,{type:"button",className:"text-light fw-semibold",onClick:()=>x((0,b.QR)(v,a,p)),children:"Buscar"})]}),y?(0,S.jsx)("div",{className:"d-flex justify-content-center",children:(0,S.jsx)(i.LQ,{color:"primary",variant:"grow"})}):(0,S.jsx)(A,{data:f})]}),(0,S.jsx)(i.Bt,{children:(0,S.jsx)(c.bD,{currentPage:v,lastPage:j,setCurrentPage:m})})]}),e&&(0,S.jsx)(z,{visible:e,onClose:()=>t(!1)})]})}}}]);
//# sourceMappingURL=989.53ce4b36.chunk.js.map