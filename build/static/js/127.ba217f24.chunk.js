"use strict";(self.webpackChunkgasomax_client=self.webpackChunkgasomax_client||[]).push([[127],{9741:(e,a,o)=>{o.r(a),o.d(a,{default:()=>u});var t=o(2791),s=o(7941),r=o(9101),n=o(374),d=o(5294),i=o(6647),c=o(591);var l=o(1087),p=o(4166),x=o(184);const u=()=>{const e=(0,r.I0)(),[a]=((0,r.v9)((e=>e.auth.user)),(0,r.v9)((e=>e.auth.permissions)),(0,l.lr)()),o=a.get("code"),{token_dropbox:u}=(0,r.v9)((e=>e.dropbox.token));return(0,t.useEffect)((()=>{e((0,n.PR)())}),[e]),(0,t.useEffect)((()=>{var a;e((a=a=>{a.data||e((0,p.f)((0,s.Kv)({msg:"Sin token para dropbox",type:"error"})))},async e=>{try{var o,t,s,r,n,l;const p=await d.Z.get("".concat(i.Z.instance.baseURL,"/api/configuration"),{headers:{...i.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});let x={token_dropbox:null===(o=p.data)||void 0===o||null===(t=o.data)||void 0===t?void 0:t.token_dropbox,token_dropbox_expires_in:null===(s=p.data)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.token_dropbox_expires_in,token_dropbox_refresh:null===(n=p.data)||void 0===n||null===(l=n.data)||void 0===l?void 0:l.token_dropbox_refresh};e({type:c.G9,payload:x}),a(p.data)}catch(p){console.log(p)}}))}),[e]),(0,t.useEffect)((()=>{var a;o&&e((a=o,async e=>{try{await d.Z.post("".concat(i.Z.instance.baseURL,"/api/token/dropbox"),{code:a},{headers:{...i.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}})}catch(o){e({type:c.mx,payload:{msg:o.response.statusText,status:o.response.status}})}}))}),[e,o,u]),(0,x.jsxs)("div",{children:[(0,x.jsx)(s.S8,{}),(0,x.jsxs)("div",{className:"wrapper d-flex flex-column min-vh-100 bg-light",children:[(0,x.jsx)(s.tf,{}),(0,x.jsx)("div",{className:"body flex-grow-1 px-3",children:(0,x.jsx)(s.Lk,{})}),(0,x.jsx)(s.qh,{})]})]})}}}]);
//# sourceMappingURL=127.ba217f24.chunk.js.map