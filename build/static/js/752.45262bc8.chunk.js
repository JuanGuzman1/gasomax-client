"use strict";(self.webpackChunkgasomax_client=self.webpackChunkgasomax_client||[]).push([[752],{7201:(e,t,a)=>{a.d(t,{Tg:()=>p,a4:()=>l,iT:()=>o,mY:()=>i,mk:()=>m,uD:()=>d,uf:()=>n,yw:()=>c});var s=a(9779),r=a(9101);const n=e=>(e/1).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),o=e=>s.ou.fromISO(e).toLocaleString(s.ou.DATE_SHORT),i=e=>s.ou.fromISO(e).toLocaleString(s.ou.DATETIME_SHORT),c={advance:"Anticipo",settlement:"Liquidaci\xf3n",payment:"Abono a cuenta"},l={pending:"Cotizaci\xf3n completa",approved:"Cotizaci\xf3n aprobada",paid:"Cotizaci\xf3n pagada",rejected:"Cotizaci\xf3n rechazada"},d={pending:"warning",approved:"success",paid:"info",rejected:"danger"},m={index:"Lectura",create:"Crear",edit:"Editar",delete:"Eliminar",reject:"Rechazar",pay:"Pagar",authorize:"Autorizar",modules:"Asignar modulos",permissions:"Asignar permisos"},p=(e,t)=>{const a=(0,r.v9)((e=>e.auth.permissions)),s=(0,r.v9)((e=>e.auth.modules)).find((t=>t.submodule===e));return!!s&&!!a.find((e=>e.submodule===s.submodule&&e.permission===t))}},3752:(e,t,a)=>{a.r(t),a.d(t,{default:()=>b});var s=a(2791),r=a(2937),n=a(9101),o=a(4846),i=a(8030),c=a(574),l=a(5294),d=a(591),m=a(6647);const p=(e,t,a)=>async s=>{try{const r=await l.Z.get("".concat(m.Z.instance.baseURL,"/api/department?").concat(t,"=").concat(a,"&page=").concat(e),{headers:{...m.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});s({type:d.hf,payload:r.data})}catch(r){s({type:d.fm,payload:{msg:r.response.statusText,status:r.response.status}})}};var u=a(3896),x=a(1830),h=a.n(x),g=a(4166),j=a(184);const v=e=>{let{visible:t,onClose:a,departmentData:o}=e;const[i,p]=(0,s.useState)(1),[u,x]=(0,s.useState)(),[h,v]=(0,s.useState)(),f=(0,n.I0)(),y=((0,n.v9)((e=>e.department.loading)),(0,s.useCallback)((()=>{v(),p(1)}),[]));return(0,s.useEffect)((()=>{o&&(x(o.id),v(o.name))}),[o]),(0,j.jsxs)(r.Tk,{visible:t,onClose:a,"aria-labelledby":"LiveDemoExampleLabel",size:"lg",children:[(0,j.jsx)(r.p0,{onClose:a,children:(0,j.jsx)(r.fl,{id:"LiveDemoExampleLabel",children:o?"Editar ".concat(o.name):"Agregar nuevo"})}),(0,j.jsxs)(r.sD,{children:[(0,j.jsx)(r.n2,{variant:"tabs",role:"tablist",className:"mt-1",children:(0,j.jsx)(r.U6,{role:"presentation",children:(0,j.jsx)(r.AQ,{active:1===i,component:"button",role:"tab","aria-controls":"data-tab-pane","aria-selected":1===i,onClick:()=>p(1),children:"Datos"})})}),(0,j.jsx)(r.gr,{children:(0,j.jsx)(r.IA,{role:"tabpanel","aria-labelledby":"data-tab-pane",visible:1===i,children:(0,j.jsx)(r.lx,{className:"mt-3",children:(0,j.jsxs)("div",{className:"mb-3",children:[(0,j.jsx)(r.L8,{htmlFor:"department",children:"Departamento"}),(0,j.jsx)(r.jO,{type:"text",id:"department",placeholder:"nombre",onChange:e=>v(e.target.value),value:h})]})})})})]}),(0,j.jsxs)(r.Ym,{children:[(0,j.jsx)(r.u5,{color:"secondary",onClick:a,children:"Cerrar"}),(0,j.jsx)(r.u5,{color:"primary",className:"text-light fw-semibold",onClick:e=>{if(e.preventDefault(),!h)return void alert("Ingrese un nombre");let t={name:h};f(o?((e,t,a)=>async s=>{try{const r=await l.Z.put("".concat(m.Z.instance.baseURL,"/api/department/").concat(t),e,{headers:{...m.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});s({type:d.aZ,payload:r.data.data}),a(r.data)}catch(r){s({type:d.fm,payload:{msg:r.response.statusText,status:r.response.status}}),a({success:!1,message:r.message})}})(t,u,(e=>{e.success?f((0,g.f)((0,c.Kv)({msg:"Departamento actualizado correctamente.",title:"Departamentos",type:"success"}))):f((0,g.f)((0,c.Kv)({msg:"Ha ocurrido un error.",title:"Departamentos",type:"error"}))),y(),a()})):((e,t)=>async a=>{try{const s=await l.Z.post("".concat(m.Z.instance.baseURL,"/api/department"),e,{headers:{...m.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});a({type:d.Wo,payload:s.data.data}),t(s.data)}catch(s){a({type:d.fm,payload:{msg:s.response.statusText,status:s.response.status}}),t({success:!1,message:s.message})}})(t,(e=>{e.success?f((0,g.f)((0,c.Kv)({msg:"Departamento agregado correctamente.",title:"Departamentos",type:"success"}))):f((0,g.f)((0,c.Kv)({msg:"Ha ocurrido un error.",title:"Departamentos",type:"error"}))),y(),a()})))},children:"Guardar"})]})]})};var f=a(7201);const y=e=>{let{data:t}=e;const[a,i]=(0,s.useState)(!1),[p,x]=(0,s.useState)(null),y=(0,n.I0)(),b=(0,f.Tg)("departments","delete"),C=(0,f.Tg)("departments","edit"),D=e=>{h().fire({title:"\xbfEst\xe1 seguro?",text:"No podr\xe1s revertir esto.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar."}).then((t=>{t.isConfirmed&&y(((e,t)=>async a=>{try{const s=await l.Z.delete("".concat(m.Z.instance.baseURL,"/api/department/").concat(e),{headers:{...m.Z.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});a({type:d.k_,payload:e}),t(s.data)}catch(s){a({type:d.fm,payload:{msg:s.response.statusText,status:s.response.status}}),t({success:!1,message:s.message})}})(e,(e=>{e.success?(y((0,g.f)((0,c.Kv)({msg:"Departamento eliminado correctamente.",title:"Departamentos",type:"success"}))),h().fire({title:"Eliminado!",text:"El departamento ha sido eliminado.",icon:"success"})):y((0,g.f)((0,c.Kv)({msg:"Ocurrio un error.",title:"Departamentos",type:"error"})))})))}))};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(r.Sx,{striped:!0,responsive:!0,children:[(0,j.jsx)(r.V,{children:(0,j.jsxs)(r.T6,{children:[(0,j.jsx)(r.is,{scope:"col",children:"#"}),(0,j.jsx)(r.is,{scope:"col",children:"Departamento"}),(0,j.jsx)(r.is,{scope:"col",className:"text-center",children:"Opciones"})]})}),(0,j.jsx)(r.NR,{children:null===t||void 0===t?void 0:t.map((e=>(0,j.jsxs)(r.T6,{children:[(0,j.jsx)(r.is,{scope:"row",children:e.id}),(0,j.jsx)(r.NN,{children:e.name}),(0,j.jsx)(r.NN,{className:"text-center overflow-visible",children:(0,j.jsxs)(r.w5,{variant:"dropdown",children:[(0,j.jsx)(r.SQ,{href:"#",color:"light",children:(0,j.jsx)(o.Z,{icon:u.t,title:"Opciones",size:"lg"})}),(0,j.jsxs)(r.$H,{className:"position-fixed",children:[C&&(0,j.jsx)(r.$f,{style:{cursor:"pointer"},onClick:()=>{i(!a),x(e)},children:"Editar"}),b&&(0,j.jsx)(r.$f,{style:{cursor:"pointer"},onClick:()=>D(e.id),children:"Eliminar"})]})]})})]},e.id)))})]}),(0,j.jsx)(v,{visible:a,onClose:()=>i(!1),departmentData:p})]})},b=()=>{const[e,t]=(0,s.useState)(!1),a=(0,n.I0)(),[l,d]=(0,s.useState)("name"),[m,u]=(0,s.useState)(""),x=(0,n.v9)((e=>e.department.departments.data)),[h,g]=(0,s.useState)(1),b=(0,n.v9)((e=>e.department.departments.current_page)),C=(0,n.v9)((e=>e.department.departments.last_page)),D=((0,n.v9)((e=>e.department.departments.total)),(0,n.v9)((e=>e.department.loading)));return(0,s.useEffect)((()=>{a(p(h,l,m))}),[a,h]),(0,s.useEffect)((()=>{b&&g(b)}),[b]),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(r.xH,{children:[(0,j.jsxs)(r.bn,{className:"d-flex justify-content-between align-items-center",children:[(0,j.jsx)("h4",{children:"Listado de departamentos"}),(0,j.jsx)("div",{className:"d-flex gap-2",children:(0,f.Tg)("departments","create")&&(0,j.jsxs)(r.u5,{color:"primary",className:"text-light fw-semibold align-content-center d-flex",onClick:()=>t(!e),children:[(0,j.jsx)(o.Z,{icon:i.q,size:"xl",className:"me-1"}),"Nuevo"]})})]}),(0,j.jsxs)(r.sl,{children:[(0,j.jsxs)(r.lx,{children:[(0,j.jsx)(r.L8,{children:"Filtros de busqueda"}),(0,j.jsxs)("div",{className:"mb-3 d-flex",children:[(0,j.jsx)("div",{className:"flex-fill me-2",children:(0,j.jsx)(r.LX,{value:l,onChange:e=>d(e.target.value),"aria-label":"caseFilter",options:[{label:"Departamento",value:"name"}]})}),(0,j.jsx)("div",{className:"flex-fill me-2",children:(0,j.jsx)(r.jO,{value:m,onChange:e=>u(e.target.value),type:"text",placeholder:"Ingresar texto"})})]}),(0,j.jsx)(r.u5,{type:"button",className:"text-light fw-semibold",onClick:()=>a(p(h,l,m)),children:"Buscar"})]}),D?(0,j.jsx)("div",{className:"d-flex justify-content-center",children:(0,j.jsx)(r.LQ,{color:"primary",variant:"grow"})}):(0,j.jsx)(y,{data:x})]}),(0,j.jsx)(r.Bt,{children:(0,j.jsx)(c.bD,{currentPage:h,lastPage:C,setCurrentPage:g})})]}),(0,j.jsx)(v,{visible:e,onClose:()=>t(!1)})]})}}}]);
//# sourceMappingURL=752.45262bc8.chunk.js.map