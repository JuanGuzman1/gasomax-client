"use strict";(self.webpackChunkgasomax_client=self.webpackChunkgasomax_client||[]).push([[368],{4880:(e,a,t)=>{t.d(a,{GB:()=>c,GU:()=>l,M7:()=>d,jH:()=>o,yq:()=>i});var s=t(8372),r=t(2156),n=t(4836);const o=(e,a,t)=>async o=>{try{const i=await s.c.get("".concat(n.c.instance.baseURL,"/api/department?").concat(a,"=").concat(t,"&page=").concat(e),{headers:{...n.c.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});o({type:r.Uj,payload:i.data})}catch(i){o({type:r.G4,payload:{msg:i.response.statusText,status:i.response.status}})}},i=(e,a)=>async t=>{try{const o=await s.c.post("".concat(n.c.instance.baseURL,"/api/department"),e,{headers:{...n.c.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});t({type:r._e,payload:o.data.data}),a(o.data)}catch(o){t({type:r.G4,payload:{msg:o.response.statusText,status:o.response.status}}),a({success:!1,message:o.message})}},c=(e,a,t)=>async o=>{try{const i=await s.c.put("".concat(n.c.instance.baseURL,"/api/department/").concat(a),e,{headers:{...n.c.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});o({type:r.gR,payload:i.data.data}),t(i.data)}catch(i){o({type:r.G4,payload:{msg:i.response.statusText,status:i.response.status}}),t({success:!1,message:i.message})}},l=(e,a)=>async t=>{try{const o=await s.c.delete("".concat(n.c.instance.baseURL,"/api/department/").concat(e),{headers:{...n.c.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});t({type:r.mw,payload:e}),a(o.data)}catch(o){t({type:r.G4,payload:{msg:o.response.statusText,status:o.response.status}}),a({success:!1,message:o.message})}},d=()=>async e=>{try{const a=await s.c.get("".concat(n.c.instance.baseURL,"/api/select/department"),{headers:{...n.c.instance.headers,Authorization:"Bearer "+localStorage.getItem("token")}});e({type:r.Av,payload:a.data})}catch(a){e({type:r.G4,payload:{msg:a.response.statusText,status:a.response.status}})}}},868:(e,a,t)=>{t.d(a,{Im:()=>u,OO:()=>i,SU:()=>d,Sk:()=>c,UT:()=>p,YD:()=>m,_x:()=>l,iy:()=>n,my:()=>o});var s=t(9427),r=t(8044);const n=e=>(e/1).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),o=e=>s.CS.fromISO(e).toLocaleString(s.CS.DATE_SHORT),i=e=>s.CS.fromISO(e).toLocaleString(s.CS.DATETIME_SHORT),c=function(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{inprogress:a?"Cotizaci\xf3nes enviadas":"Cotizaci\xf3nes disponibles",approved:"Cotizaci\xf3n aprobada",authorized:"Cotizaci\xf3n autorizada",ok:"Cotizaci\xf3n VoBo",sent:a?"Solicitud nueva":"Solicitud enviada",sentPay:"Enviada a pago",paid:"Pagado",rejected:"Cotizaci\xf3nes rechazadas"}[e]},l={inprogress:"#00FFFF",approved:"#00FF00",authorized:"#0000FF",ok:"#008000",sent:"#FFA500",sentPay:"#30AFD4",paid:"#800080",rejected:"#FF0000"},d={pending:"Pendiente de aprobaci\xf3n",approved:"Solicitud aprobada",paid:"Pagado",rejected:"Solicitud rechazada"},p={pending:"#FFA500",approved:"#00FF00",paid:"#800080",rejected:"#FF0000"},m={index:"Listar",show:"Ver",create:"Crear",edit:"Editar",delete:"Eliminar",reject:"Rechazar",pay:"Pagar",approve:"Aprobar",authorize:"Autorizar","authorize.minor.1000":"Autorizar < $1,000","authorize.mayor.1000":"Autorizar > $1,000","authorize.minor.5000":"Autorizar < $5,000","authorize.mayor.5000":"Autorizar > $5,000",modules:"Asignar modulos",permissions:"Asignar permisos","upload.quote":"Subir cotizaci\xf3nes"},u=(e,a)=>{const t=(0,r.w1)((e=>e.auth.permissions)),s=(0,r.w1)((e=>e.auth.modules)).find((a=>a.submodule===e));return!!s&&!!t.find((e=>e.submodule===s.submodule&&e.permission===a))}},368:(e,a,t)=>{t.r(a),t.d(a,{default:()=>y});var s=t(9060),r=t(3084),n=t(8044),o=t(5564),i=t(2276),c=t(7316),l=t(4880),d=t(4904),p=t(9012),m=t.n(p),u=t(5064),h=t(2496);const x=e=>{let{visible:a,onClose:t,departmentData:o}=e;const[i,d]=(0,s.useState)(1),[p,m]=(0,s.useState)(),[x,g]=(0,s.useState)(),j=(0,n.OY)(),y=((0,n.w1)((e=>e.department.loading)),(0,s.useCallback)((()=>{g(),d(1)}),[]));return(0,s.useEffect)((()=>{o&&(m(o.id),g(o.name))}),[o]),(0,h.jsxs)(r.U5,{visible:a,onClose:t,"aria-labelledby":"LiveDemoExampleLabel",size:"lg",children:[(0,h.jsx)(r.gO,{onClose:t,children:(0,h.jsx)(r._K,{id:"LiveDemoExampleLabel",children:o?"Editar ".concat(o.name):"Agregar nuevo"})}),(0,h.jsxs)(r.EB,{children:[(0,h.jsx)(r.wx,{variant:"tabs",role:"tablist",className:"mt-1",children:(0,h.jsx)(r.SU,{role:"presentation",children:(0,h.jsx)(r.QJ,{active:1===i,component:"button",role:"tab","aria-controls":"data-tab-pane","aria-selected":1===i,onClick:()=>d(1),children:"Datos"})})}),(0,h.jsx)(r.CY,{children:(0,h.jsx)(r.Wy,{role:"tabpanel","aria-labelledby":"data-tab-pane",visible:1===i,children:(0,h.jsx)(r.YR,{className:"mt-3",children:(0,h.jsxs)("div",{className:"mb-3",children:[(0,h.jsx)(r.Q5,{htmlFor:"department",children:"Departamento"}),(0,h.jsx)(r.Ip,{type:"text",id:"department",placeholder:"nombre",onChange:e=>g(e.target.value),value:x})]})})})})]}),(0,h.jsxs)(r.yI,{children:[(0,h.jsx)(r.uE,{color:"secondary",onClick:t,children:"Cerrar"}),(0,h.jsx)(r.uE,{color:"primary",className:"text-light fw-semibold",onClick:e=>{if(e.preventDefault(),!x)return void alert("Ingrese un nombre");let a={name:x};j(o?(0,l.GB)(a,p,(e=>{e.success?j((0,u.I)((0,c.oN)({msg:"Departamento actualizado correctamente.",title:"Departamentos",type:"success"}))):j((0,u.I)((0,c.oN)({msg:"Ha ocurrido un error.",title:"Departamentos",type:"error"}))),y(),t()})):(0,l.yq)(a,(e=>{e.success?j((0,u.I)((0,c.oN)({msg:"Departamento agregado correctamente.",title:"Departamentos",type:"success"}))):j((0,u.I)((0,c.oN)({msg:"Ha ocurrido un error.",title:"Departamentos",type:"error"}))),y(),t()})))},children:"Guardar"})]})]})};var g=t(868);const j=e=>{let{data:a}=e;const[t,i]=(0,s.useState)(!1),[p,j]=(0,s.useState)(null),y=(0,n.OY)(),v=(0,g.Im)("departments","delete"),b=(0,g.Im)("departments","edit");return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(r.k7,{striped:!0,responsive:!0,children:[(0,h.jsx)(r.Iy,{children:(0,h.jsxs)(r.uH,{children:[(0,h.jsx)(r.Qr,{scope:"col",children:"#"}),(0,h.jsx)(r.Qr,{scope:"col",children:"Departamento"}),(0,h.jsx)(r.Qr,{scope:"col",className:"text-center",children:"Opciones"})]})}),(0,h.jsx)(r.g7,{children:null===a||void 0===a?void 0:a.map((e=>(0,h.jsxs)(r.uH,{children:[(0,h.jsx)(r.Qr,{scope:"row",children:e.id}),(0,h.jsx)(r.kz,{children:e.name}),(0,h.jsx)(r.kz,{className:"text-center overflow-visible",children:(0,h.jsxs)(r.Cg,{variant:"dropdown",children:[(0,h.jsx)(r.uw,{href:"#",color:"light",children:(0,h.jsx)(o.c,{icon:d.i,title:"Opciones",size:"lg"})}),(0,h.jsxs)(r.cI,{className:"position-fixed",children:[b&&(0,h.jsx)(r.yu,{style:{cursor:"pointer"},onClick:()=>{i(!t),j(e)},children:"Editar"}),v&&(0,h.jsx)(r.yu,{style:{cursor:"pointer"},onClick:()=>{return a=e.id,void m().fire({title:"\xbfEst\xe1 seguro?",text:"No podr\xe1s revertir esto.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar."}).then((e=>{e.isConfirmed&&y((0,l.GU)(a,(e=>{e.success?(y((0,u.I)((0,c.oN)({msg:"Departamento eliminado correctamente.",title:"Departamentos",type:"success"}))),m().fire({title:"Eliminado!",text:"El departamento ha sido eliminado.",icon:"success"})):y((0,u.I)((0,c.oN)({msg:"Ocurrio un error.",title:"Departamentos",type:"error"})))})))}));var a},children:"Eliminar"})]})]})})]},e.id)))})]}),(0,h.jsx)(x,{visible:t,onClose:()=>i(!1),departmentData:p})]})},y=()=>{const[e,a]=(0,s.useState)(!1),t=(0,n.OY)(),[d,p]=(0,s.useState)("name"),[m,u]=(0,s.useState)(""),y=(0,n.w1)((e=>e.department.departments.data)),[v,b]=(0,s.useState)(1),f=(0,n.w1)((e=>e.department.departments.current_page)),C=(0,n.w1)((e=>e.department.departments.last_page)),z=((0,n.w1)((e=>e.department.departments.total)),(0,n.w1)((e=>e.department.loading)));return(0,s.useEffect)((()=>{t((0,l.jH)(v,d,m))}),[t,v]),(0,s.useEffect)((()=>{f&&b(f)}),[f]),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(r.u0,{children:[(0,h.jsxs)(r.Q_,{className:"d-flex justify-content-between align-items-center",children:[(0,h.jsx)("h4",{children:"Listado de departamentos"}),(0,h.jsx)("div",{className:"d-flex gap-2",children:(0,g.Im)("departments","create")&&(0,h.jsxs)(r.uE,{color:"primary",className:"text-light fw-semibold align-content-center d-flex",onClick:()=>a(!e),children:[(0,h.jsx)(o.c,{icon:i.O,size:"xl",className:"me-1"}),"Nuevo"]})})]}),(0,h.jsxs)(r.Yj,{children:[(0,h.jsxs)(r.YR,{children:[(0,h.jsx)(r.Q5,{children:"Filtros de busqueda"}),(0,h.jsxs)("div",{className:"mb-3 d-flex",children:[(0,h.jsx)("div",{className:"flex-fill me-2",children:(0,h.jsx)(r.Wc,{value:d,onChange:e=>p(e.target.value),"aria-label":"caseFilter",options:[{label:"Departamento",value:"name"}]})}),(0,h.jsx)("div",{className:"flex-fill me-2",children:(0,h.jsx)(r.Ip,{value:m,onChange:e=>u(e.target.value),type:"text",placeholder:"Ingresar texto"})})]}),(0,h.jsx)(r.uE,{type:"button",className:"text-light fw-semibold",onClick:()=>t((0,l.jH)(v,d,m)),children:"Buscar"})]}),z?(0,h.jsx)("div",{className:"d-flex justify-content-center",children:(0,h.jsx)(r.GG,{color:"primary",variant:"grow"})}):(0,h.jsx)(j,{data:y})]}),(0,h.jsx)(r.IE,{children:(0,h.jsx)(c.KQ,{currentPage:v,lastPage:C,setCurrentPage:b})})]}),(0,h.jsx)(x,{visible:e,onClose:()=>a(!1)})]})}}}]);
//# sourceMappingURL=368.4a30dda0.chunk.js.map